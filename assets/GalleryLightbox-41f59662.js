import{j as t,A as P,m as q}from"./motion-3c015c26.js";import{r as n}from"./vendor-374d307f.js";import{X as z,n as I,o as D,M as Z,p as $,q as O}from"./icons-5fe8db7b.js";const V=({items:i,index:s,onClose:p,onNavigate:r})=>{const f=n.useRef(null),g=n.useRef(null),[x,u]=n.useState(1),[d,b]=n.useState(null),[w,j]=n.useState(null),[y,v]=n.useState(!1),[M,N]=n.useState(!1),[S,k]=n.useState(0),[X,E]=n.useState(0),l=i[s];n.useEffect(()=>{const e=a=>{a.key==="Escape"&&p(),a.key==="ArrowLeft"&&r(Math.max(0,s-1)),a.key==="ArrowRight"&&r(Math.min(i.length-1,s+1))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,i.length,p,r]),n.useEffect(()=>{u(1),v(!1)},[s]),n.useEffect(()=>(g.current=document.activeElement,setTimeout(()=>{var e;return(e=f.current)==null?void 0:e.focus()},0),()=>{const e=g.current;e&&typeof e.focus=="function"&&e.focus()}),[]),n.useEffect(()=>{const e=a=>{if(!a||!a.image)return;const c=a.image.includes("image.pollinations.ai/prompt/")?a.image.replace("https://image.pollinations.ai/prompt/","/api/pollinations-image?prompt=").replace("?n=1&","&"):a.image,o=new Image;o.src=c};e(i[s-1]),e(i[s+1])},[s,i]);const C=()=>{const e=f.current;e&&e.requestFullscreen&&e.requestFullscreen().catch(()=>{})},Y=e=>{b(e.clientX),j(e.clientY),x>1&&N(!0)},A=e=>{if(d!==null){if(!M){const a=e.clientX-d;a>50&&r(Math.max(0,s-1)),a<-50&&r(Math.min(i.length-1,s+1))}b(null),j(null),N(!1)}},R=e=>{if(!M||d===null||w===null)return;const a=e.clientX-d,c=e.clientY-w,o=300,h=300;k(Math.max(-o,Math.min(o,a))),E(Math.max(-h,Math.min(h,c)))},F=e=>{if(e.ctrlKey||e.shiftKey||e.altKey)return;const a=e.deltaY>0?-.1:.1;u(c=>Math.max(1,Math.min(3,c+a)))},K=()=>{u(e=>e>1?1:2),x<=1&&(k(0),E(0))};return t.jsxs("div",{role:"dialog","aria-modal":"true","aria-label":"VisualizaÃ§Ã£o em tela cheia",className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 text-white",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{"aria-label":"Fechar",onClick:p,className:"p-2 rounded hover:bg-white/10",children:t.jsx(z,{className:"w-5 h-5"})}),t.jsx("button",{"aria-label":"Zoom in",onClick:()=>u(e=>Math.min(3,e+.25)),className:"p-2 rounded hover:bg-white/10",children:t.jsx(I,{className:"w-5 h-5"})}),t.jsx("button",{"aria-label":"Zoom out",onClick:()=>u(e=>Math.max(1,e-.25)),className:"p-2 rounded hover:bg-white/10",children:t.jsx(D,{className:"w-5 h-5"})}),t.jsx("button",{"aria-label":"Tela cheia",onClick:C,className:"p-2 rounded hover:bg-white/10",children:t.jsx(Z,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"text-sm",children:[s+1," / ",i.length]})]}),t.jsx("div",{ref:f,className:"flex-1 relative overflow-hidden",onPointerDown:Y,onPointerUp:A,onPointerMove:R,onWheel:F,onDoubleClick:K,tabIndex:-1,onKeyDown:e=>{var a;if(e.key==="Tab"){const c=f.current;if(!c)return;const o=Array.from(c.querySelectorAll("button"));if(!o.length)return;const h=document.activeElement;let m=o.findIndex(L=>L===h);e.shiftKey?m=m<=0?o.length-1:m-1:m=m>=o.length-1?0:m+1,(a=o[m])==null||a.focus(),e.preventDefault()}},children:t.jsx(P,{initial:!1,mode:"popLayout",children:t.jsxs(q.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.2},className:"absolute inset-0 flex items-center justify-center",children:[l!=null&&l.image&&!y?t.jsx("img",{src:l.image.includes("image.pollinations.ai/prompt/")?l.image.replace("https://image.pollinations.ai/prompt/","/api/pollinations-image?prompt=").replace("?n=1&","&"):l.image,alt:l.name,className:"max-h-full max-w-full object-contain",style:{transform:`translate3d(${S}px, ${X}px, 0) scale(${x})`},loading:"lazy",decoding:"async",onError:()=>v(!0)}):t.jsx("div",{className:"text-white text-6xl",children:"ðŸ¦¸"}),y&&t.jsx("div",{className:"absolute bottom-4 left-4 right-4 text-center text-red-300 text-sm",children:"Falha ao carregar a imagem"})]},l==null?void 0:l.id)})}),t.jsxs("div",{className:"p-3 flex items-center justify-between text-white",children:[t.jsx("button",{"aria-label":"Anterior",onClick:()=>r(Math.max(0,s-1)),className:"p-2 rounded hover:bg-white/10",children:t.jsx($,{className:"w-6 h-6"})}),t.jsx("div",{className:"flex items-center gap-2 overflow-x-auto",children:i.slice(Math.max(0,s-3),Math.min(i.length,s+4)).map(e=>t.jsx("button",{"aria-label":e.name,onClick:()=>r(i.findIndex(a=>a.id===e.id)),className:`w-16 h-16 rounded border ${e.id===(l==null?void 0:l.id)?"border-yellow-400":"border-white/20"} overflow-hidden flex-shrink-0`,children:e.image?t.jsx("img",{src:e.image.includes("image.pollinations.ai/prompt/")?e.image.replace("https://image.pollinations.ai/prompt/","/api/pollinations-image?prompt=").replace("?n=1&","&"):e.image,alt:e.name,className:"w-full h-full object-cover",loading:"lazy",decoding:"async"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center",children:"ðŸ¦¸"})},e.id))}),t.jsx("button",{"aria-label":"PrÃ³ximo",onClick:()=>r(Math.min(i.length-1,s+1)),className:"p-2 rounded hover:bg-white/10",children:t.jsx(O,{className:"w-6 h-6"})})]})]})};export{V as default};
//# sourceMappingURL=GalleryLightbox-41f59662.js.map
