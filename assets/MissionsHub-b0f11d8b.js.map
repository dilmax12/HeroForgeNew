{"version":3,"file":"MissionsHub-b0f11d8b.js","sources":["../../src/services/narratorAI.ts","../../src/components/AIDungeonRun.tsx","../../src/components/MissionsHub.tsx"],"sourcesContent":["import { aiService } from './aiService';\n\ntype GenerateTextParams = {\n  systemMessage: string;\n  prompt: string;\n  maxTokens?: number;\n  temperature?: number;\n};\n\nasync function generate(params: GenerateTextParams): Promise<string> {\n  const maxTokens = params.maxTokens ?? 220;\n  const temperature = params.temperature ?? 0.8;\n  console.debug('[AI][Narrator] Dispatch', {\n    provider: aiService.getProvider(),\n    maxTokens,\n    temperature,\n    promptLen: params.prompt?.length || 0\n  });\n  try {\n    const resp = await aiService.generateTextSafe({\n      systemMessage: params.systemMessage,\n      prompt: params.prompt,\n      maxTokens,\n      temperature,\n    });\n    console.debug('[AI][Narrator] Completed', {\n      provider: resp.provider,\n      model: resp.model,\n      textLen: resp.text?.length || 0\n    });\n    const text = (resp.text || '').trim();\n    if (text.length > 0) return text;\n    // Fallback mínimo\n    return 'O narrador observa em silêncio: o caminho segue adiante, carregado de escolhas e perigos. Coragem.';\n  } catch (error: any) {\n    console.error('[AI][Narrator] Failed', {\n      code: error?.code,\n      message: error?.message,\n      provider: error?.provider,\n      retryable: error?.retryable\n    });\n    // Fallback em caso de exceção\n    return 'O destino vacila por instantes, mas a jornada continua. Siga em frente.';\n  }\n}\n\nfunction narratorSystem(): string {\n  return (\n    'Você é o MESTRE DO JOGO em um RPG medieval de fantasia. ' +\n    'Fale como um narrador envolvente, em PT-BR, com tom épico e emocional. ' +\n    'Use 1–3 frases no máximo, sem listas, sem aspas.'\n  );\n}\n\nexport async function generateDMLine(opts: {\n  route: string;\n  heroName?: string;\n  heroClass?: string;\n}): Promise<string> {\n  const { route, heroName = 'herói', heroClass = 'classe desconhecida' } = opts;\n  const prompt = `Contexto de rota: ${route}. O herói é ${heroName} (${heroClass}). ` +\n    'Produza UMA fala curta do mestre do jogo, comentando a cena atual e motivando o herói a avançar.';\n  return generate({ systemMessage: narratorSystem(), prompt, maxTokens: 120, temperature: 0.7 });\n}\n\nexport async function generateOutcomeNarrative(opts: {\n  heroName?: string;\n  questTitle?: string;\n  success: boolean;\n  consequence?: string;\n  rewardSummary?: string;\n}): Promise<string> {\n  const { heroName = 'herói', questTitle = 'missão', success, consequence = '', rewardSummary = '' } = opts;\n  const outcome = success ? 'vitória' : 'revés';\n  const prompt = \n    `Gere uma narração breve (2–3 frases) sobre o resultado da missão \"${questTitle}\" ` +\n    `do herói ${heroName}. Resultado: ${outcome}. ` +\n    (rewardSummary ? `Recompensas: ${rewardSummary}. ` : '') +\n    (consequence ? `Consequências: ${consequence}. ` : '') +\n    'Realce emoção, tensão e aprendizado, sem usar aspas.';\n  return generate({ systemMessage: narratorSystem(), prompt, maxTokens: 160, temperature: 0.8 });\n}\n\nexport async function generateChapterOutline(opts: {\n  heroName?: string;\n  heroClass?: string;\n  worldHint?: string;\n  priorThreads?: string[];\n  chapters?: number;\n}): Promise<string[]> {\n  const { heroName = 'herói', heroClass = 'classe desconhecida', worldHint = 'mundo medieval fantástico', priorThreads = [], chapters = 4 } = opts;\n  const prior = priorThreads.length ? `Fios narrativos prévios: ${priorThreads.join('; ')}.` : 'Sem fios narrativos prévios.';\n  const prompt =\n    `Crie ${chapters} títulos de capítulos com uma linha de resumo cada, ` +\n    `para a jornada de ${heroName} (${heroClass}) em ${worldHint}. ${prior} ` +\n    'Cada capítulo deve ter NOME curto (3–5 palavras) e um resumo de 1 frase, mantendo continuidade simples. ' +\n    'Responda em linhas separadas no formato: Título — resumo.';\n  const text = await generate({ systemMessage: narratorSystem(), prompt, maxTokens: 300, temperature: 0.85 });\n  return text\n    .split('\\n')\n    .map(l => l.trim())\n    .filter(l => l.length);\n}\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useHeroStore } from '../store/heroStore';\nimport { dynamicMissionsAI } from '../services/dynamicMissionsAI';\nimport { generateOutcomeNarrative } from '../services/narratorAI';\nimport { resolveCombat } from '../utils/combat';\nimport BattleModal from './BattleModal';\nimport { useMonetizationStore } from '../store/monetizationStore';\nimport { seasonalThemes } from '../styles/medievalTheme';\nimport { worldStateManager } from '../utils/worldState';\nimport { rankSystem } from '../utils/rankSystem';\n\ntype StageOutcome = {\n  success: boolean;\n  narrative: string;\n  xp?: number;\n  gold?: number;\n  loot?: string;\n  combat?: {\n    enemies: string[];\n    victory: boolean;\n  };\n  rest?: { healedHp: number };\n  chest?: { isMimic: boolean; item?: string };\n};\n\n// Etapas por rank: F/E=3, D/C=4, B=5, A=6, S=7\nconst getStageCountByRank = (rank?: 'F' | 'E' | 'D' | 'C' | 'B' | 'A' | 'S') => {\n  switch (rank) {\n    case 'F':\n    case 'E':\n      return 3;\n    case 'D':\n    case 'C':\n      return 4;\n    case 'B':\n      return 5;\n    case 'A':\n      return 6;\n    case 'S':\n      return 7;\n    default:\n      return 3;\n  }\n};\n\nexport default function AIDungeonRun() {\n  const hero = useHeroStore(s => s.getSelectedHero());\n  const updateHero = useHeroStore(s => s.updateHero);\n  const gainXP = useHeroStore(s => s.gainXP);\n  const gainGold = useHeroStore(s => s.gainGold);\n  const updateDailyGoalProgress = useHeroStore(s => s.updateDailyGoalProgress);\n\n  const [stageIndex, setStageIndex] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [description, setDescription] = useState('');\n  const [choices, setChoices] = useState<Array<{ key: string; text: string; success: number }>>([]);\n  const [outcome, setOutcome] = useState<StageOutcome | null>(null);\n  const [log, setLog] = useState<string[]>([]);\n  const [battleEnemies, setBattleEnemies] = useState<Array<{ type: string; count: number; level?: number }>>([]);\n  const [showBattle, setShowBattle] = useState(false);\n  const [pendingEvent, setPendingEvent] = useState<'none' | 'combat' | 'rest' | 'chest'>('none');\n  const [pendingChoice, setPendingChoice] = useState<string>('');\n  const [pendingSuccess, setPendingSuccess] = useState<boolean>(false);\n  const [runCounted, setRunCounted] = useState(false);\n\n  const stagesTotal = useMemo(() => {\n    const currentRank = hero?.rankData?.currentRank as ('F' | 'E' | 'D' | 'C' | 'B' | 'A' | 'S') | undefined;\n    return getStageCountByRank(currentRank);\n  }, [hero?.rankData?.currentRank]);\n\n  const difficulty: 'easy' | 'medium' | 'hard' = useMemo(() => {\n    const lvl = hero?.progression.level || 1;\n    if (lvl < 4) return 'easy';\n    if (lvl < 8) return 'medium';\n    return 'hard';\n  }, [hero?.progression.level]);\n\n  const maxHp = hero?.derivedAttributes.hp || 1;\n  const currentHp = hero?.derivedAttributes.currentHp ?? maxHp;\n  const isRecovering = currentHp <= 0;\n  const { activeSeasonalTheme } = useMonetizationStore();\n  const seasonalBorder = activeSeasonalTheme ? (seasonalThemes as any)[activeSeasonalTheme]?.border || 'border-gray-700' : 'border-gray-700';\n\n  const inflightRef = useRef(false);\n\n  useEffect(() => {\n    // Gera a descrição e as opções da etapa atual via IA\n    const run = async () => {\n      if (inflightRef.current) return; // evita chamadas concorrentes\n      inflightRef.current = true;\n      setLoading(true);\n      setOutcome(null);\n      try {\n        if (!hero) return;\n        const ctx = `Masmorra IA — Etapa ${stageIndex + 1}/${stagesTotal}. Herói: ${hero.name} nível ${hero.progression.level}.`; \n        const aiMission = await dynamicMissionsAI.generateMission({ hero, missionType: 'mystery', difficulty, context: ctx });\n        setDescription(aiMission.description);\n        // Opções genéricas com chances baseadas em atributos simples do herói\n        const base = Math.min(0.85, 0.3 + (hero.derivedAttributes.power || 5) / 40);\n        const cautious = Math.min(0.95, base + 0.1);\n        const bold = Math.max(0.25, base - 0.1);\n        setChoices([\n          { key: 'Explorar', text: 'Explorar a sala e procurar pistas', success: base },\n          { key: 'Cautela', text: 'Avançar com cautela evitando armadilhas', success: cautious },\n          { key: 'Audácia', text: 'Forçar passagem correndo riscos por recompensas', success: bold },\n        ]);\n      } catch (err) {\n        // Fallback visual quando a geração da missão falhar\n        console.warn('[AIDungeonRun] Falha ao gerar missão IA, usando opções locais:', err);\n        const base = Math.min(0.85, 0.3 + (hero?.derivedAttributes.power || 5) / 40);\n        const cautious = Math.min(0.95, base + 0.1);\n        const bold = Math.max(0.25, base - 0.1);\n        setDescription(`Etapa ${stageIndex + 1}/${stagesTotal}: A sala está silenciosa, com marcas de batalha recentes nas paredes.`);\n        setChoices([\n          { key: 'Explorar', text: 'Vasculhar a área em busca de pistas', success: base },\n          { key: 'Cautela', text: 'Prosseguir com cuidado, evitando armadilhas', success: cautious },\n          { key: 'Audácia', text: 'Forçar passagem em busca de atalhos', success: bold },\n        ]);\n      } finally {\n        setLoading(false);\n        inflightRef.current = false;\n      }\n    };\n    run();\n  }, [stageIndex, hero?.id, difficulty, stagesTotal]);\n\n  if (!hero) {\n    return (\n      <div className=\"max-w-3xl mx-auto p-6 text-center\">\n        <h2 className=\"text-2xl font-bold mb-2\">Masmorra IA</h2>\n        <p className=\"text-gray-600\">Nenhum herói selecionado. Selecione um herói para iniciar a aventura.</p>\n      </div>\n    );\n  }\n\n  const currentRank = hero.rankData?.currentRank || rankSystem.calculateRank(hero);\n  const locked = (() => {\n    const order: Record<string, number> = { F: 0, E: 1, D: 2, C: 3, B: 4, A: 5, S: 6 };\n    return (order[String(currentRank)] || 0) < (order['D'] || 2);\n  })();\n  if (locked) {\n    return (\n      <div className=\"max-w-3xl mx-auto p-6\">\n        <div className=\"mb-4 p-4 rounded-lg bg-red-900/30 border border-red-600/40\">\n          <div className=\"text-white font-semibold\">Masmorra Infinita bloqueada</div>\n          <div className=\"text-sm text-red-200\">Requer Rank D ou superior. Avance nos treinos e missões para desbloquear.</div>\n          <div className=\"mt-2 flex gap-2\"><a href=\"/training\" className=\"px-3 py-2 rounded bg-amber-600 text-black text-xs\">Treinar</a><a href=\"/quests\" className=\"px-3 py-2 rounded bg-gray-800 text-white text-xs\">Missões</a></div>\n        </div>\n      </div>\n    );\n  }\n\n  const STAMINA_COST_PER_STAGE = 2;\n  const applyStaminaCost = (amount: number) => {\n    worldStateManager.consumeStamina(hero, amount);\n    updateHero(hero.id, { stamina: hero.stamina });\n  };\n\n  const healHero = (amount: number) => {\n    const heroId = hero.id;\n    const maxHp = hero.derivedAttributes.hp || 20;\n    const curHp = hero.derivedAttributes.currentHp ?? maxHp;\n    const healed = Math.min(maxHp, curHp + amount);\n    updateHero(heroId, { derivedAttributes: { ...hero.derivedAttributes, currentHp: healed } });\n    return healed - curHp;\n  };\n\n  const handleChoice = async (key: string, successChance: number) => {\n    if (loading) return;\n    if (isRecovering) return; // Penalidade: não pode avançar enquanto em recuperação\n    setLoading(true);\n    try {\n      applyStaminaCost(STAMINA_COST_PER_STAGE);\n\n      const roll = Math.random();\n      const success = roll < successChance;\n\n      // Decide evento desta etapa\n      let event: 'none' | 'combat' | 'rest' | 'chest' = 'none';\n      const r = Math.random();\n      if (!success) {\n        event = r < 0.7 ? 'combat' : 'chest';\n      } else {\n        if (r < 0.3) event = 'rest';\n        else if (r < 0.6) event = 'chest';\n        else event = 'none';\n      }\n\n      let stageOutcome: StageOutcome = { success, narrative: '' };\n\n      if (event === 'combat') {\n        const templates = ['Goblin', 'Esqueleto', 'Bandido'];\n        const chosen = templates[Math.floor(Math.random() * templates.length)];\n        const questEnemies = [{ type: chosen, count: 1, level: hero.progression.level }];\n        setBattleEnemies(questEnemies);\n        setPendingEvent('combat');\n        setPendingChoice(key);\n        setPendingSuccess(success);\n        setShowBattle(true);\n        setLoading(false);\n        return; // narrativa e outcome serão tratados após batalha\n      } else if (event === 'rest') {\n        const healed = healHero(Math.round((hero.derivedAttributes.hp || 20) * 0.35));\n        stageOutcome.rest = { healedHp: healed };\n        stageOutcome.xp = success ? 6 : 3;\n        gainXP(hero.id, stageOutcome.xp);\n      } else if (event === 'chest') {\n        const isMimic = Math.random() < 0.28;\n        if (isMimic) {\n          const chosen = 'Esqueleto';\n          const questEnemies = [{ type: chosen, count: 1, level: hero.progression.level }];\n          setBattleEnemies(questEnemies);\n          setPendingEvent('chest');\n          setPendingChoice(key);\n          setPendingSuccess(success);\n          setOutcome({ success, narrative: '', chest: { isMimic: true, gold: 0 } });\n          setShowBattle(true);\n          setLoading(false);\n          return;\n        } else {\n          // Nas masmorras não há pagamento de ouro\n          const items = ['Poção de Cura', 'Runas antigas', 'Talismã simples'];\n          const item = Math.random() < 0.5 ? items[Math.floor(Math.random() * items.length)] : undefined;\n          stageOutcome.chest = { isMimic: false, item };\n          stageOutcome.xp = 8;\n          gainXP(hero.id, 8);\n        }\n      } else {\n        // apenas progresso\n        stageOutcome.xp = success ? 8 : 3;\n        gainXP(hero.id, stageOutcome.xp);\n      }\n\n      const rewardSummary = `${stageOutcome.xp ? `${stageOutcome.xp} XP` : ''}`;\n      const consequence = event === 'combat' ? (stageOutcome.combat?.victory ? 'vitória em combate' : 'derrota em combate')\n        : event === 'rest' ? 'recupera forças na sala de descanso'\n        : event === 'chest' ? (stageOutcome.chest?.isMimic ? 'baú era um mímico' : 'baú com tesouros')\n        : 'progresso seguro';\n      const line = await generateOutcomeNarrative({\n        heroName: hero.name,\n        questTitle: 'Masmorra IA',\n        success: stageOutcome.success,\n        rewardSummary,\n        consequence,\n      });\n      stageOutcome.narrative = line;\n      setOutcome(stageOutcome);\n      setLog(prev => [...prev, `Etapa ${stageIndex + 1}: ${line}`]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const nextStage = () => {\n    if (stageIndex + 1 >= stagesTotal) return;\n    setStageIndex(i => i + 1);\n  };\n\n  const restart = () => {\n    setStageIndex(0);\n    setDescription('');\n    setChoices([]);\n    setOutcome(null);\n    setLog([]);\n    setRunCounted(false);\n  };\n\n  const finished = stageIndex + 1 >= stagesTotal && !!outcome;\n\n  // Ao concluir as etapas, contar como missão concluída para progresso de rank\n  useEffect(() => {\n    if (!finished || runCounted) return;\n    const store = useHeroStore.getState();\n    const current = store.heroes.find(h => h.id === hero.id);\n    if (!current) return;\n    const newStats = {\n      ...current.stats,\n      questsCompleted: (current.stats.questsCompleted || 0) + 1,\n      lastActiveAt: new Date().toISOString()\n    };\n    // Atualizar estatísticas do herói\n    store.updateHero(hero.id, { stats: newStats });\n    // Garantir rankData e atualizar progresso de rank\n    const ensuredRankData = current.rankData ?? rankSystem.initializeRankData(current);\n    const newRankData = rankSystem.updateRankData({ ...current, stats: newStats }, ensuredRankData);\n    store.updateHero(hero.id, { rankData: newRankData });\n    // Atualizar metas diárias de missão concluída\n    updateDailyGoalProgress(hero.id, 'quest-completed', 1);\n    setRunCounted(true);\n  }, [finished, runCounted, hero.id, updateDailyGoalProgress]);\n\n  return (\n    <div className=\"max-w-3xl mx-auto p-6\">\n      {locked && (\n        <div className=\"mb-4 p-4 rounded-lg bg-red-900/30 border border-red-600/40\">\n          <div className=\"text-white font-semibold\">Masmorra Infinita bloqueada</div>\n          <div className=\"text-sm text-red-200\">Requer Rank D ou superior. Avance nos treinos e missões para desbloquear.</div>\n          <div className=\"mt-2 flex gap-2\"><a href=\"/training\" className=\"px-3 py-2 rounded bg-amber-600 text-black text-xs\">Treinar</a><a href=\"/quests\" className=\"px-3 py-2 rounded bg-gray-800 text-white text-xs\">Missões</a></div>\n        </div>\n      )}\n      <h2 className=\"text-2xl font-bold text-white\">Masmorra IA</h2>\n      <p className=\"text-gray-300\">Etapa {stageIndex + 1} de {stagesTotal} • Dificuldade: {difficulty}</p>\n      <div className={`mt-4 p-4 border rounded bg-gray-800 ${seasonalBorder}`}>\n        <p className=\"text-gray-200 whitespace-pre-line\">{description}</p>\n        <div className=\"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-2\">\n          {choices.map(ch => (\n            <button\n              key={ch.key}\n              onClick={() => handleChoice(ch.key, ch.success)}\n              className=\"border border-gray-700 bg-gray-700 text-gray-100 px-3 py-2 rounded hover:bg-gray-600 disabled:opacity-50\"\n              disabled={loading || !!outcome || showBattle}\n            >\n              <div className=\"font-medium text-white\">{ch.key}</div>\n              <div className=\"text-sm text-gray-200\">{ch.text}</div>\n              <div className=\"text-xs text-gray-300\">Sucesso ~{Math.round(ch.success * 100)}%</div>\n            </button>\n          ))}\n        </div>\n\n        {outcome && (\n          <div className=\"mt-4 p-3 bg-gray-700 rounded\">\n            <div className=\"text-lg font-semibold text-white\">Resultado: {outcome.success ? 'Sucesso' : 'Falha'}</div>\n            <p className=\"mt-1 text-gray-200\">{outcome.narrative}</p>\n            {outcome.rest && (\n              <div className=\"mt-2 text-sm text-gray-300\">Sala de descanso: +{outcome.rest.healedHp} HP</div>\n            )}\n            {outcome.chest && (\n              <div className=\"mt-2 text-sm text-gray-300\">{outcome.chest.isMimic ? 'Era um Mímico!' : `Baú encontrado`} {outcome.chest.item ? `• Item: ${outcome.chest.item}` : ''}</div>\n            )}\n            {outcome.combat && (\n              <div className=\"mt-2 text-sm text-gray-300\">Combate contra {outcome.combat.enemies.join(', ')} — {outcome.combat.victory ? 'Vitória' : 'Derrota'}</div>\n            )}\n            {outcome.xp && (\n              <div className=\"mt-1 text-xs text-gray-300\">Recompensas: {outcome.xp} XP</div>\n            )}\n            <div className=\"mt-3 flex gap-2\">\n              {!finished && (\n                <button onClick={nextStage} className=\"px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700\">Prosseguir</button>\n              )}\n              {finished && (\n                <button onClick={restart} className=\"px-3 py-2 rounded bg-blue-600 text-white hover:bg-blue-700\">Reiniciar masmorra</button>\n              )}\n            </div>\n          </div>\n        )}\n\n        <div className=\"mt-6\">\n          <h3 className=\"text-white font-semibold\">Registro</h3>\n          <ul className=\"mt-2 text-sm text-gray-300 list-disc pl-5\">\n            {log.map((l, i) => <li key={i}>{l}</li>)}\n          </ul>\n        </div>\n      </div>\n      {showBattle && battleEnemies.length > 0 && (\n        <BattleModal\n          hero={hero}\n          enemies={battleEnemies as any}\n          floor={stageIndex + 1}\n          partyRarityBonusPercent={0}\n          onClose={() => setShowBattle(false)}\n          onResult={(res) => {\n            // aplicar recompensas e narrativa pós-batalha\n            gainXP(hero.id, res.xpGained || 0);\n\n            // Aplicar dano ao HP atual e verificar morte (recuperação)\n            const curHp = hero.derivedAttributes.currentHp ?? (hero.derivedAttributes.hp || 0);\n            const newHp = Math.max(0, curHp - (res.damage || 0));\n            updateHero(hero.id, { derivedAttributes: { ...hero.derivedAttributes, currentHp: newHp } });\n\n            const victory = res.victory;\n            const rewardSummary = `${res.xpGained || 0} XP`;\n            const consequence = pendingEvent === 'combat' ? (victory ? 'vitória em combate' : 'derrota em combate') : 'baú era um mímico';\n\n            generateOutcomeNarrative({\n              heroName: hero.name,\n              questTitle: 'Masmorra IA',\n              success: pendingSuccess || victory,\n              rewardSummary,\n              consequence,\n            }).then(line => {\n              const updated: StageOutcome = {\n                success: pendingSuccess || victory,\n                narrative: line,\n                xp: (outcome?.xp || 0) + (res.xpGained || 0),\n                combat: { enemies: battleEnemies.map(e => e.type), victory },\n                rest: outcome?.rest,\n                chest: outcome?.chest || (pendingEvent === 'chest' ? { isMimic: true } : undefined),\n              };\n              setOutcome(updated);\n              setLog(prev => [...prev, `Etapa ${stageIndex + 1}: ${line}`]);\n              if (newHp <= 0) {\n                setLog(prev => [...prev, `⚠️ ${hero.name} caiu na masmorra e está em recuperação. Aguarde a regeneração de vida.`]);\n              }\n              setShowBattle(false);\n              setBattleEnemies([]);\n              setPendingEvent('none');\n              setPendingChoice('');\n              setPendingSuccess(false);\n            });\n          }}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport AIDungeonRun from './AIDungeonRun';\n\nexport default function MissionsHub() {\n\n  return (\n    <div className=\"max-w-full md:max-w-6xl mx-auto px-3 md:px-6\">\n      <div className=\"mb-4 md:mb-6\">\n        <h1 className=\"text-xl md:text-2xl font-bold text-amber-300\">Jogar</h1>\n        <p className=\"text-xs sm:text-sm text-gray-300\">Modo de masmorra por etapas com decisões e batalhas.</p>\n      </div>\n\n      <div className=\"rounded-lg bg-gray-800 p-3 md:p-4\">\n        <AIDungeonRun />\n      </div>\n    </div>\n  );\n}\n"],"names":["generate","params","maxTokens","temperature","aiService","_a","resp","_b","text","error","narratorSystem","generateOutcomeNarrative","opts","heroName","questTitle","success","consequence","rewardSummary","prompt","getStageCountByRank","rank","AIDungeonRun","hero","useHeroStore","s","updateHero","gainXP","updateDailyGoalProgress","stageIndex","setStageIndex","useState","loading","setLoading","description","setDescription","choices","setChoices","outcome","setOutcome","log","setLog","battleEnemies","setBattleEnemies","showBattle","setShowBattle","pendingEvent","setPendingEvent","pendingChoice","setPendingChoice","pendingSuccess","setPendingSuccess","runCounted","setRunCounted","stagesTotal","useMemo","currentRank","difficulty","lvl","maxHp","isRecovering","activeSeasonalTheme","useMonetizationStore","seasonalBorder","seasonalThemes","inflightRef","useRef","useEffect","ctx","aiMission","dynamicMissionsAI","base","cautious","bold","err","jsxs","jsx","_c","rankSystem","locked","order","STAMINA_COST_PER_STAGE","applyStaminaCost","amount","worldStateManager","healHero","heroId","curHp","healed","handleChoice","key","successChance","event","r","stageOutcome","templates","questEnemies","items","item","line","prev","nextStage","i","restart","finished","store","current","h","newStats","ensuredRankData","newRankData","ch","l","BattleModal","res","newHp","victory","updated","e","MissionsHub"],"mappings":"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"}