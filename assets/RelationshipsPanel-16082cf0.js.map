{"version":3,"file":"RelationshipsPanel-16082cf0.js","sources":["../../src/components/RelationshipsPanel.tsx"],"sourcesContent":["import React, { useMemo, useState } from 'react';\nimport { useHeroStore } from '../store/heroStore';\nimport { tokens } from '../styles/designTokens';\nimport { computeTier } from '../utils/relationshipSystem';\n\nconst RelationshipsPanel: React.FC = () => {\n  const { heroes, getSelectedHero } = useHeroStore();\n  const hero = getSelectedHero();\n  const [filter, setFilter] = useState<'todos' | 'conhecido' | 'amigo' | 'melhor_amigo'>('todos');\n  if (!hero) return null;\n  const statusById = hero.npcMemory?.friendStatusByHeroId || {};\n  const list = useMemo(() => {\n    const relMap = hero.socialRelations || {};\n    const npcIds = heroes.filter(h => h.origin === 'npc').map(h => h.id);\n    const ids = Array.from(new Set([ ...npcIds, ...Object.keys(statusById), ...Object.keys(relMap) ]));\n    return ids\n      .map(id => {\n        const npc = heroes.find(h => h.id === id);\n        const rel = relMap[id] || (npc?.socialRelations || {})[hero.id] || 0;\n        const status = statusById[id] ?? computeTier(rel);\n        return { id, status, rel, name: npc?.name || 'NPC', npc };\n      })\n      .filter(r => filter === 'todos' || r.status === filter);\n  }, [statusById, filter, heroes, hero.id, hero.socialRelations]);\n\n  const friends = hero.friends || [];\n  const bestFriends = hero.bestFriends || [];\n  return (\n    <div className={`${tokens.cardBase} border border-gray-700`}>\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-2xl font-bold\">ü§ù Rela√ß√µes</h2>\n        <select value={filter} onChange={(e) => setFilter(e.target.value as any)} className=\"px-2 py-1 border rounded text-sm bg-gray-900 text-gray-200 border-gray-700\">\n          <option value=\"todos\">Todos</option>\n          <option value=\"conhecido\">Conhecidos</option>\n          <option value=\"amigo\">Amigos</option>\n          <option value=\"melhor_amigo\">Melhores Amigos</option>\n        </select>\n      </div>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n        {list.map(r => (\n          <div key={r.id} className=\"p-3 rounded border bg-gray-900 border-gray-700\">\n            <div className=\"font-semibold flex items-center gap-2\">{r.name} <span className=\"text-xs bg-gray-700 text-gray-200 px-2 py-0.5 rounded\">NPC</span></div>\n            <div className=\"text-sm text-gray-300\">Status: {r.status.replace('_',' ')} ‚Ä¢ Rela√ß√£o: {r.rel}</div>\n            <div className=\"text-xs text-gray-400\">Contato recente: {hero.npcMemory?.lastContactByHeroId?.[r.id] ? new Date(hero.npcMemory!.lastContactByHeroId![r.id]).toLocaleString() : '‚Äî'}</div>\n            <div className=\"mt-2 text-xs text-gray-400\">Amigo: {friends.includes(r.id) ? 'Sim' : 'N√£o'} ‚Ä¢ Melhor amigo: {bestFriends.includes(r.id) ? 'Sim' : 'N√£o'}</div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default RelationshipsPanel;"],"names":["RelationshipsPanel","heroes","getSelectedHero","useHeroStore","hero","filter","setFilter","useState","statusById","_a","list","useMemo","relMap","npcIds","h","id","npc","rel","status","computeTier","r","friends","bestFriends","tokens","jsxs","jsx","e","_b"],"mappings":"gOAKA,MAAMA,EAA+B,IAAM,OACzC,KAAM,CAAE,OAAAC,EAAQ,gBAAAC,CAAgB,EAAIC,EAAa,EAC3CC,EAAOF,IACP,CAACG,EAAQC,CAAS,EAAIC,WAA2D,OAAO,EAC9F,GAAI,CAACH,EAAa,OAAA,KAClB,MAAMI,IAAaC,EAAAL,EAAK,YAAL,YAAAK,EAAgB,uBAAwB,CAAA,EACrDC,EAAOC,EAAAA,QAAQ,IAAM,CACnB,MAAAC,EAASR,EAAK,iBAAmB,GACjCS,EAASZ,EAAO,OAAYa,GAAAA,EAAE,SAAW,KAAK,EAAE,IAASA,GAAAA,EAAE,EAAE,EAE5D,OADK,MAAM,SAAS,IAAI,CAAE,GAAGD,EAAQ,GAAG,OAAO,KAAKL,CAAU,EAAG,GAAG,OAAO,KAAKI,CAAM,CAAE,CAAC,CAAC,EAE9F,IAAUG,GAAA,CACT,MAAMC,EAAMf,EAAO,KAAUa,GAAAA,EAAE,KAAOC,CAAE,EAClCE,EAAML,EAAOG,CAAE,KAAMC,GAAA,YAAAA,EAAK,kBAAmB,IAAIZ,EAAK,EAAE,GAAK,EAC7Dc,EAASV,EAAWO,CAAE,GAAKI,EAAYF,CAAG,EACzC,MAAA,CAAE,GAAAF,EAAI,OAAAG,EAAQ,IAAAD,EAAK,MAAMD,GAAA,YAAAA,EAAK,OAAQ,MAAO,IAAAA,EAAI,CACzD,EACA,OAAOI,GAAKf,IAAW,SAAWe,EAAE,SAAWf,CAAM,CAAA,EACvD,CAACG,EAAYH,EAAQJ,EAAQG,EAAK,GAAIA,EAAK,eAAe,CAAC,EAExDiB,EAAUjB,EAAK,SAAW,GAC1BkB,EAAclB,EAAK,aAAe,GACxC,cACG,MAAI,CAAA,UAAW,GAAGmB,EAAO,QAAQ,0BAChC,SAAA,CAACC,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,qBAAqB,SAAW,cAAA,EAC7CD,EAAA,KAAA,SAAA,CAAO,MAAOnB,EAAQ,SAAWqB,GAAMpB,EAAUoB,EAAE,OAAO,KAAY,EAAG,UAAU,6EAClF,SAAA,CAACD,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAK,QAAA,EAC1BA,EAAA,IAAA,SAAA,CAAO,MAAM,YAAY,SAAU,aAAA,EACnCA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAM,SAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,eAAe,SAAe,kBAAA,CAAA,EAC9C,CAAA,EACF,EACAA,EAAA,IAAC,MAAI,CAAA,UAAU,wCACZ,SAAAf,EAAK,IACJU,GAAA,SAAAI,OAAAA,EAAA,KAAC,MAAe,CAAA,UAAU,iDACxB,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCAAyC,SAAA,CAAEJ,EAAA,KAAK,IAAEK,EAAA,IAAA,OAAA,CAAK,UAAU,wDAAwD,SAAG,MAAA,CAAA,EAAO,EAClJD,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,WAASJ,EAAE,OAAO,QAAQ,IAAI,GAAG,EAAE,eAAaA,EAAE,GAAA,EAAI,EAC7FI,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,qBAAkBG,GAAAlB,EAAAL,EAAK,YAAL,YAAAK,EAAgB,sBAAhB,MAAAkB,EAAsCP,EAAE,IAAM,IAAI,KAAKhB,EAAK,UAAW,oBAAqBgB,EAAE,EAAE,CAAC,EAAE,iBAAmB,GAAA,EAAI,EACnLI,EAAAA,KAAC,MAAI,CAAA,UAAU,6BAA6B,SAAA,CAAA,UAAQH,EAAQ,SAASD,EAAE,EAAE,EAAI,MAAQ,MAAM,oBAAkBE,EAAY,SAASF,EAAE,EAAE,EAAI,MAAQ,KAAA,EAAM,CAJhJ,CAAA,EAAAA,EAAE,EAKZ,EACD,EACH,CACF,CAAA,CAAA,CAEJ"}