import{j as e}from"./motion-3c015c26.js";import{r as x}from"./vendor-374d307f.js";import{u as b,F as N,D as v}from"./index-324810f8.js";import"./router-6c8d423a.js";import"./supabase-4349ac75.js";import"./icons-5fe8db7b.js";const I=()=>{var c;const{heroes:n,getSelectedHero:g}=b(),t=g(),[a,p]=x.useState("todos");if(!t)return null;const d=((c=t.npcMemory)==null?void 0:c.friendStatusByHeroId)||{},u=x.useMemo(()=>{const s=t.socialRelations||{},i=n.filter(o=>o.origin==="npc").map(o=>o.id);return Array.from(new Set([...i,...Object.keys(d),...Object.keys(s)])).map(o=>{const r=n.find(f=>f.id===o),m=s[o]||((r==null?void 0:r.socialRelations)||{})[t.id]||0,j=d[o]??N(m);return{id:o,status:j,rel:m,name:(r==null?void 0:r.name)||"NPC",npc:r}}).filter(o=>a==="todos"||o.status===a)},[d,a,n,t.id,t.socialRelations]),h=t.friends||[],y=t.bestFriends||[];return e.jsxs("div",{className:`${v.cardBase} border border-gray-700`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"ðŸ¤ RelaÃ§Ãµes"}),e.jsxs("select",{value:a,onChange:s=>p(s.target.value),className:"px-2 py-1 border rounded text-sm bg-gray-900 text-gray-200 border-gray-700",children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"conhecido",children:"Conhecidos"}),e.jsx("option",{value:"amigo",children:"Amigos"}),e.jsx("option",{value:"melhor_amigo",children:"Melhores Amigos"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.map(s=>{var i,l;return e.jsxs("div",{className:"p-3 rounded border bg-gray-900 border-gray-700",children:[e.jsxs("div",{className:"font-semibold flex items-center gap-2",children:[s.name," ",e.jsx("span",{className:"text-xs bg-gray-700 text-gray-200 px-2 py-0.5 rounded",children:"NPC"})]}),e.jsxs("div",{className:"text-sm text-gray-300",children:["Status: ",s.status.replace("_"," ")," â€¢ RelaÃ§Ã£o: ",s.rel]}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Contato recente: ",(l=(i=t.npcMemory)==null?void 0:i.lastContactByHeroId)!=null&&l[s.id]?new Date(t.npcMemory.lastContactByHeroId[s.id]).toLocaleString():"â€”"]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Amigo: ",h.includes(s.id)?"Sim":"NÃ£o"," â€¢ Melhor amigo: ",y.includes(s.id)?"Sim":"NÃ£o"]})]},s.id)})})]})};export{I as default};
//# sourceMappingURL=RelationshipsPanel-16082cf0.js.map
