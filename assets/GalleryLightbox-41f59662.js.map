{"version":3,"file":"GalleryLightbox-41f59662.js","sources":["../../src/components/GalleryLightbox.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Hero } from '../types/hero';\nimport { X, ChevronLeft, ChevronRight, ZoomIn, ZoomOut, Maximize2 } from 'lucide-react';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface GalleryLightboxProps {\n  items: Hero[];\n  index: number;\n  onClose: () => void;\n  onNavigate: (newIndex: number) => void;\n}\n\nconst GalleryLightbox: React.FC<GalleryLightboxProps> = ({ items, index, onClose, onNavigate }) => {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const prevFocusRef = useRef<Element | null>(null);\n  const [scale, setScale] = useState(1);\n  const [startX, setStartX] = useState<number | null>(null);\n  const [startY, setStartY] = useState<number | null>(null);\n  const [error, setError] = useState(false);\n  const [panning, setPanning] = useState(false);\n  const [offsetX, setOffsetX] = useState(0);\n  const [offsetY, setOffsetY] = useState(0);\n\n  const current = items[index];\n\n  useEffect(() => {\n    const onKey = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') onClose();\n      if (e.key === 'ArrowLeft') onNavigate(Math.max(0, index - 1));\n      if (e.key === 'ArrowRight') onNavigate(Math.min(items.length - 1, index + 1));\n    };\n    window.addEventListener('keydown', onKey);\n    return () => window.removeEventListener('keydown', onKey);\n  }, [index, items.length, onClose, onNavigate]);\n\n  useEffect(() => {\n    setScale(1);\n    setError(false);\n  }, [index]);\n\n  useEffect(() => {\n    prevFocusRef.current = document.activeElement;\n    setTimeout(() => containerRef.current?.focus(), 0);\n    return () => {\n      const el = prevFocusRef.current as HTMLElement | null;\n      if (el && typeof el.focus === 'function') el.focus();\n    };\n  }, []);\n\n  useEffect(() => {\n    const preload = (h?: Hero) => {\n      if (!h || !h.image) return;\n      const url = h.image.includes('image.pollinations.ai/prompt/')\n        ? h.image.replace('https://image.pollinations.ai/prompt/', '/api/pollinations-image?prompt=').replace('?n=1&','&')\n        : h.image;\n      const img = new Image();\n      img.src = url;\n    };\n    preload(items[index - 1]);\n    preload(items[index + 1]);\n  }, [index, items]);\n\n  const requestFs = () => {\n    const el = containerRef.current;\n    if (el && el.requestFullscreen) el.requestFullscreen().catch(() => {});\n  };\n\n  const onPointerDown = (e: React.PointerEvent) => {\n    setStartX(e.clientX);\n    setStartY(e.clientY);\n    if (scale > 1) setPanning(true);\n  };\n  const onPointerUp = (e: React.PointerEvent) => {\n    if (startX === null) return;\n    if (!panning) {\n      const dx = e.clientX - startX;\n      if (dx > 50) onNavigate(Math.max(0, index - 1));\n      if (dx < -50) onNavigate(Math.min(items.length - 1, index + 1));\n    }\n    setStartX(null);\n    setStartY(null);\n    setPanning(false);\n  };\n  const onPointerMove = (e: React.PointerEvent) => {\n    if (!panning || startX === null || startY === null) return;\n    const dx = e.clientX - startX;\n    const dy = e.clientY - startY;\n    const maxX = 300;\n    const maxY = 300;\n    setOffsetX(Math.max(-maxX, Math.min(maxX, dx)));\n    setOffsetY(Math.max(-maxY, Math.min(maxY, dy)));\n  };\n\n  const onWheel: React.WheelEventHandler = (e) => {\n    if (e.ctrlKey || e.shiftKey || e.altKey) return;\n    const delta = e.deltaY > 0 ? -0.1 : 0.1;\n    setScale(s => Math.max(1, Math.min(3, s + delta)));\n  };\n\n  const onDoubleClick = () => {\n    setScale(s => (s > 1 ? 1 : 2));\n    if (scale <= 1) { setOffsetX(0); setOffsetY(0); }\n  };\n\n  return (\n    <div\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-label=\"VisualizaÃ§Ã£o em tela cheia\"\n      className=\"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm flex flex-col\"\n    >\n      <div className=\"flex items-center justify-between p-3 text-white\">\n        <div className=\"flex items-center gap-2\">\n          <button aria-label=\"Fechar\" onClick={onClose} className=\"p-2 rounded hover:bg-white/10\">\n            <X className=\"w-5 h-5\" />\n          </button>\n          <button aria-label=\"Zoom in\" onClick={() => setScale(s => Math.min(3, s + 0.25))} className=\"p-2 rounded hover:bg-white/10\">\n            <ZoomIn className=\"w-5 h-5\" />\n          </button>\n          <button aria-label=\"Zoom out\" onClick={() => setScale(s => Math.max(1, s - 0.25))} className=\"p-2 rounded hover:bg-white/10\">\n            <ZoomOut className=\"w-5 h-5\" />\n          </button>\n          <button aria-label=\"Tela cheia\" onClick={requestFs} className=\"p-2 rounded hover:bg-white/10\">\n            <Maximize2 className=\"w-5 h-5\" />\n          </button>\n        </div>\n        <div className=\"text-sm\">{index + 1} / {items.length}</div>\n      </div>\n\n      <div\n        ref={containerRef}\n        className=\"flex-1 relative overflow-hidden\"\n        onPointerDown={onPointerDown}\n        onPointerUp={onPointerUp}\n        onPointerMove={onPointerMove}\n        onWheel={onWheel}\n        onDoubleClick={onDoubleClick}\n        tabIndex={-1}\n        onKeyDown={(e) => {\n          if (e.key === 'Tab') {\n            const root = containerRef.current;\n            if (!root) return;\n            const nodes = Array.from(root.querySelectorAll('button')) as HTMLElement[];\n            if (!nodes.length) return;\n            const active = document.activeElement as HTMLElement | null;\n            let i = nodes.findIndex(n => n === active);\n            if (e.shiftKey) i = i <= 0 ? nodes.length - 1 : i - 1;\n            else i = i >= nodes.length - 1 ? 0 : i + 1;\n            nodes[i]?.focus();\n            e.preventDefault();\n          }\n        }}\n      >\n        <AnimatePresence initial={false} mode=\"popLayout\">\n          <motion.div\n            key={current?.id}\n            initial={{ opacity: 0, scale: 0.98 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.98 }}\n            transition={{ duration: 0.2 }}\n            className=\"absolute inset-0 flex items-center justify-center\"\n          >\n            {current?.image && !error ? (\n              <img\n                src={current.image.includes('image.pollinations.ai/prompt/')\n                  ? current.image\n                      .replace('https://image.pollinations.ai/prompt/', '/api/pollinations-image?prompt=')\n                      .replace('?n=1&', '&')\n                  : current.image}\n                alt={current.name}\n                className=\"max-h-full max-w-full object-contain\"\n                style={{ transform: `translate3d(${offsetX}px, ${offsetY}px, 0) scale(${scale})` }}\n                loading=\"lazy\"\n                decoding=\"async\"\n                onError={() => setError(true)}\n              />\n            ) : (\n              <div className=\"text-white text-6xl\">ðŸ¦¸</div>\n            )}\n            {error && (\n              <div className=\"absolute bottom-4 left-4 right-4 text-center text-red-300 text-sm\">Falha ao carregar a imagem</div>\n            )}\n          </motion.div>\n        </AnimatePresence>\n      </div>\n\n      <div className=\"p-3 flex items-center justify-between text-white\">\n        <button aria-label=\"Anterior\" onClick={() => onNavigate(Math.max(0, index - 1))} className=\"p-2 rounded hover:bg-white/10\">\n          <ChevronLeft className=\"w-6 h-6\" />\n        </button>\n        <div className=\"flex items-center gap-2 overflow-x-auto\">\n          {items.slice(Math.max(0, index - 3), Math.min(items.length, index + 4)).map((h) => (\n            <button\n              key={h.id}\n              aria-label={h.name}\n              onClick={() => onNavigate(items.findIndex(x => x.id === h.id))}\n              className={`w-16 h-16 rounded border ${h.id === current?.id ? 'border-yellow-400' : 'border-white/20'} overflow-hidden flex-shrink-0`}\n            >\n              {h.image ? (\n                <img src={h.image.includes('image.pollinations.ai/prompt/')\n                  ? h.image.replace('https://image.pollinations.ai/prompt/', '/api/pollinations-image?prompt=').replace('?n=1&','&')\n                  : h.image} alt={h.name} className=\"w-full h-full object-cover\" loading=\"lazy\" decoding=\"async\" />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center\">ðŸ¦¸</div>\n              )}\n            </button>\n          ))}\n        </div>\n        <button aria-label=\"PrÃ³ximo\" onClick={() => onNavigate(Math.min(items.length - 1, index + 1))} className=\"p-2 rounded hover:bg-white/10\">\n          <ChevronRight className=\"w-6 h-6\" />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default GalleryLightbox;"],"names":["GalleryLightbox","items","index","onClose","onNavigate","containerRef","useRef","prevFocusRef","scale","setScale","useState","startX","setStartX","startY","setStartY","error","setError","panning","setPanning","offsetX","setOffsetX","offsetY","setOffsetY","current","useEffect","onKey","e","_a","el","preload","h","url","img","requestFs","onPointerDown","onPointerUp","dx","onPointerMove","dy","maxX","maxY","onWheel","delta","s","onDoubleClick","jsxs","jsx","X","ZoomIn","ZoomOut","Maximize2","root","nodes","active","i","n","AnimatePresence","motion","ChevronLeft","x","ChevronRight"],"mappings":"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"}