var $o=Object.defineProperty;var Io=(t,e,a)=>e in t?$o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var F=(t,e,a)=>(Io(t,typeof e!="symbol"?e+"":e,a),a);import{r as j,a as Vo,g as Lo,b as Qt}from"./vendor-280e31ee.js";import{u as Si,L as q,O as Fo,a as Wt,b as qo,R as Oo,c as Q,B as Bo}from"./router-c9842250.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=a(i);fetch(i.href,n)}})();var Ai={exports:{}},Xt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ho=j,Go=Symbol.for("react.element"),_o=Symbol.for("react.fragment"),zo=Object.prototype.hasOwnProperty,Uo=Ho.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qo={key:!0,ref:!0,__self:!0,__source:!0};function Ti(t,e,a){var r,i={},n=null,o=null;a!==void 0&&(n=""+a),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zo.call(e,r)&&!Qo.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Go,type:t,key:n,ref:o,props:i,_owner:Uo.current}}Xt.Fragment=_o;Xt.jsx=Ti;Xt.jsxs=Ti;Ai.exports=Xt;var s=Ai.exports,Ns={},Oa=Vo;Ns.createRoot=Oa.createRoot,Ns.hydrateRoot=Oa.hydrateRoot;const Ba=t=>{let e;const a=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const u=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),a.forEach(x=>x(e,u))}},i=()=>e,c={setState:r,getState:i,getInitialState:()=>m,subscribe:d=>(a.add(d),()=>a.delete(d)),destroy:()=>{a.clear()}},m=e=t(r,i,c);return c},Wo=t=>t?Ba(t):Ba;var Pi={exports:{}},Ei={},Mi={exports:{}},Ri={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe=j;function Xo(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ko=typeof Object.is=="function"?Object.is:Xo,Yo=Qe.useState,Jo=Qe.useEffect,Zo=Qe.useLayoutEffect,el=Qe.useDebugValue;function tl(t,e){var a=e(),r=Yo({inst:{value:a,getSnapshot:e}}),i=r[0].inst,n=r[1];return Zo(function(){i.value=a,i.getSnapshot=e,ts(i)&&n({inst:i})},[t,a,e]),Jo(function(){return ts(i)&&n({inst:i}),t(function(){ts(i)&&n({inst:i})})},[t]),el(a),a}function ts(t){var e=t.getSnapshot;t=t.value;try{var a=e();return!Ko(t,a)}catch{return!0}}function sl(t,e){return e()}var al=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sl:tl;Ri.useSyncExternalStore=Qe.useSyncExternalStore!==void 0?Qe.useSyncExternalStore:al;Mi.exports=Ri;var rl=Mi.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=j,il=rl;function nl(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ol=typeof Object.is=="function"?Object.is:nl,ll=il.useSyncExternalStore,cl=Kt.useRef,dl=Kt.useEffect,ml=Kt.useMemo,ul=Kt.useDebugValue;Ei.useSyncExternalStoreWithSelector=function(t,e,a,r,i){var n=cl(null);if(n.current===null){var o={hasValue:!1,value:null};n.current=o}else o=n.current;n=ml(function(){function c(u){if(!m){if(m=!0,d=u,u=r(u),i!==void 0&&o.hasValue){var x=o.value;if(i(x,u))return h=x}return h=u}if(x=h,ol(d,u))return x;var g=r(u);return i!==void 0&&i(x,g)?(d=u,x):(d=u,h=g)}var m=!1,d,h,p=a===void 0?null:a;return[function(){return c(e())},p===null?void 0:function(){return c(p())}]},[e,a,r,i]);var l=ll(t,n[0],n[1]);return dl(function(){o.hasValue=!0,o.value=l},[l]),ul(l),l};Pi.exports=Ei;var pl=Pi.exports;const hl=Lo(pl),{useDebugValue:xl}=Qt,{useSyncExternalStoreWithSelector:gl}=hl;const fl=t=>t;function bl(t,e=fl,a){const r=gl(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,a);return xl(r),r}const Ha=t=>{const e=typeof t=="function"?Wo(t):t,a=(r,i)=>bl(e,r,i);return Object.assign(a,e),a},vl=t=>t?Ha(t):Ha;function yl(t,e){let a;try{a=t()}catch{return}return{getItem:i=>{var n;const o=c=>c===null?null:JSON.parse(c,e==null?void 0:e.reviver),l=(n=a.getItem(i))!=null?n:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,n)=>a.setItem(i,JSON.stringify(n,e==null?void 0:e.replacer)),removeItem:i=>a.removeItem(i)}}const dt=t=>e=>{try{const a=t(e);return a instanceof Promise?a:{then(r){return dt(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return dt(r)(a)}}}},jl=(t,e)=>(a,r,i)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,v)=>({...v,...b}),...e},o=!1;const l=new Set,c=new Set;let m;try{m=n.getStorage()}catch{}if(!m)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),a(...b)},r,i);const d=dt(n.serialize),h=()=>{const b=n.partialize({...r()});let v;const w=d({state:b,version:n.version}).then(y=>m.setItem(n.name,y)).catch(y=>{v=y});if(v)throw v;return w},p=i.setState;i.setState=(b,v)=>{p(b,v),h()};const u=t((...b)=>{a(...b),h()},r,i);let x;const g=()=>{var b;if(!m)return;o=!1,l.forEach(w=>w(r()));const v=((b=n.onRehydrateStorage)==null?void 0:b.call(n,r()))||void 0;return dt(m.getItem.bind(m))(n.name).then(w=>{if(w)return n.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==n.version){if(n.migrate)return n.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var y;return x=n.merge(w,(y=r())!=null?y:u),a(x,!0),h()}).then(()=>{v==null||v(x,void 0),o=!0,c.forEach(w=>w(x))}).catch(w=>{v==null||v(void 0,w)})};return i.persist={setOptions:b=>{n={...n,...b},b.getStorage&&(m=b.getStorage())},clearStorage:()=>{m==null||m.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:b=>(l.add(b),()=>{l.delete(b)}),onFinishHydration:b=>(c.add(b),()=>{c.delete(b)})},g(),x||u},Nl=(t,e)=>(a,r,i)=>{let n={storage:yl(()=>localStorage),partialize:g=>g,version:0,merge:(g,b)=>({...b,...g}),...e},o=!1;const l=new Set,c=new Set;let m=n.storage;if(!m)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),a(...g)},r,i);const d=()=>{const g=n.partialize({...r()});return m.setItem(n.name,{state:g,version:n.version})},h=i.setState;i.setState=(g,b)=>{h(g,b),d()};const p=t((...g)=>{a(...g),d()},r,i);i.getInitialState=()=>p;let u;const x=()=>{var g,b;if(!m)return;o=!1,l.forEach(w=>{var y;return w((y=r())!=null?y:p)});const v=((b=n.onRehydrateStorage)==null?void 0:b.call(n,(g=r())!=null?g:p))||void 0;return dt(m.getItem.bind(m))(n.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==n.version){if(n.migrate)return[!0,n.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var y;const[S,C]=w;if(u=n.merge(C,(y=r())!=null?y:p),a(u,!0),S)return d()}).then(()=>{v==null||v(u,void 0),u=r(),o=!0,c.forEach(w=>w(u))}).catch(w=>{v==null||v(void 0,w)})};return i.persist={setOptions:g=>{n={...n,...g},g.storage&&(m=g.storage)},clearStorage:()=>{m==null||m.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:g=>(l.add(g),()=>{l.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},n.skipHydration||x(),u||p},wl=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?jl(t,e):Nl(t,e),Cl=wl;let Nt;const kl=new Uint8Array(16);function Sl(){if(!Nt&&(Nt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Nt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Nt(kl)}const Y=[];for(let t=0;t<256;++t)Y.push((t+256).toString(16).slice(1));function Al(t,e=0){return Y[t[e+0]]+Y[t[e+1]]+Y[t[e+2]]+Y[t[e+3]]+"-"+Y[t[e+4]]+Y[t[e+5]]+"-"+Y[t[e+6]]+Y[t[e+7]]+"-"+Y[t[e+8]]+Y[t[e+9]]+"-"+Y[t[e+10]]+Y[t[e+11]]+Y[t[e+12]]+Y[t[e+13]]+Y[t[e+14]]+Y[t[e+15]]}const Tl=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ga={randomUUID:Tl};function _a(t,e,a){if(Ga.randomUUID&&!e&&!t)return Ga.randomUUID();t=t||{};const r=t.random||(t.rng||Sl)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){a=a||0;for(let i=0;i<16;++i)e[a+i]=r[i];return e}return Al(r)}const Pl=[{id:"contrato-entrega",titleTemplate:"Entrega para {location}",descriptionTemplate:"Leve esta {item} para {npc} em {location}. Cuidado com {threat} no caminho.",type:"contrato",baseReward:{gold:30,xp:20},modifiers:["neblina","bandidos","tempo-ruim"]},{id:"contrato-escolta",titleTemplate:"Escolta de {npc}",descriptionTemplate:"Proteja {npc} durante a viagem até {location}. Há relatos de {threat} na região.",type:"contrato",baseReward:{gold:50,xp:35},enemies:[{type:"Bandido",count:2}]},{id:"caca-lobos",titleTemplate:"Perigo na {location}",descriptionTemplate:"Uma matilha de {enemy} está aterrorizando {location}. Derrote {count} deles.",type:"caca",baseReward:{gold:40,xp:30},enemies:[{type:"Lobo",count:3}]},{id:"caca-goblins",titleTemplate:"Invasão Goblin",descriptionTemplate:"Goblins estão saqueando {location}. Elimine {count} invasores.",type:"caca",baseReward:{gold:60,xp:45},enemies:[{type:"Goblin",count:4}]},{id:"exploracao-artefato",titleTemplate:"Artefato Perdido",descriptionTemplate:"Encontre o {artifact} perdido nas {location}. Dizem que está guardado por {guardian}.",type:"exploracao",baseReward:{gold:80,xp:60,items:[{id:"pocao-media",qty:1}]},enemies:[{type:"Esqueleto",count:2}]},{id:"exploracao-mapa",titleTemplate:"Mapeamento de {location}",descriptionTemplate:"Explore e mapeie a região de {location}. Registre pontos de interesse e perigos.",type:"exploracao",baseReward:{gold:70,xp:50}},{id:"historia-misterio",titleTemplate:"Mistério em {location}",descriptionTemplate:"Estranhos eventos ocorrem em {location}. Investigue e descubra a verdade.",type:"historia",baseReward:{gold:100,xp:80,items:[{id:"pergaminho-xp",qty:1}]}}],El=["Vila do Vale","Bosque Sombrio","Montanhas Geladas","Pântano Negro","Ruínas Antigas","Porto dos Ventos","Cavernas Profundas","Torre Abandonada","Floresta Encantada","Deserto Ardente","Cidade Perdida","Cemitério Assombrado"],Ml=["Mercador Aldric","Sábia Elara","Ferreiro Gorin","Curandeira Mira","Capitão Theron","Escriba Lysander","Caçador Kael","Bruxa Morgana"],Rl=["carta importante","poção rara","mapa antigo","gema preciosa","pergaminho mágico","relíquia sagrada","chave misteriosa","amuleto protetor"],Dl=["Orbe de Cristal","Espada Élfica","Anel dos Antigos","Cajado do Poder","Escudo Sagrado","Coroa Perdida","Livro dos Segredos","Cálice Dourado"],$l=["bandidos","lobos famintos","espíritos inquietos","goblins selvagens","trolls das montanhas","serpentes venenosas","mortos-vivos","dragões jovens"],Il=["um golem de pedra","esqueletos guerreiros","um troll antigo","espíritos guardiões","uma hidra menor","gárgulas de pedra"],ea={rapida:{goldMultiplier:.7,xpMultiplier:.8,enemyCountMultiplier:.7,timeLimit:30},padrao:{goldMultiplier:1,xpMultiplier:1,enemyCountMultiplier:1,timeLimit:60},epica:{goldMultiplier:1.5,xpMultiplier:1.8,enemyCountMultiplier:1.4,timeLimit:120}};function Ae(t){return t[Math.floor(Math.random()*t.length)]}function za(t,e){return t.replace(/\{(\w+)\}/g,(a,r)=>e[r]||a)}function Vl(t,e){const a=ea[e];return{gold:Math.floor(t.gold*a.goldMultiplier),xp:Math.floor(t.xp*a.xpMultiplier),items:t.items}}function Ll(t=[],e){const a=ea[e];return t.map(r=>({...r,count:Math.max(1,Math.floor(r.count*a.enemyCountMultiplier)),level:e==="rapida"?1:e==="padrao"?2:3}))}function je(t="padrao",e=1,a=!1){var d,h,p,u;const r=Ae(Pl),i=ea[t],n={location:Ae(El),npc:Ae(Ml),item:Ae(Rl),artifact:Ae(Dl),threat:Ae($l),guardian:Ae(Il),enemy:((h=(d=r.enemies)==null?void 0:d[0])==null?void 0:h.type)||"Inimigo",count:((u=(p=r.enemies)==null?void 0:p[0])==null?void 0:u.count.toString())||"1"},o=`quest-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l=Vl(r.baseReward,t),c=r.enemies?Ll(r.enemies,t):void 0,m={id:o,title:za(r.titleTemplate,n),description:za(r.descriptionTemplate,n),type:r.type,difficulty:t,levelRequirement:Math.max(1,e-1),timeLimit:i.timeLimit,enemies:c,rewards:l,repeatable:r.type==="caca"||r.type==="contrato",isGuildQuest:a,failurePenalty:t==="epica"?{gold:20,reputation:-5}:void 0};return a&&console.log("🏰 Missão de guilda gerada:",m.title,"- Dificuldade:",t),m}function Fl(t=1,e=0){console.log("🎯 generateQuestBoard chamada:",{heroLevel:t,guildLevel:e});const a=[];a.push(je("rapida",t)),a.push(je("rapida",t)),a.push(je("padrao",t)),a.push(je("padrao",t)),a.push(je("padrao",t)),a.push(je("epica",t)),console.log("🏰 Verificando missões de guilda - guildLevel:",e),e>0?(console.log("✅ Gerando missão de guilda padrão"),a.push(je("padrao",t,!0)),e>=3&&(console.log("✅ Gerando missão de guilda épica"),a.push(je("epica",t,!0)))):console.log("❌ Nenhuma missão de guilda gerada - guildLevel é 0");const r=a.filter(i=>i.isGuildQuest);return console.log("📋 Missões geradas:",{total:a.length,guildQuests:r.length,guildQuestTitles:r.map(i=>i.title)}),a}const Di=[{id:"primeira-missao",title:"Primeira Missão",description:"Complete sua primeira missão",icon:"🎯",maxProgress:1},{id:"heroi-da-vila",title:"Herói da Vila",description:"Complete 10 missões",icon:"🏆",maxProgress:10},{id:"cacador-experiente",title:"Caçador Experiente",description:"Complete 5 missões de caça",icon:"🏹",maxProgress:5},{id:"explorador-corajoso",title:"Explorador Corajoso",description:"Complete 3 missões de exploração",icon:"🗺️",maxProgress:3},{id:"lenda-epica",title:"Lenda Épica",description:"Complete uma missão épica",icon:"⚔️",maxProgress:1}],ta={fire:{name:"Fogo",icon:"🔥",color:"#FF4500",description:"Elemento do poder e destruição. Forte contra Gelo, fraco contra Terra."},ice:{name:"Gelo",icon:"❄️",color:"#00BFFF",description:"Elemento do controle e preservação. Forte contra Trovão, fraco contra Fogo."},thunder:{name:"Trovão",icon:"⚡",color:"#FFD700",description:"Elemento da velocidade e energia. Forte contra Terra, fraco contra Gelo."},earth:{name:"Terra",icon:"🌍",color:"#8B4513",description:"Elemento da resistência e estabilidade. Forte contra Fogo, fraco contra Trovão."},light:{name:"Luz",icon:"✨",color:"#FFFF00",description:"Elemento da pureza e cura. Forte contra Sombra, mas também vulnerável a ela."},dark:{name:"Sombra",icon:"🌑",color:"#4B0082",description:"Elemento do mistério e poder oculto. Forte contra Luz, mas também vulnerável a ela."},physical:{name:"Físico",icon:"⚔️",color:"#808080",description:"Elemento neutro sem vantagens ou desvantagens elementais."}};function ql(){const t=["fire","ice","thunder","earth","light","dark"];return t[Math.floor(Math.random()*t.length)]}const Ol={Lobo:{hp:25,forca:6,destreza:8,constituicao:5,inteligencia:2,sabedoria:6,carisma:3,armor:1,weapon:{name:"Presas",atk:4,critChance:.1}},Goblin:{hp:20,forca:4,destreza:9,constituicao:4,inteligencia:5,sabedoria:4,carisma:2,armor:2,weapon:{name:"Adaga Enferrujada",atk:3,critChance:.15}},Bandido:{hp:35,forca:7,destreza:6,constituicao:6,inteligencia:4,sabedoria:5,carisma:4,armor:3,weapon:{name:"Espada Curta",atk:5,critChance:.08}},Esqueleto:{hp:30,forca:5,destreza:7,constituicao:8,inteligencia:3,sabedoria:4,carisma:1,armor:2,weapon:{name:"Espada Antiga",atk:4,critChance:.05}},Troll:{hp:80,forca:12,destreza:3,constituicao:10,inteligencia:2,sabedoria:3,carisma:2,armor:4,weapon:{name:"Clava Gigante",atk:8,critChance:.12}}},Bl={Lobo:{items:[{id:"pele-lobo",name:"Pele de Lobo",description:"Material para crafting",type:"consumable",rarity:"comum",price:15},{id:"pocao-pequena",name:"Poção de Cura Pequena",description:"Restaura 20 HP",type:"consumable",rarity:"comum",price:25,effects:{hp:20}}],dropRates:[.6,.3]},Goblin:{items:[{id:"moeda-goblin",name:"Moeda Goblin",description:"Moeda de valor duvidoso",type:"consumable",rarity:"comum",price:10},{id:"adaga-ferro",name:"Adaga de Ferro",description:"+2 Força",type:"weapon",rarity:"comum",price:50,bonus:{forca:2}}],dropRates:[.7,.2]},Bandido:{items:[{id:"espada-ferro",name:"Espada de Ferro",description:"+3 Força",type:"weapon",rarity:"raro",price:100,bonus:{forca:3}},{id:"armadura-couro",name:"Armadura de Couro",description:"+2 Constituição",type:"armor",rarity:"comum",price:75,bonus:{constituicao:2}}],dropRates:[.25,.4]},Esqueleto:{items:[{id:"osso-antigo",name:"Osso Antigo",description:"Material mágico",type:"consumable",rarity:"raro",price:30},{id:"pergaminho-xp",name:"Pergaminho de Experiência",description:"+50 XP",type:"consumable",rarity:"raro",price:80,effects:{duration:0}}],dropRates:[.5,.2]}};function ws(t,e=1){const a=Ol[t];if(!a)throw new Error(`Tipo de inimigo desconhecido: ${t}`);const r=1+(e-1)*.3;return{name:t,hp:Math.floor((a.hp||20)*r),maxHp:Math.floor((a.hp||20)*r),forca:Math.floor((a.forca||5)*r),destreza:Math.floor((a.destreza||5)*r),constituicao:Math.floor((a.constituicao||5)*r),inteligencia:a.inteligencia||3,sabedoria:a.sabedoria||3,carisma:a.carisma||3,armor:Math.floor((a.armor||0)*r),weapon:a.weapon}}function $i(t){const e=t.derivedAttributes.currentHp||t.derivedAttributes.hp;return{name:t.name,hp:e,maxHp:t.derivedAttributes.hp,forca:t.attributes.forca,destreza:t.attributes.destreza,constituicao:t.attributes.constituicao,inteligencia:t.attributes.inteligencia,sabedoria:t.attributes.sabedoria,carisma:t.attributes.carisma,armor:t.derivedAttributes.armorClass,weapon:{name:"Arma Básica",atk:2,critChance:.05}}}function wt(t,e){var n,o,l;const a=50+(t.destreza-e.destreza)*3,r=Math.max(5,Math.min(95,a));if(Math.floor(Math.random()*100)+1<=r){const c=((n=t.weapon)==null?void 0:n.atk)||0,m=t.forca+c,d=((o=t.weapon)==null?void 0:o.critChance)||.05,h=Math.random()<d,p=Math.max(1,Math.floor(m*(h?1.5:1)-e.armor));e.hp=Math.max(0,e.hp-p);const u=((l=t.weapon)==null?void 0:l.name)||"punhos",x=h?" CRÍTICO!":"";return{hit:!0,damage:p,crit:h,message:`${t.name} ataca com ${u} e causa ${p} de dano${x}`}}else return{hit:!1,damage:0,crit:!1,message:`${t.name} erra o ataque!`}}function Ii(t){const e=Bl[t];if(!e)return[];const a=[];return e.items.forEach((r,i)=>{const n=e.dropRates[i]||0;Math.random()<n&&a.push(r)}),a}function Vi(t,e){const a=t.maxHp+t.forca+t.destreza,r=Math.max(1,t.maxHp/20)-e,i=r>=0?1+r*.2:Math.max(.5,1+r*.1);return Math.floor(a*i)}function Li(t){return Math.floor((t.maxHp+t.forca)*.8)+Math.floor(Math.random()*10)}function Hl(t,e){const a=[];let r=0,i=0,n=[];const o=$i(t);a.push(`${o.name} entra em combate!`);for(const l of e)for(let c=0;c<l.count;c++){const m=ws(l.type,l.level||1);a.push(`
--- Enfrentando ${m.name} ---`);let d=1;for(;o.hp>0&&m.hp>0&&d<=10;){if(o.destreza>=m.destreza){const p=wt(o,m);if(a.push(`Turno ${d}: ${p.message}`),m.hp>0){const u=wt(m,o);a.push(`${u.message}`)}}else{const p=wt(m,o);if(a.push(`Turno ${d}: ${p.message}`),o.hp>0){const u=wt(o,m);a.push(`${u.message}`)}}d++}if(o.hp<=0)return a.push(`${o.name} foi derrotado!`),{victory:!1,damage:o.maxHp-o.hp,xpGained:0,goldGained:0,itemsGained:[],log:a};if(m.hp<=0){a.push(`${m.name} foi derrotado!`);const h=Vi(m,t.progression.level),p=Li(m),u=Ii(l.type);r+=h,i+=p,n.push(...u),a.push(`Recompensas: +${h} XP, +${p} ouro`),u.length>0&&a.push(`Itens encontrados: ${u.map(x=>x.name).join(", ")}`)}else a.push(`Combate inconclusivo - ${m.name} foge!`)}return a.push(`
=== VITÓRIA! ===`),a.push(`Total: +${r} XP, +${i} ouro`),{victory:!0,damage:o.maxHp-o.hp,xpGained:r,goldGained:i,itemsGained:n,log:a}}function Gl(t,e,a=!1){const r=$i(t);let i=r.forca+r.destreza+r.constituicao,n=0;e.forEach(u=>{const x=ws(u.type,u.level||1);n+=(x.forca+x.destreza+x.constituicao)*u.count});let o=0;a&&(o=t.progression.level*30+40,console.log(`🏰 Bônus de guilda aplicado: +${o} poder`));const l=i+o-n,m=Math.max(25,Math.min(95,(a?75:50)+l*2));console.log(`⚔️ Poder do herói: ${i} + ${o} = ${i+o}`),console.log(`👹 Poder dos inimigos: ${n}`),console.log(`🎲 Chance de vitória: ${m.toFixed(1)}%`);const d=Math.random()*100<m,p=((u,x,g)=>{const b=[],v=x.map(w=>`${w.count} ${w.type}${w.count>1?"s":""}`).join(", ");return b.push(`⚔️ ${g.name} enfrenta ${v} em combate!`),a&&b.push(`🏰 O poder da guilda fortalece ${g.name} na batalha!`),u?(b.push(`💪 ${g.name} luta com bravura e determinação!`),b.push("⚡ Seus golpes encontram o alvo com precisão mortal!"),x.forEach(w=>{w.count===1?b.push(`🗡️ O ${w.type} é derrotado após uma batalha intensa!`):b.push(`🗡️ Os ${w.count} ${w.type}s são derrotados um por um!`)}),b.push(`🎉 Vitória! ${g.name} emerge triunfante do combate!`)):(b.push(`😰 ${g.name} luta corajosamente, mas os inimigos são muito poderosos!`),b.push(`💥 Após uma batalha feroz, ${g.name} é forçado a recuar!`),b.push(`🩹 Ferido mas vivo, ${g.name} aprende com a derrota...`)),b})(d,e,t);if(d){let u=0,x=0,g=[];return e.forEach(b=>{for(let v=0;v<b.count;v++){const w=ws(b.type,b.level||1);u+=Vi(w,t.progression.level),x+=Li(w),g.push(...Ii(b.type))}}),p.push(`💰 Recompensas: ${u} XP, ${x} moedas de ouro`),g.length>0&&p.push(`🎒 Itens encontrados: ${g.map(b=>b.name).join(", ")}`),{victory:!0,damage:Math.floor(Math.random()*10),xpGained:u,goldGained:x,itemsGained:g,log:p}}else{const u=Math.floor(r.maxHp*.3);return p.push(`💔 ${t.name} sofre ${u} pontos de dano na derrota`),{victory:!1,damage:u,xpGained:0,goldGained:0,itemsGained:[],log:p}}}const ee=[{id:"pocao-pequena",name:"Poção de Cura Pequena",description:"Restaura 20 HP instantaneamente",type:"consumable",rarity:"comum",price:25,icon:"🧪",effects:{hp:20}},{id:"pocao-media",name:"Poção de Cura Média",description:"Restaura 50 HP instantaneamente",type:"consumable",rarity:"raro",price:60,icon:"🧪",effects:{hp:50}},{id:"pocao-grande",name:"Poção de Cura Grande",description:"Restaura 100 HP instantaneamente",type:"consumable",rarity:"epico",price:150,icon:"🧪",effects:{hp:100}},{id:"pocao-mana",name:"Poção de Mana",description:"Restaura 30 MP instantaneamente",type:"consumable",rarity:"comum",price:30,icon:"🔮",effects:{mp:30}},{id:"pergaminho-xp",name:"Pergaminho de Experiência",description:"Concede 50 XP de bônus",type:"consumable",rarity:"raro",price:80,icon:"📜",effects:{duration:0}},{id:"elixir-forca",name:"Elixir de Força",description:"+2 Força por 60 minutos",type:"consumable",rarity:"raro",price:100,icon:"💪",bonus:{forca:2},effects:{duration:60}},{id:"espada-ferro",name:"Espada de Ferro",description:"Uma espada confiável de ferro forjado. +3 Força",type:"weapon",rarity:"comum",price:100,icon:"⚔️",bonus:{forca:3}},{id:"espada-aco",name:"Espada de Aço",description:"Lâmina afiada de aço temperado. +5 Força",type:"weapon",rarity:"raro",price:250,icon:"🗡️",bonus:{forca:5}},{id:"adaga-sombras",name:"Adaga das Sombras",description:"Lâmina élfica encantada. +3 Destreza, +2 Força",type:"weapon",rarity:"epico",price:400,icon:"🗡️",bonus:{destreza:3,forca:2}},{id:"cajado-sabio",name:"Cajado do Sábio",description:"Cajado mágico antigo. +4 Inteligência, +2 Sabedoria",type:"weapon",rarity:"epico",price:450,icon:"🪄",bonus:{inteligencia:4,sabedoria:2}},{id:"arco-madeira",name:"Arco de Madeira",description:"Arco simples de madeira resistente. +2 Destreza",type:"weapon",rarity:"comum",price:80,icon:"🏹",bonus:{destreza:2}},{id:"arco-composto",name:"Arco Composto",description:"Arco avançado com maior alcance. +4 Destreza, +1 Força",type:"weapon",rarity:"raro",price:220,icon:"🏹",bonus:{destreza:4,forca:1}},{id:"arco-elfico",name:"Arco Élfico Encantado",description:"Arco élfico com runas mágicas. +5 Destreza, +2 Sabedoria",type:"weapon",rarity:"epico",price:480,icon:"🏹",bonus:{destreza:5,sabedoria:2}},{id:"besta-pesada",name:"Besta Pesada",description:"Besta de guerra com grande poder. +3 Força, +3 Destreza",type:"weapon",rarity:"raro",price:320,icon:"🏹",bonus:{forca:3,destreza:3}},{id:"armadura-couro",name:"Armadura de Couro",description:"Proteção básica de couro curtido. +2 Constituição",type:"armor",rarity:"comum",price:75,icon:"🦺",bonus:{constituicao:2}},{id:"armadura-cota",name:"Cota de Malha",description:"Armadura de anéis entrelaçados. +4 Constituição",type:"armor",rarity:"raro",price:200,icon:"🛡️",bonus:{constituicao:4}},{id:"armadura-placas",name:"Armadura de Placas",description:"Proteção máxima em placas de aço. +6 Constituição, -1 Destreza",type:"armor",rarity:"epico",price:500,icon:"🛡️",bonus:{constituicao:6,destreza:-1}},{id:"armadura-couro-tachas",name:"Armadura de Couro com Tachas",description:"Couro reforçado com tachas metálicas. +3 Constituição, +1 Destreza",type:"armor",rarity:"raro",price:180,icon:"🦺",bonus:{constituicao:3,destreza:1}},{id:"gibao-elfico",name:"Gibão Élfico",description:"Armadura élfica leve e flexível. +2 Constituição, +3 Destreza",type:"armor",rarity:"epico",price:420,icon:"🦺",bonus:{constituicao:2,destreza:3}},{id:"anel-forca",name:"Anel da Força",description:"Anel mágico que aumenta a força física. +2 Força",type:"accessory",rarity:"raro",price:150,icon:"💍",bonus:{forca:2}},{id:"amuleto-sabedoria",name:"Amuleto da Sabedoria",description:"Amuleto élfico que clareia a mente. +3 Sabedoria",type:"accessory",rarity:"raro",price:180,icon:"🔮",bonus:{sabedoria:3}},{id:"colar-carisma",name:"Colar do Carisma",description:"Joia encantada que aumenta o charme. +3 Carisma",type:"accessory",rarity:"epico",price:300,icon:"📿",bonus:{carisma:3}},{id:"aljava-encantada",name:"Aljava Encantada",description:"Aljava mágica que melhora a precisão. +2 Destreza, +1 Sabedoria",type:"accessory",rarity:"raro",price:200,icon:"🏹",bonus:{destreza:2,sabedoria:1}},{id:"bracadeira-arqueiro",name:"Braçadeira do Arqueiro",description:"Proteção para o braço que saca a corda. +3 Destreza",type:"accessory",rarity:"raro",price:160,icon:"🛡️",bonus:{destreza:3}},{id:"anel-precisao",name:"Anel da Precisão",description:"Anel que aprimora a mira. +2 Destreza, +1 Inteligência",type:"accessory",rarity:"epico",price:280,icon:"💍",bonus:{destreza:2,inteligencia:1}},{id:"capa-vermelha",name:"Capa Vermelha",description:"Capa elegante de cor carmesim. Puramente cosmética.",type:"cosmetic",rarity:"comum",price:50,icon:"🧥"},{id:"coroa-ouro",name:"Coroa de Ouro",description:"Coroa dourada para verdadeiros líderes. Cosmética.",type:"cosmetic",rarity:"lendario",price:1e3,icon:"👑"},{id:"mascara-sombras",name:"Máscara das Sombras",description:"Máscara misteriosa para heróis discretos. Cosmética.",type:"cosmetic",rarity:"epico",price:200,icon:"🎭"}],Ua={consumables:{name:"Consumíveis",icon:"🧪",items:ee.filter(t=>t.type==="consumable")},weapons:{name:"Armas",icon:"⚔️",items:ee.filter(t=>t.type==="weapon")},armor:{name:"Armaduras",icon:"🛡️",items:ee.filter(t=>t.type==="armor")},accessories:{name:"Acessórios",icon:"💍",items:ee.filter(t=>t.type==="accessory")},cosmetics:{name:"Cosméticos",icon:"👑",items:ee.filter(t=>t.type==="cosmetic")}},_l={comum:{color:"#9CA3AF",bgColor:"#F3F4F6",multiplier:1},raro:{color:"#3B82F6",bgColor:"#EFF6FF",multiplier:1.5},epico:{color:"#8B5CF6",bgColor:"#F5F3FF",multiplier:2},lendario:{color:"#F59E0B",bgColor:"#FFFBEB",multiplier:3}};function Fi(t,e){return t.progression.gold>=e.price}function qi(t,e){const a=ee.find(r=>r.id===e);return a?Fi(t,a)?a.type!=="consumable"&&(t.inventory.items[e]||0)>0&&(a.type==="weapon"||a.type==="armor"||a.type==="accessory")?{success:!1,message:"Você já possui este equipamento!"}:{success:!0,message:`${a.name} comprado com sucesso!`,newGold:t.progression.gold-a.price,item:a}:{success:!1,message:`Ouro insuficiente! Você precisa de ${a.price} ouro, mas tem apenas ${t.progression.gold}.`}:{success:!1,message:"Item não encontrado na loja!"}}function zl(t,e,a=1){const r=ee.find(o=>o.id===e),i=t.inventory.items[e]||0;if(!r)return{success:!1,message:"Item não encontrado!"};if(i<a)return{success:!1,message:`Você não possui ${a}x ${r.name}!`};const n=Math.floor(r.price*.6*a);return{success:!0,message:`${a}x ${r.name} vendido por ${n} ouro!`,newGold:t.progression.gold+n,item:r}}function Ul(t,e){const a=ee.find(l=>l.id===e),r=(t.inventory.items[e]||0)>0;if(!a||!r)return{success:!1,message:"Você não possui este item!"};if(a.type==="consumable"||a.type==="cosmetic")return{success:!1,message:"Este item não pode ser equipado!"};let i,n;switch(a.type){case"weapon":i=t.inventory.equippedWeapon,n="arma";break;case"armor":i=t.inventory.equippedArmor,n="armadura";break;case"accessory":i=t.inventory.equippedAccessory,n="acessório";break;default:return{success:!1,message:"Tipo de item inválido!"}}let o=`${a.name} equipado como ${n}!`;if(i){const l=ee.find(c=>c.id===i);o+=` ${l==null?void 0:l.name} foi desequipado.`}return{success:!0,message:o}}function Ql(t,e){var o,l;const a=ee.find(c=>c.id===e),r=(t.inventory.items[e]||0)>0;if(!a||!r)return{success:!1,message:"Você não possui este item!"};if(a.type!=="consumable")return{success:!1,message:"Este item não pode ser usado!"};let i=`${a.name} usado!`;const n={};if((o=a.effects)!=null&&o.hp){const c=t.derivedAttributes.currentHp||t.derivedAttributes.hp,m=Math.min(t.derivedAttributes.hp,c+a.effects.hp);n.hp=m,i+=` +${a.effects.hp} HP`}if((l=a.effects)!=null&&l.mp){const c=t.derivedAttributes.currentMp||t.derivedAttributes.mp,m=Math.min(t.derivedAttributes.mp,c+a.effects.mp);n.mp=m,i+=` +${a.effects.mp} MP`}return a.id==="pergaminho-xp"&&(n.xp=50,i+=" +50 XP"),{success:!0,message:i,effects:n}}function Wl(){const e=new Date().toDateString().split("").reduce((n,o)=>n+o.charCodeAt(0),0),a=()=>{const n=Math.sin(e)*1e4;return n-Math.floor(n)},r=[],i=ee.filter(n=>n.rarity!=="lendario");for(let n=0;n<3;n++){const o=Math.floor(a()*i.length),l={...i[o]};l.price=Math.floor(l.price*.8),r.push(l)}return r}function Xl(t){return t>=1e3?.15:t>=500?.1:t>=200?.05:0}function Kl(t,e){const a=Xl(e.progression.reputation);return Math.floor(t.price*(1-a))}const Qa=[{name:"Desprezado",threshold:-1e3,color:"text-red-500",description:"Você é visto como um inimigo desta facção",questModifiers:{goldBonus:-.5,xpBonus:-.3,specialQuestsUnlocked:[]}},{name:"Hostil",threshold:-500,color:"text-red-400",description:"Esta facção não confia em você",questModifiers:{goldBonus:-.3,xpBonus:-.2,specialQuestsUnlocked:[]}},{name:"Desconfiado",threshold:-100,color:"text-orange-400",description:"Você é visto com suspeita",questModifiers:{goldBonus:-.1,xpBonus:0,specialQuestsUnlocked:[]}},{name:"Neutro",threshold:0,color:"text-gray-400",description:"Você não tem reputação especial",questModifiers:{goldBonus:0,xpBonus:0,specialQuestsUnlocked:[]}},{name:"Amigável",threshold:100,color:"text-green-400",description:"Esta facção gosta de você",questModifiers:{goldBonus:.1,xpBonus:.1,specialQuestsUnlocked:["friendly_merchant","guild_favor"]}},{name:"Respeitado",threshold:500,color:"text-blue-400",description:"Você é respeitado por esta facção",questModifiers:{goldBonus:.25,xpBonus:.2,specialQuestsUnlocked:["elite_missions","faction_secrets"]}},{name:"Reverenciado",threshold:1e3,color:"text-purple-400",description:"Você é uma lenda para esta facção",questModifiers:{goldBonus:.5,xpBonus:.3,specialQuestsUnlocked:["legendary_quests","faction_champion"]}}],Oi={"Guarda da Cidade":{description:"Defensores da ordem e da lei nas cidades",opposingFactions:["Ladrões","Cultistas"],allyFactions:["Comerciantes","Clero"]},Comerciantes:{description:"Mercadores e artesãos que movem a economia",opposingFactions:["Ladrões"],allyFactions:["Guarda da Cidade"]},Ladrões:{description:"Organizações criminosas das sombras",opposingFactions:["Guarda da Cidade","Clero"],allyFactions:["Cultistas"]},Clero:{description:"Servos dos deuses e da luz divina",opposingFactions:["Cultistas","Ladrões"],allyFactions:["Guarda da Cidade"]},Cultistas:{description:"Adoradores de entidades sombrias",opposingFactions:["Clero","Guarda da Cidade"],allyFactions:["Ladrões"]},Exploradores:{description:"Aventureiros que desbravam terras desconhecidas",opposingFactions:[],allyFactions:[]}};function Cs(t){return[...Qa].reverse().find(a=>t>=a.threshold)||Qa[0]}function Yl(t,e,a){const r=(t.reputationFactions||[]).map(i=>{if(i.name===e){const n=Math.max(-1e3,Math.min(1e3,i.reputation+a)),o=Oi[e];return o&&a>0&&o.opposingFactions.forEach(l=>{const c=(t.reputationFactions||[]).findIndex(m=>m.name===l);c!==-1&&((t.reputationFactions||[])[c].reputation=Math.max(-1e3,(t.reputationFactions||[])[c].reputation-Math.floor(a*.3)))}),{...i,reputation:n}}return i});return{...t,reputationFactions:r}}function Jl(t,e){const a=(t.reputationFactions||[]).find(i=>i.name===e);return a?Cs(a.reputation).questModifiers:{goldBonus:0,xpBonus:0}}function Zl(t){const e=[];if(t.completedQuests.length>0){const a=t.completedQuests[t.completedQuests.length-1];a.type==="combat"&&e.push({factionName:"Guarda da Cidade",change:10,reason:"Eliminou ameaças à cidade"}),a.difficulty==="legendary"&&e.push({factionName:"Exploradores",change:25,reason:"Completou uma missão lendária"})}return e}const qt=[{id:"xp",name:"Experiência Total",description:"Heróis com mais experiência acumulada",type:"xp",icon:"⭐",color:"text-yellow-400",getValue:t=>{var e;return((e=t.progression)==null?void 0:e.experience)||0},formatValue:t=>`${(t||0).toLocaleString()} XP`},{id:"level",name:"Nível Mais Alto",description:"Heróis com o maior nível alcançado",type:"xp",icon:"🏆",color:"text-amber-400",getValue:t=>{var e;return((e=t.progression)==null?void 0:e.level)||0},formatValue:t=>`Nível ${t||0}`},{id:"gold",name:"Riqueza",description:"Heróis com mais ouro acumulado",type:"gold",icon:"💰",color:"text-yellow-500",getValue:t=>{var e;return((e=t.progression)==null?void 0:e.gold)||0},formatValue:t=>`${(t||0).toLocaleString()} 🪙`},{id:"quests",name:"Missões Completadas",description:"Heróis que completaram mais missões",type:"quests",icon:"📜",color:"text-blue-400",getValue:t=>(t.completedQuests||[]).length,formatValue:t=>`${t||0} missões`},{id:"achievements",name:"Conquistas",description:"Heróis com mais conquistas desbloqueadas",type:"achievements",icon:"🏅",color:"text-purple-400",getValue:t=>(t.achievements||[]).filter(e=>e.unlockedAt).length,formatValue:t=>`${t||0} conquistas`},{id:"reputation",name:"Reputação Total",description:"Heróis com melhor reputação geral",type:"reputation",icon:"⭐",color:"text-green-400",getValue:t=>(t.reputationFactions||[]).reduce((e,a)=>e+Math.max(0,a.reputation),0),formatValue:t=>`${t||0} pontos`},{id:"playtime",name:"Tempo de Jogo",description:"Heróis com mais tempo jogado",type:"playtime",icon:"⏰",color:"text-indigo-400",getValue:t=>{var e;return((e=t.stats)==null?void 0:e.totalPlayTime)||0},formatValue:t=>{const e=t||0;return`${Math.floor(e/60)}h ${e%60}m`}}];function Bi(t,e,a=50){const r=t.filter(i=>i.progression.level>0).map(i=>{const n=e.getValue(i),o=typeof n=="number"&&!isNaN(n)?n:0;return{heroId:i.id,heroName:i.name,heroClass:i.class,heroRace:i.race,value:o,rank:0,change:0,lastUpdated:new Date}}).sort((i,n)=>n.value-i.value).slice(0,a);return r.forEach((i,n)=>{i.rank=n+1}),{id:e.id,name:e.name,description:e.description,type:e.type,entries:r,lastUpdated:new Date}}function sa(t){return qt.map(e=>Bi(t,e))}function Hi(t,e){const r=sa(e).find(m=>m.id==="xp"),i=(r==null?void 0:r.entries.findIndex(m=>m.heroId===t.id))+1||0,n=e.filter(m=>m.class===t.class),l=Bi(n,qt[0]).entries.findIndex(m=>m.heroId===t.id)+1||0,c=Gi(t);return{globalRank:i,classRank:l,weeklyRank:0,achievements:(t.achievements||[]).filter(m=>m.unlockedAt).length,totalScore:c}}function Gi(t){const e={level:100,xp:.1,gold:.01,quests:50,achievements:25,reputation:1};return Math.floor(t.progression.level*e.level+t.progression.experience*e.xp+t.progression.gold*e.gold+(t.completedQuests||[]).length*e.quests+(t.achievements||[]).filter(a=>a.unlockedAt).length*e.achievements+(t.reputationFactions||[]).reduce((a,r)=>a+Math.max(0,r.reputation),0)*e.reputation)}function ec(t,e=10){return t.entries.slice(0,e)}function tc(t,e,a=5){const r=t.entries.findIndex(o=>o.heroId===e);if(r===-1)return[];const i=Math.max(0,r-a),n=Math.min(t.entries.length,r+a+1);return t.entries.slice(i,n)}function sc(t){return t>0?`↗️ +${t}`:t<0?`↘️ ${t}`:"➡️ 0"}function ac(t){return t===1?"text-yellow-400":t===2?"text-gray-300":t===3?"text-orange-400":t<=10?"text-purple-400":t<=50?"text-blue-400":"text-gray-400"}function rc(t){return t===1?"🥇":t===2?"🥈":t===3?"🥉":t<=10?"🏆":t<=50?"⭐":"📊"}function Wa(t){const e=[];e.push(t);const a=["Aragorn","Legolas","Gimli","Gandalf","Boromir","Frodo","Sam","Merry","Pippin","Faramir"],r=["warrior","mage","rogue","paladin","ranger"],i=["human","elf","dwarf","halfling","orc"];for(let n=0;n<20;n++){const o={id:`mock-${n}`,name:a[n%a.length]+` ${n+1}`,race:i[Math.floor(Math.random()*i.length)],class:r[Math.floor(Math.random()*r.length)],alignment:"neutral",attributes:{strength:10,dexterity:10,constitution:10,intelligence:10,wisdom:10,charisma:10},progression:{level:Math.floor(Math.random()*20)+1,experience:Math.floor(Math.random()*1e4),gold:Math.floor(Math.random()*5e3),health:100,maxHealth:100,stamina:100,maxStamina:100},inventory:[],equipment:{},activeQuests:[],completedQuests:Array(Math.floor(Math.random()*50)).fill(null).map((l,c)=>({id:`quest-${c}`,title:`Missão ${c+1}`,description:"Missão completada",type:"combat",difficulty:"normal",rewards:{xp:100,gold:50},requirements:{},isCompleted:!0})),stats:{totalPlayTime:Math.floor(Math.random()*1e3),loginStreak:Math.floor(Math.random()*30),lastLogin:new Date},titles:[],activeTitle:void 0,reputationFactions:[{name:"Guarda da Cidade",reputation:Math.floor(Math.random()*2e3)-1e3},{name:"Comerciantes",reputation:Math.floor(Math.random()*2e3)-1e3},{name:"Ladrões",reputation:Math.floor(Math.random()*2e3)-1e3}],dailyGoals:[],achievements:[],createdAt:new Date,updatedAt:new Date};e.push(o)}return e}const ks=[{id:"complete-quest",name:"Aventureiro Ativo",description:"Complete 1 missão",category:"exploration",maxProgress:1,baseRewards:{xp:50,gold:25},difficulty:"easy",levelRequirement:1},{id:"gain-xp",name:"Crescimento Constante",description:"Ganhe 100 XP",category:"progression",maxProgress:100,baseRewards:{xp:25,gold:15},difficulty:"easy",levelRequirement:1},{id:"earn-gold",name:"Coletor de Moedas",description:"Ganhe 50 moedas de ouro",category:"collection",maxProgress:50,baseRewards:{xp:30,gold:20},difficulty:"easy",levelRequirement:1},{id:"train-attribute",name:"Fortalecimento",description:"Treine qualquer atributo 1 vez",category:"progression",maxProgress:1,baseRewards:{xp:40,gold:30},difficulty:"easy",levelRequirement:1},{id:"complete-multiple-quests",name:"Herói Dedicado",description:"Complete 3 missões",category:"exploration",maxProgress:3,baseRewards:{xp:100,gold:75},difficulty:"medium",levelRequirement:3},{id:"defeat-enemies",name:"Caçador de Monstros",description:"Derrote 5 inimigos",category:"combat",maxProgress:5,baseRewards:{xp:80,gold:60},difficulty:"medium",levelRequirement:3},{id:"gain-large-xp",name:"Sede de Conhecimento",description:"Ganhe 300 XP",category:"progression",maxProgress:300,baseRewards:{xp:75,gold:50},difficulty:"medium",levelRequirement:3},{id:"social-interaction",name:"Diplomata",description:"Interaja com 3 NPCs diferentes",category:"social",maxProgress:3,baseRewards:{xp:60,gold:40},difficulty:"medium",levelRequirement:3},{id:"epic-quest",name:"Lenda em Formação",description:"Complete 1 missão épica",category:"exploration",maxProgress:1,baseRewards:{xp:200,gold:150},difficulty:"hard",levelRequirement:5},{id:"level-up",name:"Evolução",description:"Suba 1 nível",category:"progression",maxProgress:1,baseRewards:{xp:100,gold:100},difficulty:"hard",levelRequirement:5},{id:"reputation-gain",name:"Construtor de Reputação",description:"Ganhe 50 pontos de reputação",category:"social",maxProgress:50,baseRewards:{xp:120,gold:80},difficulty:"hard",levelRequirement:5},{id:"perfect-day",name:"Dia Perfeito",description:"Complete todas as outras metas diárias",category:"progression",maxProgress:1,baseRewards:{xp:300,gold:200},difficulty:"hard",levelRequirement:3}];function ic(t){const e=ks.filter(n=>t.progression.level>=n.levelRequirement),a=[],r=new Date;r.setDate(r.getDate()+1),r.setHours(0,0,0,0);const i=e.filter(n=>n.difficulty==="easy");if(i.length>0){const n=i[Math.floor(Math.random()*i.length)];a.push(Ct(n,r))}if(t.progression.level>=3){const n=e.filter(l=>l.difficulty==="medium"),o=Math.min(2,n.length);for(let l=0;l<o;l++){const c=n[Math.floor(Math.random()*n.length)];a.some(m=>m.id.includes(c.id))||a.push(Ct(c,r))}}if(t.progression.level>=5){const n=e.filter(o=>o.difficulty==="hard"&&o.id!=="perfect-day");if(n.length>0){const o=n[Math.floor(Math.random()*n.length)];a.push(Ct(o,r))}}if(a.length>=2&&t.progression.level>=3){const n=ks.find(o=>o.id==="perfect-day");if(n){const o=Ct(n,r);o.maxProgress=a.length,o.description=`Complete todas as outras ${a.length} metas diárias`,a.push(o)}}return a}function Ct(t,e){return{id:`${t.id}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,description:t.description,progress:0,maxProgress:t.maxProgress,completed:!1,rewards:{...t.baseRewards},expiresAt:e}}function nc(t,e,a=1){return t.map(r=>{if(r.completed)return r;let i=!1;switch(e){case"quest-completed":i=r.id.includes("complete-quest")||r.id.includes("complete-multiple-quests");break;case"epic-quest-completed":i=r.id.includes("epic-quest");break;case"xp-gained":i=r.id.includes("gain-xp")||r.id.includes("gain-large-xp");break;case"gold-earned":i=r.id.includes("earn-gold");break;case"enemy-defeated":i=r.id.includes("defeat-enemies");break;case"attribute-trained":i=r.id.includes("train-attribute");break;case"level-up":i=r.id.includes("level-up");break;case"reputation-gained":i=r.id.includes("reputation-gain");break;case"npc-interaction":i=r.id.includes("social-interaction");break}if(i){const n=Math.min(r.maxProgress,r.progress+a);return{...r,progress:n,completed:n>=r.maxProgress}}return r})}function oc(t){const e=t.find(i=>i.id.includes("perfect-day"));if(!e||e.completed)return t;const r=t.filter(i=>!i.id.includes("perfect-day")).filter(i=>i.completed).length;return t.map(i=>i.id.includes("perfect-day")?{...i,progress:r,completed:r>=i.maxProgress}:i)}function Xa(t){const e=new Date;return t.filter(a=>a.expiresAt>e)}function _i(t){const e=t.id.includes("perfect-day")?1.5:1;return{xp:Math.floor(t.rewards.xp*e),gold:Math.floor(t.rewards.gold*e),items:t.rewards.items}}function lc(t){return t.includes("complete-quest")||t.includes("epic-quest")?"⚔️":t.includes("gain-xp")||t.includes("level-up")?"⭐":t.includes("earn-gold")?"💰":t.includes("defeat-enemies")?"🗡️":t.includes("train-attribute")?"💪":t.includes("social-interaction")||t.includes("reputation-gain")?"🤝":t.includes("perfect-day")?"🏆":"🎯"}function cc(t){if(t.includes("perfect-day"))return"text-purple-400";const e=ks.find(a=>t.includes(a.id));if(!e)return"text-gray-400";switch(e.difficulty){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-gray-400"}}const Oe=[{id:"first-steps",name:"Primeiros Passos",description:"Aprenda o básico do HeroForge",category:"beginner",steps:[{id:"welcome",title:"Bem-vindo ao HeroForge! 🎮",description:"Vamos começar sua jornada épica!",content:"O HeroForge é um sistema de gamificação que transforma suas tarefas diárias em aventuras épicas. Você criará heróis, completará missões e evoluirá suas habilidades!",position:"center",skippable:!0,autoAdvance:!1},{id:"create-hero",title:"Crie seu Primeiro Herói",description:"Todo aventureiro precisa de um herói!",content:'Clique no botão "Criar Herói" para começar. Escolha um nome épico e uma classe que combine com você!',targetElement:'[data-testid="create-hero-button"]',position:"bottom",action:{type:"navigate",target:"/heroes/new"},validation:{type:"hero-created"},rewards:{xp:50,gold:100}},{id:"hero-overview",title:"Conheça seu Herói",description:"Vamos explorar as informações do seu herói",content:"Aqui você pode ver o nível, experiência, ouro e estatísticas do seu herói. Essas informações são atualizadas conforme você completa missões!",targetElement:'[data-testid="hero-stats"]',position:"right",autoAdvance:!0},{id:"first-quest",title:"Sua Primeira Missão",description:"Hora de começar a aventura!",content:"Vamos ao Quadro de Missões para aceitar sua primeira quest. Clique no ícone de pergaminho na navegação rápida!",targetElement:'[data-testid="quick-nav-quests"]',position:"top",action:{type:"navigate",target:"/quests"}},{id:"accept-quest",title:"Aceite uma Missão",description:"Escolha uma missão adequada ao seu nível",content:'Procure por missões com dificuldade "Fácil" ou "Normal". Clique em "Aceitar Missão" para adicioná-la às suas missões ativas!',targetElement:'[data-testid="quest-card"]',position:"left",validation:{type:"quest-accepted"},rewards:{xp:25}},{id:"daily-goals",title:"Metas Diárias",description:"Ganhe bônus extras todos os dias!",content:"As metas diárias oferecem recompensas especiais. Complete-as para ganhar XP e ouro extras! Acesse através da navegação rápida.",targetElement:'[data-testid="quick-nav-daily-goals"]',position:"top",action:{type:"navigate",target:"/daily-goals"}},{id:"tutorial-complete",title:"Tutorial Concluído! 🎉",description:"Você está pronto para a aventura!",content:"Parabéns! Você aprendeu o básico do HeroForge. Continue completando missões, evoluindo seu herói e desbloqueando novos recursos!",position:"center",rewards:{xp:100,gold:200,items:["potion_health","scroll_wisdom"]}}]},{id:"advanced-features",name:"Recursos Avançados",description:"Explore funcionalidades avançadas",category:"intermediate",prerequisites:["first-steps"],steps:[{id:"guild-system",title:"Sistema de Guildas",description:"Una-se a outros heróis!",content:"As guildas permitem colaborar com outros jogadores, compartilhar missões e competir em rankings especiais.",targetElement:'[data-testid="quick-nav-guilds"]',position:"top",action:{type:"navigate",target:"/guilds"}},{id:"equipment-system",title:"Sistema de Equipamentos",description:"Melhore suas estatísticas!",content:"Visite a loja para comprar armas, armaduras e acessórios. Equipamentos melhoram suas estatísticas e eficiência em missões.",targetElement:'[data-testid="hero-equipment"]',position:"right"},{id:"achievements",title:"Sistema de Conquistas",description:"Desbloqueie títulos especiais!",content:"Complete desafios específicos para ganhar conquistas e títulos únicos. Alguns títulos oferecem bônus permanentes!",targetElement:'[data-testid="achievements-tab"]',position:"bottom"},{id:"leaderboards",title:"Rankings Globais",description:"Compete com outros heróis!",content:"Veja como você se compara a outros jogadores em diferentes categorias: XP, ouro, missões completadas e muito mais!",targetElement:'[data-testid="quick-nav-leaderboards"]',position:"top",action:{type:"navigate",target:"/leaderboards"}}]},{id:"power-user",name:"Usuário Avançado",description:"Domine todas as funcionalidades",category:"advanced",prerequisites:["first-steps","advanced-features"],steps:[{id:"narrative-quests",title:"Missões Narrativas",description:"Experiências imersivas!",content:"As missões narrativas oferecem histórias envolventes com múltiplas escolhas e consequências. Cada decisão afeta o resultado!",targetElement:'[data-testid="narrative-quests-tab"]',position:"bottom"},{id:"reputation-system",title:"Sistema de Reputação",description:"Construa relacionamentos!",content:"Sua reputação com diferentes facções afeta as missões disponíveis e recompensas. Escolha suas alianças sabiamente!",targetElement:'[data-testid="reputation-tab"]',position:"right"},{id:"advanced-strategies",title:"Estratégias Avançadas",description:"Otimize sua progressão!",content:"Combine equipamentos, planeje suas missões diárias e use consumíveis estrategicamente para maximizar seus ganhos!",position:"center"}]}];var fe;let dc=(fe=class{constructor(){F(this,"currentFlow");F(this,"currentStepIndex",0);F(this,"completedFlows",new Set);F(this,"completedSteps",new Set);F(this,"isActive",!1);F(this,"callbacks",new Map)}static getInstance(){return fe.instance||(fe.instance=new fe),fe.instance}startFlow(e){const a=Oe.find(r=>r.id===e);return!a||a.prerequisites&&!a.prerequisites.every(i=>this.completedFlows.has(i))?!1:(this.currentFlow=a,this.currentStepIndex=0,this.isActive=!0,this.emit("flow-started",{flow:a}),this.emit("step-changed",{step:this.getCurrentStep()}),!0)}getCurrentStep(){return!this.currentFlow||!this.isActive?null:this.currentFlow.steps[this.currentStepIndex]||null}nextStep(){if(!this.currentFlow||!this.isActive)return!1;const e=this.getCurrentStep();return e&&(this.markStepCompleted(e.id),this.emit("step-completed",{step:e})),this.currentStepIndex++,this.currentStepIndex>=this.currentFlow.steps.length?(this.completeFlow(),!1):(this.emit("step-changed",{step:this.getCurrentStep()}),!0)}previousStep(){return!this.currentFlow||!this.isActive||this.currentStepIndex<=0?!1:(this.currentStepIndex--,this.emit("step-changed",{step:this.getCurrentStep()}),!0)}skipStep(){const e=this.getCurrentStep();return!e||!e.skippable?!1:this.nextStep()}completeFlow(){this.currentFlow&&(this.completedFlows.add(this.currentFlow.id),this.emit("flow-completed",{flow:this.currentFlow}),this.reset())}reset(){this.currentFlow=void 0,this.currentStepIndex=0,this.isActive=!1,this.emit("onboarding-reset")}markStepCompleted(e){this.completedSteps.add(e)}isStepCompleted(e){return this.completedSteps.has(e)}isFlowCompleted(e){return this.completedFlows.has(e)}getAvailableFlows(){return Oe.filter(e=>this.isFlowCompleted(e.id)?!1:e.prerequisites?e.prerequisites.every(a=>this.isFlowCompleted(a)):!0)}getProgress(){const e=Oe.reduce((r,i)=>r+i.steps.length,0),a=this.completedSteps.size;return{completed:a,total:e,percentage:e>0?Math.round(a/e*100):0}}on(e,a){this.callbacks.has(e)||this.callbacks.set(e,[]),this.callbacks.get(e).push(a)}off(e,a){const r=this.callbacks.get(e);if(r){const i=r.indexOf(a);i>-1&&r.splice(i,1)}}emit(e,a){const r=this.callbacks.get(e);r&&r.forEach(i=>i(a))}saveState(){var a;const e={completedFlows:Array.from(this.completedFlows),completedSteps:Array.from(this.completedSteps),currentFlow:(a=this.currentFlow)==null?void 0:a.id,currentStepIndex:this.currentStepIndex,isActive:this.isActive};localStorage.setItem("heroforge-onboarding",JSON.stringify(e))}loadState(){const e=localStorage.getItem("heroforge-onboarding");if(e)try{const a=JSON.parse(e);this.completedFlows=new Set(a.completedFlows||[]),this.completedSteps=new Set(a.completedSteps||[]),this.currentStepIndex=a.currentStepIndex||0,this.isActive=a.isActive||!1,a.currentFlow&&this.isActive&&(this.currentFlow=Oe.find(r=>r.id===a.currentFlow))}catch(a){console.error("Failed to load onboarding state:",a)}}},F(fe,"instance"),fe);const O=dc.getInstance(),mc=[{name:"Caçador de XP",description:"Ganhe experiência completando tarefas",type:"daily",objective:"Ganhar {target} pontos de experiência",targetValue:500,progressType:"xp-gained",rewards:[{type:"gold",amount:100},{type:"xp",amount:50}],icon:"⚡",color:"from-yellow-400 to-orange-500",rarity:"common"},{name:"Completador de Missões",description:"Complete missões para ganhar recompensas",type:"daily",objective:"Completar {target} missões",targetValue:3,progressType:"quests-completed",rewards:[{type:"gold",amount:150},{type:"xp",amount:100}],icon:"🎯",color:"from-blue-400 to-blue-600",rarity:"common"},{name:"Coletor de Ouro",description:"Acumule ouro através de suas aventuras",type:"daily",objective:"Ganhar {target} moedas de ouro",targetValue:300,progressType:"gold-earned",rewards:[{type:"xp",amount:200},{type:"gold",amount:50}],icon:"💰",color:"from-yellow-500 to-yellow-600",rarity:"common"},{name:"Ascensão Heroica",description:"Evolua seu herói subindo de nível",type:"daily",objective:"Subir {target} nível(is)",targetValue:1,progressType:"levels-gained",rewards:[{type:"gold",amount:300},{type:"xp",amount:150},{type:"title",titleId:"level-master"}],icon:"🌟",color:"from-purple-400 to-purple-600",rarity:"rare"}],uc=[{name:"Maratona Semanal",description:"Uma semana intensa de aventuras",type:"weekly",objective:"Ganhar {target} pontos de experiência",targetValue:2500,progressType:"xp-gained",rewards:[{type:"gold",amount:500},{type:"xp",amount:300},{type:"title",titleId:"weekly-champion"}],icon:"🏃‍♂️",color:"from-green-400 to-green-600",rarity:"epic"},{name:"Mestre das Missões",description:"Domine a arte de completar missões",type:"weekly",objective:"Completar {target} missões",targetValue:15,progressType:"quests-completed",rewards:[{type:"gold",amount:750},{type:"xp",amount:400},{type:"title",titleId:"quest-master"}],icon:"🗡️",color:"from-red-400 to-red-600",rarity:"epic"},{name:"Fortuna Dourada",description:"Acumule uma fortuna em ouro",type:"weekly",objective:"Ganhar {target} moedas de ouro",targetValue:1500,progressType:"gold-earned",rewards:[{type:"gold",amount:1e3},{type:"xp",amount:500},{type:"title",titleId:"gold-collector"}],icon:"👑",color:"from-yellow-400 to-yellow-600",rarity:"legendary"}],Ee=class Ee{constructor(){F(this,"events",[]);F(this,"eventProgress",[]);F(this,"rotation");this.rotation=this.initializeRotation(),this.loadState()}static getInstance(){return Ee.instance||(Ee.instance=new Ee),Ee.instance}initializeRotation(){const e=new Date,a=new Date(e);a.setDate(a.getDate()+1),a.setHours(0,0,0,0);const r=new Date(e);return r.setDate(r.getDate()+(7-r.getDay())),r.setHours(0,0,0,0),{dailyEvents:[],weeklyEvents:[],specialEvents:[],lastRotation:e,nextRotation:a}}generateDailyEvents(){const e=new Date,a=new Date(e);return a.setHours(23,59,59,999),this.shuffleArray([...mc]).slice(0,Math.floor(Math.random()*2)+2).map((i,n)=>({...i,id:`daily-${e.getTime()}-${n}`,startDate:e,endDate:a,isActive:!0,currentProgress:0,objective:i.objective.replace("{target}",i.targetValue.toString())}))}generateWeeklyEvents(){const e=new Date,a=new Date(e);return a.setDate(a.getDate()+(7-a.getDay())),a.setHours(23,59,59,999),this.shuffleArray([...uc]).slice(0,Math.floor(Math.random()*2)+1).map((i,n)=>({...i,id:`weekly-${e.getTime()}-${n}`,startDate:e,endDate:a,isActive:!0,currentProgress:0,objective:i.objective.replace("{target}",i.targetValue.toString())}))}shuffleArray(e){const a=[...e];for(let r=a.length-1;r>0;r--){const i=Math.floor(Math.random()*(r+1));[a[r],a[i]]=[a[i],a[r]]}return a}checkAndRotateEvents(){const e=new Date;e>=this.rotation.nextRotation&&this.rotateDailyEvents(),e.getDay()===0&&this.rotation.weeklyEvents.length===0&&this.rotateWeeklyEvents(),this.events=this.events.filter(a=>a.endDate>e)}rotateDailyEvents(){this.events.filter(r=>r.type==="daily");const e=this.generateDailyEvents();this.events=this.events.filter(r=>r.type!=="daily"),this.events.push(...e);const a=new Date;a.setDate(a.getDate()+1),a.setHours(0,0,0,0),this.rotation.dailyEvents=e,this.rotation.lastRotation=new Date,this.rotation.nextRotation=a,this.saveState()}rotateWeeklyEvents(){const e=this.generateWeeklyEvents();this.events=this.events.filter(a=>a.type!=="weekly"),this.events.push(...e),this.rotation.weeklyEvents=e,this.saveState()}getActiveEvents(){return this.checkAndRotateEvents(),this.events.filter(e=>e.isActive&&e.endDate>new Date)}updateEventProgress(e,a,r=1){this.getActiveEvents().filter(n=>n.progressType===a).forEach(n=>{let o=this.eventProgress.find(l=>l.eventId===n.id&&l.heroId===e);o||(o={eventId:n.id,heroId:e,progress:0,completed:!1,rewardsClaimed:!1,startedAt:new Date},this.eventProgress.push(o)),o.completed||(o.progress=Math.min(o.progress+r,n.targetValue),o.progress>=n.targetValue&&(o.completed=!0,o.completedAt=new Date))}),this.saveState()}claimEventRewards(e,a){const r=this.eventProgress.find(n=>n.eventId===a&&n.heroId===e),i=this.events.find(n=>n.id===a);return!r||!i||!r.completed||r.rewardsClaimed?null:(r.rewardsClaimed=!0,this.saveState(),i.rewards)}getEventProgress(e){return this.eventProgress.filter(a=>a.heroId===e)}getTimeUntilNextRotation(){const e=new Date,a=this.rotation.nextRotation.getTime()-e.getTime(),r=Math.floor(a/(1e3*60*60)),i=Math.floor(a%(1e3*60*60)/(1e3*60));return{hours:r,minutes:i}}saveState(){const e={events:this.events,eventProgress:this.eventProgress,rotation:this.rotation};localStorage.setItem("heroforge-events",JSON.stringify(e))}loadState(){var a,r;const e=localStorage.getItem("heroforge-events");if(e)try{const i=JSON.parse(e);this.events=((a=i.events)==null?void 0:a.map(n=>({...n,startDate:new Date(n.startDate),endDate:new Date(n.endDate)})))||[],this.eventProgress=((r=i.eventProgress)==null?void 0:r.map(n=>({...n,startedAt:new Date(n.startedAt),completedAt:n.completedAt?new Date(n.completedAt):void 0})))||[],this.rotation=i.rotation?{...i.rotation,lastRotation:new Date(i.rotation.lastRotation),nextRotation:new Date(i.rotation.nextRotation)}:this.initializeRotation()}catch(i){console.error("Error loading event state:",i),this.initializeEvents()}else this.initializeEvents()}initializeEvents(){if(this.events.length===0){const e=this.generateDailyEvents(),a=this.generateWeeklyEvents();this.events=[...e,...a],this.rotation.dailyEvents=e,this.rotation.weeklyEvents=a,this.saveState()}}};F(Ee,"instance");let Ss=Ee;const we=Ss.getInstance(),Me=class Me{constructor(){F(this,"activities",[]);F(this,"maxActivities",1e3);this.loadActivities()}static getInstance(){return Me.instance||(Me.instance=new Me),Me.instance}createActivity(e,a,r=!0){const i={id:`activity-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:e,timestamp:new Date,data:a,message:this.generateActivityMessage(e,a),icon:this.getActivityIcon(e),color:this.getActivityColor(e),isPublic:r,likes:0,comments:[],shares:0};return this.activities.unshift(i),this.activities.length>this.maxActivities&&(this.activities=this.activities.slice(0,this.maxActivities)),this.saveActivities(),i}generateActivityMessage(e,a){var n,o;const{heroName:r,heroClass:i}=a;switch(e){case"quest-completed":return`${r} (${i}) completou a missão "${a.questName}"${a.questDifficulty?` (${a.questDifficulty})`:""}!`;case"epic-quest-completed":return`🌟 ${r} (${i}) conquistou a missão épica "${a.questName}"! Uma verdadeira lenda!`;case"level-up":return`🎉 ${r} (${i}) subiu para o nível ${a.heroLevel}!`;case"achievement-unlocked":return`🏆 ${r} (${i}) desbloqueou a conquista "${a.achievementUnlocked}"!`;case"title-earned":return`👑 ${r} (${i}) conquistou o título "${a.titleEarned}"!`;case"event-completed":return`🎪 ${r} (${i}) completou o evento "${a.eventCompleted}"!`;case"daily-goal-completed":return`✅ ${r} (${i}) completou a meta diária "${a.dailyGoalCompleted}"!`;case"combat-victory":const l=((n=a.enemiesDefeated)==null?void 0:n.length)===1?a.enemiesDefeated[0]:`${(o=a.enemiesDefeated)==null?void 0:o.length} inimigos`;return`⚔️ ${r} (${i}) derrotou ${l} em combate!`;case"rank-promotion":return`🏆 ${r} (${i}) foi promovido para Rank ${a.newRank}! Uma conquista épica!`;default:return`${r} (${i}) realizou uma ação heroica!`}}getActivityIcon(e){return{"quest-completed":"🎯","epic-quest-completed":"🌟","level-up":"📈","achievement-unlocked":"🏆","title-earned":"👑","event-completed":"🎪","daily-goal-completed":"✅","combat-victory":"⚔️","rank-promotion":"🏆"}[e]||"🎮"}getActivityColor(e){return{"quest-completed":"from-blue-400 to-blue-600","epic-quest-completed":"from-purple-500 to-pink-600","level-up":"from-green-400 to-green-600","achievement-unlocked":"from-yellow-400 to-orange-500","title-earned":"from-purple-400 to-purple-600","event-completed":"from-pink-400 to-pink-600","daily-goal-completed":"from-teal-400 to-teal-600","combat-victory":"from-red-400 to-red-600","rank-promotion":"from-amber-400 to-yellow-600"}[e]||"from-gray-400 to-gray-600"}getActivityFeed(e){let a=[...this.activities];return e&&(e.types&&e.types.length>0&&(a=a.filter(r=>e.types.includes(r.type))),e.heroIds&&e.heroIds.length>0&&(a=a.filter(r=>e.heroIds.includes(r.data.heroId))),e.showOnlyPublic&&(a=a.filter(r=>r.isPublic)),e.dateRange&&(a=a.filter(r=>r.timestamp>=e.dateRange.start&&r.timestamp<=e.dateRange.end))),{activities:a,lastUpdated:new Date,totalActivities:a.length}}getHeroActivities(e,a=50){return this.activities.filter(r=>r.data.heroId===e).slice(0,a)}getRecentActivities(e=20){return this.activities.slice(0,e)}likeActivity(e){const a=this.activities.find(r=>r.id===e);return a?(a.likes++,this.saveActivities(),!0):!1}addComment(e,a,r,i){const n=this.activities.find(o=>o.id===e);if(n){const o={id:`comment-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,authorId:a,authorName:r,content:i,timestamp:new Date};return n.comments.push(o),this.saveActivities(),!0}return!1}shareActivity(e){const a=this.activities.find(n=>n.id===e);if(!a)return null;a.shares++,this.saveActivities();const r=`${window.location.origin}/activity/${e}`,i=`Confira esta conquista épica no HeroForge: ${a.message}`;return{activity:a,shareUrl:r,shareText:i}}getActivityStats(e){var m;const a=e?this.activities.filter(d=>d.data.heroId===e):this.activities,r=new Date,i=new Date(r.getTime()-7*24*60*60*1e3),n=new Date(r.getTime()-30*24*60*60*1e3),o={},l={};a.forEach(d=>{o[d.type]=(o[d.type]||0)+1;const h=d.timestamp.toDateString();l[h]=(l[h]||0)+1});const c=((m=Object.entries(l).sort(([,d],[,h])=>h-d)[0])==null?void 0:m[0])||"Nenhum";return{totalActivities:a.length,activitiesByType:o,activitiesThisWeek:a.filter(d=>d.timestamp>=i).length,activitiesThisMonth:a.filter(d=>d.timestamp>=n).length,mostActiveDay:c}}cleanupOldActivities(e=90){const a=new Date;a.setDate(a.getDate()-e);const r=this.activities.length;this.activities=this.activities.filter(n=>n.timestamp>=a);const i=r-this.activities.length;return i>0&&this.saveActivities(),i}saveActivities(){try{const e={activities:this.activities,lastSaved:new Date().toISOString()};localStorage.setItem("heroforge-activities",JSON.stringify(e))}catch(e){console.error("Erro ao salvar atividades:",e)}}loadActivities(){try{const e=localStorage.getItem("heroforge-activities");if(e){const a=JSON.parse(e);this.activities=(a.activities||[]).map(r=>({...r,timestamp:new Date(r.timestamp),comments:(r.comments||[]).map(i=>({...i,timestamp:new Date(i.timestamp)}))}))}}catch(e){console.error("Erro ao carregar atividades:",e),this.activities=[]}}exportActivities(e){const a=e?this.getHeroActivities(e):this.getRecentActivities(),r={heroForgeActivities:a,exportedAt:new Date().toISOString(),totalActivities:a.length};return JSON.stringify(r,null,2)}};F(Me,"instance");let As=Me;const re=As.getInstance(),st={questCompleted:t=>re.createActivity("quest-completed",t),epicQuestCompleted:t=>re.createActivity("epic-quest-completed",t),levelUp:t=>re.createActivity("level-up",t),achievementUnlocked:t=>re.createActivity("achievement-unlocked",t),titleEarned:t=>re.createActivity("title-earned",t),eventCompleted:t=>re.createActivity("event-completed",t),dailyGoalCompleted:t=>re.createActivity("daily-goal-completed",t),combatVictory:t=>re.createActivity("combat-victory",t),rankPromotion:t=>re.createActivity("rank-promotion",t)},Re=class Re{constructor(){F(this,"metrics",[]);F(this,"sessions",[]);F(this,"currentSession",null);F(this,"alertRules",[]);F(this,"alerts",[]);F(this,"maxMetrics",1e4);this.loadMetrics(),this.initializeSession(),this.setupPerformanceMonitoring()}static getInstance(){return Re.instance||(Re.instance=new Re),Re.instance}trackEvent(e,a,r={}){var n;const i={id:`metric-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,timestamp:new Date,heroId:a,eventType:e,data:r,sessionId:((n=this.currentSession)==null?void 0:n.sessionId)||"unknown",userId:this.getUserId()};this.metrics.unshift(i),this.metrics.length>this.maxMetrics&&(this.metrics=this.metrics.slice(0,this.maxMetrics)),this.currentSession&&this.updateCurrentSession(e,r),this.checkAlerts(i),this.saveMetrics()}initializeSession(){this.currentSession={sessionId:`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,startTime:new Date,pagesVisited:[window.location.pathname],actionsPerformed:0,questsCompleted:0,xpGained:0,goldGained:0,achievementsUnlocked:0},this.trackEvent("session-started","system",{userAgent:navigator.userAgent,screenResolution:`${screen.width}x${screen.height}`,language:navigator.language})}endSession(){if(!this.currentSession)return;const e=new Date,a=Math.floor((e.getTime()-this.currentSession.startTime.getTime())/1e3);this.currentSession.endTime=e,this.currentSession.duration=a,this.sessions.unshift(this.currentSession),this.sessions.length>1e3&&(this.sessions=this.sessions.slice(0,1e3)),this.trackEvent("session-ended","system",{duration:a,actionsPerformed:this.currentSession.actionsPerformed,pagesVisited:this.currentSession.pagesVisited.length}),this.saveSessions(),this.currentSession=null}updateCurrentSession(e,a){if(this.currentSession)switch(this.currentSession.actionsPerformed++,e){case"quest-completed":this.currentSession.questsCompleted++;break;case"xp-gained":this.currentSession.xpGained+=a.amount||0;break;case"gold-gained":this.currentSession.goldGained+=a.amount||0;break;case"achievement-unlocked":this.currentSession.achievementsUnlocked++;break;case"page-visited":this.currentSession.pagesVisited.includes(a.page)||this.currentSession.pagesVisited.push(a.page);break}}getEngagementMetrics(e=30){const a=new Date,r=new Date(a.getTime()-e*24*60*60*1e3),i=this.sessions.filter(p=>p.startTime>=r);new Set(i.map(p=>p.heroId).filter(Boolean));const n=this.getUniqueUsersInPeriod(1),o=this.getUniqueUsersInPeriod(7),l=this.getUniqueUsersInPeriod(30),c=i.reduce((p,u)=>p+(u.duration||0),0),m=i.length>0?c/i.length:0,d=i.reduce((p,u)=>p+u.actionsPerformed,0),h=i.length>0?d/i.length:0;return{dailyActiveUsers:n,weeklyActiveUsers:o,monthlyActiveUsers:l,averageSessionDuration:m,averageActionsPerSession:h,retentionRate:this.calculateRetentionRates(),churnRate:this.calculateChurnRate()}}getGameplayAnalytics(){var h,p;const e=this.metrics.filter(u=>u.eventType==="hero-created"),a=this.metrics.filter(u=>u.eventType==="quest-completed"),r=this.metrics.filter(u=>u.eventType==="xp-gained"),i=this.metrics.filter(u=>u.eventType==="gold-gained"),n={};e.forEach(u=>{const x=u.data.class;n[x]=(n[x]||0)+1});const o=((h=Object.entries(n).sort(([,u],[,x])=>x-u)[0])==null?void 0:h[0])||"Nenhuma",l={};a.forEach(u=>{const x=u.data.questName;l[x]=(l[x]||0)+1});const c=((p=Object.entries(l).sort(([,u],[,x])=>x-u)[0])==null?void 0:p[0])||"Nenhuma",m=r.reduce((u,x)=>u+(x.data.amount||0),0),d=i.reduce((u,x)=>u+(x.data.amount||0),0);return{totalHeroes:e.length,averageHeroLevel:this.calculateAverageHeroLevel(),totalQuestsCompleted:a.length,totalXpGained:m,totalGoldEarned:d,mostPopularClass:o,mostCompletedQuest:c,averageSessionsPerUser:this.calculateAverageSessionsPerUser(),conversionFunnels:this.calculateConversionFunnels()}}getPerformanceMetrics(){var r,i;const e=performance.getEntriesByType("navigation");return{pageLoadTime:((r=e[0])==null?void 0:r.loadEventEnd)-((i=e[0])==null?void 0:i.navigationStart)||0,componentRenderTime:this.getAverageRenderTime(),apiResponseTime:this.getAverageApiResponseTime(),errorRate:this.calculateErrorRate(),crashRate:this.calculateCrashRate(),memoryUsage:this.getMemoryUsage()}}getKPIDashboard(){const e=this.getEngagementMetrics(),a=this.getGameplayAnalytics(),r=this.getPerformanceMetrics();return{overview:{totalUsers:this.getTotalUsers(),activeUsers:e.dailyActiveUsers,totalSessions:this.sessions.length,averageSessionDuration:e.averageSessionDuration},engagement:e,gameplay:a,performance:r,trends:{userGrowth:this.getUserGrowthTrend(),engagementTrend:this.getEngagementTrend(),gameplayTrend:this.getGameplayTrend()}}}getUniqueUsersInPeriod(e){const a=new Date(Date.now()-e*24*60*60*1e3),r=this.sessions.filter(i=>i.startTime>=a);return new Set(r.map(i=>i.heroId).filter(Boolean)).size}calculateRetentionRates(){const e=this.getTotalUsers();return e===0?{day1:0,day7:0,day30:0}:{day1:Math.min(this.getUniqueUsersInPeriod(1)/e,1),day7:Math.min(this.getUniqueUsersInPeriod(7)/e,1),day30:Math.min(this.getUniqueUsersInPeriod(30)/e,1)}}calculateChurnRate(){const e=this.getUniqueUsersInPeriod(30),a=this.getTotalUsers();return a>0?Math.max(0,(a-e)/a):0}calculateAverageHeroLevel(){const e=this.metrics.filter(r=>r.eventType==="level-up");if(e.length===0)return 1;const a=e.map(r=>r.data.newLevel||1);return a.reduce((r,i)=>r+i,0)/a.length}calculateAverageSessionsPerUser(){const e=new Set(this.sessions.map(a=>a.heroId).filter(Boolean));return e.size>0?this.sessions.length/e.size:0}calculateConversionFunnels(){const e=this.metrics.filter(n=>n.eventType==="hero-created").length,a=this.metrics.filter(n=>n.eventType==="quest-completed").length,r=this.metrics.filter(n=>n.eventType==="level-up").length,i=this.metrics.filter(n=>n.eventType==="achievement-unlocked").length;return{heroCreation:e,firstQuest:e>0?a/e:0,firstLevelUp:e>0?r/e:0,firstAchievement:e>0?i/e:0,retention7Days:this.getUniqueUsersInPeriod(7)/Math.max(e,1)}}getTotalUsers(){return new Set(this.sessions.map(a=>a.heroId).filter(Boolean)).size}getUserGrowthTrend(){return Array.from({length:30},(a,r)=>{const i=new Date;return i.setDate(i.getDate()-(29-r)),i.toISOString().split("T")[0]}).map(a=>{const r=new Date(a),i=new Date(r.getTime()+24*60*60*1e3),n=this.metrics.filter(o=>o.eventType==="hero-created"&&o.timestamp>=r&&o.timestamp<i).length;return{date:a,count:n}})}getEngagementTrend(){return Array.from({length:30},(a,r)=>{const i=new Date;return i.setDate(i.getDate()-(29-r)),i.toISOString().split("T")[0]}).map(a=>{const r=new Date(a),i=new Date(r.getTime()+24*60*60*1e3),n=this.sessions.filter(c=>c.startTime>=r&&c.startTime<i),o=n.reduce((c,m)=>c+(m.duration||0),0),l=n.length>0?o/n.length:0;return{date:a,sessions:n.length,duration:l}})}getGameplayTrend(){return Array.from({length:30},(a,r)=>{const i=new Date;return i.setDate(i.getDate()-(29-r)),i.toISOString().split("T")[0]}).map(a=>{const r=new Date(a),i=new Date(r.getTime()+24*60*60*1e3),n=this.metrics.filter(l=>l.eventType==="quest-completed"&&l.timestamp>=r&&l.timestamp<i).length,o=this.metrics.filter(l=>l.eventType==="xp-gained"&&l.timestamp>=r&&l.timestamp<i).reduce((l,c)=>l+(c.data.amount||0),0);return{date:a,quests:n,xp:o}})}setupPerformanceMonitoring(){window.addEventListener("error",e=>{this.trackEvent("error-occurred","system",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno})}),window.addEventListener("unhandledrejection",e=>{var a;this.trackEvent("promise-rejection","system",{reason:((a=e.reason)==null?void 0:a.toString())||"Unknown"})}),"PerformanceObserver"in window&&new PerformanceObserver(a=>{a.getEntries().forEach(r=>{r.entryType==="measure"&&this.trackEvent("performance-measure","system",{name:r.name,duration:r.duration})})}).observe({entryTypes:["measure"]})}getAverageRenderTime(){const e=this.metrics.filter(r=>{var i;return r.eventType==="performance-measure"&&((i=r.data.name)==null?void 0:i.includes("render"))});return e.length===0?0:e.reduce((r,i)=>r+(i.data.duration||0),0)/e.length}getAverageApiResponseTime(){return Math.random()*200+50}calculateErrorRate(){const e=this.metrics.length,a=this.metrics.filter(r=>r.eventType==="error-occurred"||r.eventType==="promise-rejection").length;return e>0?a/e:0}calculateCrashRate(){return .001}getMemoryUsage(){return"memory"in performance?performance.memory.usedJSHeapSize/1024/1024:0}checkAlerts(e){this.alertRules.forEach(a=>{if(!a.enabled)return;const r=this.extractMetricValue(e,a.metric);if(r===null)return;this.evaluateCondition(r,a.condition,a.threshold)&&this.createAlert(a,e,r)})}extractMetricValue(e,a){var r;switch(a){case"session_duration":return((r=this.currentSession)==null?void 0:r.duration)||0;case"error_rate":return this.calculateErrorRate();case"memory_usage":return this.getMemoryUsage();default:return e.data[a]||null}}evaluateCondition(e,a,r){switch(a){case"greater_than":return e>r;case"less_than":return e<r;case"equals":return e===r;case"not_equals":return e!==r;default:return!1}}createAlert(e,a,r){const i={id:`alert-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,ruleId:e.id,timestamp:new Date,metric:e.metric,value:r,threshold:e.threshold,message:`Alert: ${e.name} - ${e.metric} is ${r} (threshold: ${e.threshold})`,severity:this.calculateSeverity(r,e.threshold),acknowledged:!1};this.alerts.unshift(i),console.warn("Metric Alert:",i.message)}calculateSeverity(e,a){const r=Math.abs(e-a)/a;return r>2?"critical":r>1?"high":r>.5?"medium":"low"}getUserId(){return localStorage.getItem("heroforge-user-id")||"anonymous"}saveMetrics(){try{const e={metrics:this.metrics.slice(0,1e3),lastSaved:new Date().toISOString()};localStorage.setItem("heroforge-metrics",JSON.stringify(e))}catch(e){console.error("Erro ao salvar métricas:",e)}}loadMetrics(){try{const e=localStorage.getItem("heroforge-metrics");if(e){const a=JSON.parse(e);this.metrics=(a.metrics||[]).map(r=>({...r,timestamp:new Date(r.timestamp)}))}}catch(e){console.error("Erro ao carregar métricas:",e),this.metrics=[]}}saveSessions(){try{const e={sessions:this.sessions.slice(0,500),lastSaved:new Date().toISOString()};localStorage.setItem("heroforge-sessions",JSON.stringify(e))}catch(e){console.error("Erro ao salvar sessões:",e)}}loadSessions(){try{const e=localStorage.getItem("heroforge-sessions");if(e){const a=JSON.parse(e);this.sessions=(a.sessions||[]).map(r=>({...r,startTime:new Date(r.startTime),endTime:r.endTime?new Date(r.endTime):void 0}))}}catch(e){console.error("Erro ao carregar sessões:",e),this.sessions=[]}}cleanupOldData(e=90){const a=new Date;a.setDate(a.getDate()-e),this.metrics=this.metrics.filter(r=>r.timestamp>=a),this.sessions=this.sessions.filter(r=>r.startTime>=a),this.alerts=this.alerts.filter(r=>r.timestamp>=a),this.saveMetrics(),this.saveSessions()}};F(Re,"instance");let Ts=Re;const ue=Ts.getInstance(),Ze={heroCreated:(t,e)=>ue.trackEvent("hero-created",t,e),levelUp:(t,e)=>ue.trackEvent("level-up",t,e),questCompleted:(t,e)=>ue.trackEvent("quest-completed",t,e),xpGained:(t,e)=>ue.trackEvent("xp-gained",t,{amount:e}),goldGained:(t,e)=>ue.trackEvent("gold-gained",t,{amount:e}),achievementUnlocked:(t,e)=>ue.trackEvent("achievement-unlocked",t,e),pageVisited:(t,e)=>ue.trackEvent("page-visited",t,{page:e}),featureUsed:(t,e)=>ue.trackEvent("feature-used",t,{feature:e})};window.addEventListener("beforeunload",()=>{ue.endSession()});const Ka={F:{level:"F",name:"Novato",color:"#9CA3AF",icon:"⚪",description:"Um recém-chegado ao mundo das aventuras.",gradient:"from-gray-400 to-gray-600",textColor:"text-gray-600",glowColor:"shadow-gray-400/50"},E:{level:"E",name:"Aventureiro",color:"#10B981",icon:"🟢",description:"Um viajante experiente com pequenas vitórias.",gradient:"from-emerald-400 to-emerald-600",textColor:"text-emerald-600",glowColor:"shadow-emerald-400/50"},D:{level:"D",name:"Explorador",color:"#3B82F6",icon:"🔵",description:"Aventureiro constante, conhecido nas tavernas.",gradient:"from-blue-400 to-blue-600",textColor:"text-blue-600",glowColor:"shadow-blue-400/50"},C:{level:"C",name:"Herói Local",color:"#8B5CF6",icon:"🟣",description:"Reconhecido em cidades e aldeias.",gradient:"from-purple-400 to-purple-600",textColor:"text-purple-600",glowColor:"shadow-purple-400/50"},B:{level:"B",name:"Guardião",color:"#F59E0B",icon:"🟡",description:"Um protetor notável, admirado pelo povo.",gradient:"from-amber-400 to-amber-600",textColor:"text-amber-600",glowColor:"shadow-amber-400/50"},A:{level:"A",name:"Campeão",color:"#EF4444",icon:"🔴",description:"Herói de elite, famoso em todo o reino.",gradient:"from-red-400 to-red-600",textColor:"text-red-600",glowColor:"shadow-red-400/50"},S:{level:"S",name:"Lenda Viva",color:"#FFD700",icon:"⭐",description:"Um mito vivo, símbolo de glória eterna.",gradient:"from-yellow-300 via-yellow-400 to-amber-500",textColor:"text-yellow-600",glowColor:"shadow-yellow-400/75 animate-pulse"}},ss={F:{xp:0,missions:0},E:{xp:200,missions:2},D:{xp:600,missions:5},C:{xp:1200,missions:10,titles:1},B:{xp:2500,missions:20,titles:2},A:{xp:4e3,missions:30,titles:3,specialRequirements:["legendary_quest"]},S:{xp:7e3,missions:50,titles:5,specialRequirements:["legendary_quest","epic_achievement"]}},kt=["F","E","D","C","B","A","S"],St={F:[{type:"visual",name:"Emblema de Novato",description:"Seu primeiro emblema de aventureiro",icon:"🛡️",unlocked:!0}],E:[{type:"cosmetic",name:"Capa Verde",description:"Uma capa simples mas digna",icon:"🧥",unlocked:!1},{type:"gameplay",name:"+5% XP Bonus",description:"Experiência adicional em missões",icon:"⚡",unlocked:!1}],D:[{type:"visual",name:"Brasão de Explorador",description:"Símbolo de um verdadeiro explorador",icon:"🏅",unlocked:!1},{type:"gameplay",name:"Missões Especiais",description:"Acesso a missões de dificuldade média",icon:"📜",unlocked:!1}],C:[{type:"cosmetic",name:"Armadura Roxa",description:"Armadura digna de um herói local",icon:"⚔️",unlocked:!1},{type:"gameplay",name:"+10% Gold Bonus",description:"Ouro adicional em recompensas",icon:"💰",unlocked:!1}],B:[{type:"visual",name:"Aura Dourada",description:"Uma aura que demonstra seu poder",icon:"✨",unlocked:!1},{type:"special",name:"Título de Guardião",description:"Reconhecimento oficial do reino",icon:"👑",unlocked:!1}],A:[{type:"cosmetic",name:"Capa de Campeão",description:"Capa vermelha dos grandes heróis",icon:"🎭",unlocked:!1},{type:"special",name:"História Épica IA",description:"História personalizada gerada por IA",icon:"📖",unlocked:!1}],S:[{type:"special",name:"Lenda Personalizada",description:"História e imagem lendária única",icon:"🌟",unlocked:!1},{type:"visual",name:"Efeito Lendário",description:"Partículas e brilho permanente",icon:"💫",unlocked:!1},{type:"gameplay",name:"Acesso Total",description:"Todas as funcionalidades desbloqueadas",icon:"🗝️",unlocked:!1}]},De=class De{constructor(){F(this,"celebrations",[])}static getInstance(){return De.instance||(De.instance=new De),De.instance}calculateRank(e){var r;let a="F";for(const i of kt){const n=ss[i],o=e.progression.xp>=n.xp,l=(e.stats.questsCompleted||0)>=n.missions,c=!n.titles||(((r=e.titles)==null?void 0:r.length)||0)>=n.titles,m=this.checkSpecialRequirements(e,n.specialRequirements);if(o&&l&&c&&m)a=i;else break}return a}checkSpecialRequirements(e,a){var r,i;if(!a)return!0;for(const n of a)switch(n){case"legendary_quest":if(!((r=e.achievements)!=null&&r.some(o=>o.includes("Lendário"))))return!1;break;case"epic_achievement":if(!((i=e.achievements)!=null&&i.some(o=>o.includes("Épico"))))return!1;break}return!0}calculateProgress(e){var h;const a=this.calculateRank(e),r=kt.indexOf(a),i=r<kt.length-1?kt[r+1]:null;if(!i)return{currentRank:a,nextRank:null,currentXP:e.progression.xp,requiredXP:e.progression.xp,currentMissions:e.stats.questsCompleted||0,requiredMissions:e.stats.questsCompleted||0,progressPercentage:100,canPromote:!1};const n=ss[i],o=ss[a],l=Math.min(100,(e.progression.xp-o.xp)/(n.xp-o.xp)*100),c=Math.min(100,(e.stats.questsCompleted||0)/n.missions*100),m=Math.min(l,c),d=e.progression.xp>=n.xp&&(e.stats.questsCompleted||0)>=n.missions&&(!n.titles||(((h=e.titles)==null?void 0:h.length)||0)>=n.titles)&&this.checkSpecialRequirements(e,n.specialRequirements);return{currentRank:a,nextRank:i,currentXP:e.progression.xp,requiredXP:n.xp,currentMissions:e.stats.questsCompleted||0,requiredMissions:n.missions,progressPercentage:m,canPromote:d}}promoteHero(e,a){const r=this.calculateProgress(e);if(!r.canPromote||!r.nextRank)return{promoted:!1};const i=r.nextRank,n=this.createCelebration(i,e);return e.progression.level,this.getNotableAchievement(e,i),st.rankPromotion({heroId:e.id,heroName:e.name,heroClass:e.class,previousRank:a.currentRank,newRank:i}),{promoted:!0,newRank:i,celebration:n}}createCelebration(e,a){const r=Ka[e],i=St[e]||[];let n="ascension";return e==="S"?n="legendary":["A","B"].includes(e)&&(n="epic"),{rank:e,title:`Promoção para ${r.name}!`,message:`Parabéns, ${a.name}! Você alcançou o rank ${e} - ${r.name}. ${r.description}`,rewards:i.map(o=>({...o,unlocked:!0})),animationType:n,soundEffect:e==="S"?"legendary_fanfare":"rank_up_trumpet",particleEffect:e==="S"?"golden_explosion":"sparkle_burst"}}getNotableAchievement(e,a){const r=[`Alcançou ${e.progression.xp} XP total`,`Completou ${e.stats.questsCompleted||0} missões`,`Nível ${e.progression.level} conquistado`,`Classe ${e.class} dominada`];return e.achievements&&e.achievements.length>0&&r.push(e.achievements[e.achievements.length-1]),r[Math.floor(Math.random()*r.length)]}calculateRankPoints(e){var l,c;const a=e.progression.xp,r=(e.stats.questsCompleted||0)*50,i=e.progression.level*100,n=(((l=e.titles)==null?void 0:l.length)||0)*200,o=(((c=e.achievements)==null?void 0:c.length)||0)*150;return a+r+i+n+o}createComparison(e,a){return{heroId:e.id,heroName:e.name,rank:this.calculateRank(e),level:e.progression.level,totalXP:e.progression.xp,missionsCompleted:e.stats.questsCompleted||0,rankPoints:this.calculateRankPoints(e),position:a}}checkPendingRewards(e,a){const r=this.calculateRank(e),i=St[r]||[],n=a.unlockedRewards.map(o=>o.name);return i.filter(o=>!n.includes(o.name))}initializeRankData(e){var r;const a=this.calculateRank(e);return{currentRank:a,rankHistory:[{rank:a,achievedAt:new Date,heroLevel:e.progression.level,notableAchievement:"Início da jornada épica",celebrationViewed:!0}],totalRankPoints:this.calculateRankPoints(e),rankProgress:this.calculateProgress(e),unlockedRewards:((r=St[a])==null?void 0:r.map(i=>({...i,unlocked:!0})))||[],pendingCelebrations:[],rankAchievements:{fastestPromotion:0,highestRankReached:a,totalPromotions:0,legendaryStoriesUnlocked:0}}}updateRankData(e,a){const r=this.calculateRank(e),i=this.calculateProgress(e),n=this.calculateRankPoints(e);if(r!==a.currentRank){const o=this.promoteHero(e,a);if(o.promoted&&o.newRank&&o.celebration){const l={rank:o.newRank,achievedAt:new Date,heroLevel:e.progression.level,notableAchievement:this.getNotableAchievement(e,o.newRank),celebrationViewed:!1};return{...a,currentRank:o.newRank,rankHistory:[...a.rankHistory,l],totalRankPoints:n,rankProgress:i,pendingCelebrations:[...a.pendingCelebrations,o.celebration],rankAchievements:{...a.rankAchievements,highestRankReached:o.newRank,totalPromotions:a.rankAchievements.totalPromotions+1}}}}return{...a,totalRankPoints:n,rankProgress:i}}getRankInfo(e){return Ka[e]}getRankRewards(e){return St[e]||[]}estimateTimeToNextRank(e){const a=this.calculateProgress(e);if(!a.nextRank)return{days:0,description:"Rank máximo alcançado!"};const r=a.requiredXP-a.currentXP,i=a.requiredMissions-a.currentMissions,n=Math.ceil(r/100),l=Math.max(n,i);let c="";return l<=1?c="Muito próximo da promoção!":l<=7?c=`Aproximadamente ${l} dias`:l<=30?c=`Cerca de ${Math.ceil(l/7)} semanas`:c=`Aproximadamente ${Math.ceil(l/30)} meses`,{days:l,description:c}}};F(De,"instance");let Ps=De;const J=Ps.getInstance(),pc=t=>{const e=[],a=Object.values(t).reduce((r,i)=>r+i,0);return a>18&&e.push(`Total de pontos (${a}) excede o máximo de 18`),Object.entries(t).forEach(([r,i])=>{i<0&&e.push(`${r} não pode ser negativo`),i>10&&e.push(`${r} não pode exceder 10 pontos`)}),{isValid:e.length===0,errors:e}},hc=(t,e)=>{const a={...t};return[e.equippedWeapon,e.equippedArmor,e.equippedAccessory].filter(Boolean).forEach(i=>{const n=ee.find(o=>o.id===i);n!=null&&n.bonus&&Object.entries(n.bonus).forEach(([o,l])=>{l&&o in a&&(a[o]+=l)})}),a},At=(t,e,a,r)=>{const i=r?hc(t,r):t;let n=0,o=0;switch(e){case"guerreiro":n=10,o=3;break;case"mago":n=6,o=10;break;case"ladino":n=8,o=6;break;case"clerigo":n=8,o=8;break;case"patrulheiro":n=8,o=6;break;case"paladino":n=10,o=5;break;default:n=8,o=6}const l=n+Math.floor(i.constituicao/2)*a,c=o+Math.floor(i.inteligencia/2)*a,m=Math.floor(i.destreza/2),d=10+Math.floor(i.destreza/4);return{hp:l,mp:c,initiative:m,armorClass:d,currentHp:l,currentMp:c}};function xc(t){return t*100+(t-1)*50}function Ya(t,e){let a=e;for(;t>=xc(a+1);)a++;return a}const V=vl()(Cl((t,e)=>({heroes:[],selectedHeroId:null,availableQuests:[],guilds:[],createHero:a=>{const r=new Date().toISOString(),i=pc(a.attributes);if(!i.isValid)throw new Error(`Atributos inválidos: ${i.errors.join(", ")}`);const n={items:{"pocao-pequena":2},equippedWeapon:void 0,equippedArmor:void 0,equippedAccessory:void 0},o={id:_a(),...a,level:1,derivedAttributes:At(a.attributes,a.class,1,n),element:a.element,skills:a.skills,image:a.image,battleQuote:a.battleQuote,progression:{xp:0,level:1,gold:100,reputation:0,titles:[],achievements:[]},titles:[{id:"novato",name:"Novato",description:"Primeiro passo na jornada épica",badge:"🌱",category:"achievement",rarity:"comum",unlockedAt:r}],activeTitle:"novato",inventory:n,activeQuests:[],completedQuests:[],reputationFactions:[{id:"guarda",name:"Guarda da Cidade",reputation:0,level:"neutral"},{id:"comerciantes",name:"Comerciantes",reputation:0,level:"neutral"},{id:"ladroes",name:"Ladrões",reputation:0,level:"neutral"},{id:"clero",name:"Clero",reputation:0,level:"neutral"},{id:"cultistas",name:"Cultistas",reputation:0,level:"neutral"},{id:"exploradores",name:"Exploradores",reputation:0,level:"neutral"}],dailyGoals:[],achievements:[],stats:{questsCompleted:0,totalCombats:0,totalPlayTime:0,lastActiveAt:r},createdAt:r,updatedAt:r};return o.rankData=J.initializeRankData(o),t(l=>({heroes:[...l.heroes,o],selectedHeroId:o.id})),Ze.heroCreated(o.id,{class:o.class,attributes:o.attributes,timestamp:r}),e().refreshQuests(1),o},updateHero:(a,r)=>{t(i=>({heroes:i.heroes.map(n=>{if(n.id!==a)return n;const o={...n,...r,updatedAt:new Date().toISOString()};if(r.attributes||r.class||r.level||r.inventory){const l=r.attributes?{...n.attributes,...r.attributes}:n.attributes,c=r.class||n.class,m=r.level||n.progression.level,d=r.inventory||n.inventory;o.derivedAttributes=At(l,c,m,d)}return o})}))},exportHeroJson:a=>{const r=e().heroes.find(i=>i.id===a);if(!r)return"";try{return JSON.stringify(r,null,2)}catch{return""}},deleteHero:a=>{t(r=>({heroes:r.heroes.filter(i=>i.id!==a),selectedHeroId:r.selectedHeroId===a?null:r.selectedHeroId}))},selectHero:a=>{t({selectedHeroId:a})},refreshQuests:(a=1)=>{const r=e(),i=r.getSelectedHero();let n=0;if(i&&i.progression.guildId){const l=r.guilds.find(c=>c.id===i.progression.guildId);l&&(n=l.level||1,console.log("🏰 Herói está na guilda:",l.name,"Nível:",n))}console.log("🔄 Gerando missões - Herói Level:",a,"Guilda Level:",n);const o=Fl(a,n);console.log("📋 Missões geradas:",o.length,"total,",o.filter(l=>l.isGuildQuest).length,"de guilda"),t({availableQuests:o})},acceptQuest:(a,r)=>{console.log("🔍 acceptQuest chamada:",{heroId:a,questId:r});const i=e(),n=i.heroes.find(l=>l.id===a),o=i.availableQuests.find(l=>l.id===r);return console.log("👤 Herói encontrado:",n?`${n.name} (Level ${n.progression.level})`:"Não encontrado"),console.log("📋 Missão encontrada:",o?`${o.title} (Level ${o.levelRequirement})`:"Não encontrada"),!n||!o?(console.log("❌ Herói ou missão não encontrados"),!1):n.progression.level<o.levelRequirement?(console.log("❌ Nível insuficiente:",n.progression.level,"<",o.levelRequirement),!1):n.activeQuests.length>=3?(console.log("❌ Máximo de missões ativas atingido:",n.activeQuests.length),!1):(console.log("✅ Todos os requisitos atendidos, adicionando missão às ativas"),e().updateHero(a,{activeQuests:[...n.activeQuests,r]}),console.log("🎉 Missão aceita com sucesso!"),!0)},completeQuest:(a,r,i=!1)=>{var h,p,u,x,g,b;console.log("🎯 completeQuest chamada:",{heroId:a,questId:r,autoResolve:i});const n=e(),o=n.heroes.find(v=>v.id===a),l=n.availableQuests.find(v=>v.id===r);if(console.log("👤 Herói encontrado:",o?`${o.name} (Level ${o.progression.level})`:"Não encontrado"),console.log("📋 Missão encontrada:",l?`${l.title} (Level ${l.levelRequirement})`:"Não encontrada"),console.log("🔍 Missão está ativa?",o==null?void 0:o.activeQuests.includes(r)),!o||!l||!o.activeQuests.includes(r))return console.log("❌ Falha na validação inicial"),null;let c=null;if(l.enemies&&l.enemies.length>0){const v=l.isGuildQuest||!1;if(c=i?Gl(o,l.enemies,v):Hl(o,l.enemies),!c.victory)return l.failurePenalty&&(l.failurePenalty.gold&&e().gainGold(a,-l.failurePenalty.gold),l.failurePenalty.reputation&&e().updateHero(a,{progression:{...o.progression,reputation:Math.max(0,o.progression.reputation+l.failurePenalty.reputation)}})),c}console.log("🎉 Missão completada com sucesso! Aplicando recompensas..."),console.log("💰 Recompensas:",l.rewards),console.log("⚔️ Resultado do combate:",c),e().gainXP(a,(((h=l.rewards)==null?void 0:h.xp)||0)+((c==null?void 0:c.xpGained)||0)),e().gainGold(a,(((p=l.rewards)==null?void 0:p.gold)||0)+((c==null?void 0:c.goldGained)||0)),(u=l.rewards)!=null&&u.items&&l.rewards.items.forEach(v=>{e().addItemToInventory(a,v.id,v.qty)}),c!=null&&c.itemsGained&&c.itemsGained.forEach(v=>{e().addItemToInventory(a,v.id,1)});const m=e().heroes.find(v=>v.id===a);e().updateHero(a,{activeQuests:m.activeQuests.filter(v=>v!==r),completedQuests:[...m.completedQuests,r],stats:{...m.stats,questsCompleted:m.stats.questsCompleted+1,totalCombats:m.stats.totalCombats+(((x=l.enemies)==null?void 0:x.length)||0),lastActiveAt:new Date().toISOString()}}),e().checkAchievements(a);const d=e().heroes.find(v=>v.id===a);if(d){if(!d.rankData){const w=J.initializeRankData(d);e().updateHero(a,{rankData:w}),d.rankData=w}const v=J.updateRankData(d,d.rankData);e().updateHero(a,{rankData:v})}return e().updateDailyGoalProgress(a,"quest-completed",1),l.difficulty==="épica"&&e().updateDailyGoalProgress(a,"epic-quest-completed",1),l.enemies&&l.enemies.length>0&&e().updateDailyGoalProgress(a,"enemy-defeated",l.enemies.length),we.updateEventProgress(a,"quests-completed",1),l.difficulty==="epica"?st.epicQuestCompleted({heroId:a,heroName:o.name,heroClass:o.class,questName:l.title,questDifficulty:l.difficulty,questReward:l.rewards}):st.questCompleted({heroId:a,heroName:o.name,heroClass:o.class,questName:l.title,questDifficulty:l.difficulty,questReward:l.rewards}),Ze.questCompleted(a,{questName:l.title,questDifficulty:l.difficulty,questType:l.type,xpReward:((g=l.rewards)==null?void 0:g.xp)||0,goldReward:((b=l.rewards)==null?void 0:b.gold)||0}),console.log("✅ completeQuest finalizada com sucesso!"),c},gainXP:(a,r)=>{const i=e().heroes.find(m=>m.id===a);if(!i)return;const n=i.progression.xp+r,o=Ya(n,i.progression.level),l={progression:{...i.progression,xp:n,level:o}};o>i.progression.level&&(l.level=o,l.derivedAttributes=At(i.attributes,i.class,o)),e().updateHero(a,l);const c=e().heroes.find(m=>m.id===a);if(c){if(!c.rankData){const d=J.initializeRankData(c);e().updateHero(a,{rankData:d}),c.rankData=d}const m=J.updateRankData(c,c.rankData);e().updateHero(a,{rankData:m})}e().updateDailyGoalProgress(a,"xp-gained",r),o>i.progression.level&&e().updateDailyGoalProgress(a,"level-up",1),we.updateEventProgress(a,"xp-gained",r),o>i.progression.level&&(we.updateEventProgress(a,"levels-gained",o-i.progression.level),st.levelUp({heroId:a,heroName:i.name,heroClass:i.class,heroLevel:o,previousLevel:i.progression.level}),Ze.levelUp(a,{newLevel:o,previousLevel:i.progression.level,heroClass:i.class})),Ze.xpGained(a,r)},gainGold:(a,r)=>{const i=e().heroes.find(o=>o.id===a);if(!i)return;e().updateHero(a,{progression:{...i.progression,gold:Math.max(0,i.progression.gold+r)}});const n=e().heroes.find(o=>o.id===a);if(n){if(!n.rankData){const l=J.initializeRankData(n);e().updateHero(a,{rankData:l}),n.rankData=l}const o=J.updateRankData(n,n.rankData);e().updateHero(a,{rankData:o})}r>0&&e().updateDailyGoalProgress(a,"gold-earned",r),r>0&&we.updateEventProgress(a,"gold-earned",r),r>0&&Ze.goldGained(a,r)},addItemToInventory:(a,r,i=1)=>{const n=e().heroes.find(l=>l.id===a);if(!n)return;const o=n.inventory.items[r]||0;e().updateHero(a,{inventory:{...n.inventory,items:{...n.inventory.items,[r]:o+i}}})},checkAchievements:a=>{const r=e().heroes.find(n=>n.id===a);if(!r)return[];const i=[];return Di.forEach(n=>{if(r.progression.achievements.some(c=>c.id===n.id))return;let l=0;switch(n.id){case"primeira-missao":l=r.stats.questsCompleted>=1?1:0;break;case"heroi-da-vila":l=r.stats.questsCompleted;break;case"cacador-experiente":l=Math.min(n.maxProgress,Math.floor(r.stats.questsCompleted*.4));break;case"explorador-corajoso":l=Math.min(n.maxProgress,Math.floor(r.stats.questsCompleted*.3));break;case"lenda-epica":l=Math.min(n.maxProgress,Math.floor(r.stats.questsCompleted*.1));break}if(l>=n.maxProgress){const c={...n,unlockedAt:new Date().toISOString(),progress:n.maxProgress};i.push(c)}}),i.length>0&&e().updateHero(a,{progression:{...r.progression,achievements:[...r.progression.achievements,...i]}}),i},buyItem:(a,r)=>{const i=e().heroes.find(o=>o.id===a);if(!i)return!1;const n=qi(i,r);return n.success&&n.item&&(e().updateHero(a,{progression:{...i.progression,gold:n.newGold}}),e().addItemToInventory(a,r,1)),n.success},sellItem:(a,r,i=1)=>{const n=e().heroes.find(l=>l.id===a);if(!n)return!1;const o=zl(n,r,i);if(o.success){e().updateHero(a,{progression:{...n.progression,gold:o.newGold}});const l=n.inventory.items[r]||0;e().updateHero(a,{inventory:{...n.inventory,items:{...n.inventory.items,[r]:Math.max(0,l-i)}}})}return o.success},equipItem:(a,r)=>{const i=e().heroes.find(o=>o.id===a);if(!i)return!1;const n=Ul(i,r);if(n.success){const o=ee.find(c=>c.id===r);if(!o)return!1;const l={...i.inventory};switch(o.type){case"weapon":l.equippedWeapon=r;break;case"armor":l.equippedArmor=r;break;case"accessory":l.equippedAccessory=r;break}e().updateHero(a,{inventory:l})}return n.success},useItem:(a,r)=>{const i=e().heroes.find(o=>o.id===a);if(!i)return!1;const n=Ql(i,r);if(n.success){const o=i.inventory.items[r]||0;if(e().updateHero(a,{inventory:{...i.inventory,items:{...i.inventory.items,[r]:Math.max(0,o-1)}}}),n.effects){const l={};n.effects.hp!==void 0&&(l.derivedAttributes={...i.derivedAttributes,currentHp:n.effects.hp}),n.effects.mp!==void 0&&(l.derivedAttributes={...l.derivedAttributes||i.derivedAttributes,currentMp:n.effects.mp}),n.effects.xp!==void 0&&e().gainXP(a,n.effects.xp),Object.keys(l).length>0&&e().updateHero(a,l)}}return n.success},createGuild:(a,r,i)=>{const n=e().heroes.find(l=>l.id===a);if(!n||n.progression.guildId)return null;const o={id:_a(),name:r,description:i,members:[a],guildXP:0,bankGold:0,createdAt:new Date().toISOString(),quests:[]};return t(l=>({guilds:[...l.guilds,o]})),e().updateHero(a,{progression:{...n.progression,guildId:o.id}}),o},joinGuild:(a,r)=>{const i=e(),n=i.heroes.find(l=>l.id===a),o=i.guilds.find(l=>l.id===r);return!n||!o||n.progression.guildId?!1:(t(l=>({guilds:l.guilds.map(c=>c.id===r?{...c,members:[...c.members,a]}:c)})),e().updateHero(a,{progression:{...n.progression,guildId:r}}),!0)},leaveGuild:a=>{const r=e().heroes.find(i=>i.id===a);return!r||!r.progression.guildId?!1:(t(i=>({guilds:i.guilds.map(n=>n.id===r.progression.guildId?{...n,members:n.members.filter(o=>o!==a)}:n)})),e().updateHero(a,{progression:{...r.progression,guildId:void 0}}),!0)},setActiveTitle:a=>{const r=e().getSelectedHero();if(r){if(a&&!r.titles.find(i=>i.id===a)){console.warn("Título não encontrado nos títulos do herói");return}e().updateHero(r.id,{activeTitle:a})}},updateAchievementProgress:()=>{const a=e().getSelectedHero();a&&console.log("Atualizando progresso de conquistas para:",a.name)},updateReputation:(a,r)=>{const i=e().getSelectedHero();i&&(Yl(i,a,r),e().updateHero(i.id,{progression:{...i.progression,reputation:i.progression.reputation+r}}))},processReputationEvents:()=>{const a=e().getSelectedHero();if(!a)return;Zl(a).forEach(i=>{console.log("Evento de reputação:",i)})},getLeaderboards:()=>{const a=e().heroes;return sa(a)},getHeroRanking:a=>{const r=e().heroes,i=r.find(n=>n.id===a);return i?Hi(i,r):null},calculateHeroScore:a=>{const r=e().heroes.find(i=>i.id===a);return r?Gi(r):0},getSelectedHero:()=>{const{heroes:a,selectedHeroId:r}=e();return a.find(i=>i.id===r)},getHeroQuests:a=>{const r=e(),i=r.heroes.find(n=>n.id===a);return i?r.availableQuests.filter(n=>i.activeQuests.includes(n.id)):[]},getHeroGuild:a=>{const r=e(),i=r.heroes.find(n=>n.id===a);if(!(!i||!i.progression.guildId))return r.guilds.find(n=>n.id===i.progression.guildId)},generateDailyGoalsForHero:a=>{t(r=>{const i=r.heroes.findIndex(c=>c.id===a);if(i===-1)return r;const n=r.heroes[i],o=ic(n),l=[...r.heroes];return l[i]={...n,dailyGoals:o},{...r,heroes:l}})},updateDailyGoalProgress:(a,r,i=1)=>{t(n=>{const o=n.heroes.findIndex(h=>h.id===a);if(o===-1)return n;const l=n.heroes[o];if(!l.dailyGoals||l.dailyGoals.length===0)return n;const c=Xa(l.dailyGoals);let m=nc(c,r,i);m=oc(m);const d=[...n.heroes];return d[o]={...l,dailyGoals:m},{...n,heroes:d}})},completeDailyGoal:(a,r)=>{t(i=>{const n=i.heroes.findIndex(p=>p.id===a);if(n===-1)return i;const o=i.heroes[n];if(!o.dailyGoals)return i;const l=o.dailyGoals.find(p=>p.id===r);if(!l||!l.completed)return i;const c=_i(l),m={...o,progression:{...o.progression,xp:o.progression.xp+c.xp,gold:o.progression.gold+c.gold}},d=Ya(m.progression.xp,m.progression.level);d>m.progression.level&&(m.level=d,m.progression.level=d,m.derivedAttributes=At(m.attributes,m.class,d)),c.items&&c.items.forEach(p=>{const u=m.inventory.items[p.id]||0;m.inventory.items[p.id]=u+1});const h=[...i.heroes];return h[n]=m,{...i,heroes:h}})},cleanupExpiredGoals:a=>{t(r=>{const i=r.heroes.findIndex(c=>c.id===a);if(i===-1)return r;const n=r.heroes[i];if(!n.dailyGoals)return r;const o=Xa(n.dailyGoals),l=[...r.heroes];return l[i]={...n,dailyGoals:o},{...r,heroes:l}})},shouldShowOnboarding:()=>{const a=e();return!localStorage.getItem("heroforge-onboarding-shown")&&a.heroes.length===0},markOnboardingShown:()=>{localStorage.setItem("heroforge-onboarding-shown","true")},triggerOnboardingForNewUser:()=>{const a=e();a.shouldShowOnboarding()&&(O.loadState(),O.getAvailableFlows().length>0&&!O.getCurrentStep()&&O.startFlow("first-steps"),a.markOnboardingShown())},promoteHero:a=>{const r=e().heroes.find(o=>o.id===a);if(!r)return!1;if(!r.rankData){const o=J.initializeRankData(r);e().updateHero(a,{rankData:o}),r.rankData=o}const i=J.calculateProgress(r);if(!i.canPromote)return!1;const n=J.promoteHero(r,r.rankData);if(n.promoted&&n.newRank&&n.celebration){const o=J.updateRankData(r,r.rankData);return e().updateHero(a,{rankData:o}),st.rankPromotion({heroId:a,heroName:r.name,heroClass:r.class,newRank:n.newRank,previousRank:i.currentRank}),!0}return!1},getHeroRankProgress:a=>{const r=e().heroes.find(i=>i.id===a);if(!r)return null;if(!r.rankData){const i=J.initializeRankData(r);e().updateHero(a,{rankData:i}),r.rankData=i}return{progress:J.calculateProgress(r),rankData:r.rankData,estimate:J.estimateTimeToNextRank(r)}},getRankLeaderboard:()=>e().heroes.map(r=>J.createComparison(r,0)).sort((r,i)=>{const n=["S","A","B","C","D","E","F"],o=n.indexOf(r.rank),l=n.indexOf(i.rank);return o!==l?o-l:i.rankPoints-r.rankPoints}).map((r,i)=>({...r,position:i+1})),markCelebrationViewed:(a,r)=>{var o,l,c;const i=e().heroes.find(m=>m.id===a);if(!i||!((l=(o=i.rankData)==null?void 0:o.pendingCelebrations)!=null&&l[r]))return;const n=[...((c=i.rankData)==null?void 0:c.pendingCelebrations)||[]];n.splice(r,1),e().updateHero(a,{rankData:{...i.rankData,pendingCelebrations:n}})}}),{name:"hero-forge-epic-storage",partialize:t=>({heroes:t.heroes,selectedHeroId:t.selectedHeroId,availableQuests:t.availableQuests,guilds:t.guilds}),migrate:(t,e)=>(t!=null&&t.heroes&&(t.heroes=t.heroes.map(a=>{const r={...a,reputationFactions:a.reputationFactions||[{id:"guarda",name:"Guarda da Cidade",reputation:0,level:"neutral"},{id:"comerciantes",name:"Comerciantes",reputation:0,level:"neutral"},{id:"ladroes",name:"Ladrões",reputation:0,level:"neutral"},{id:"clero",name:"Clero",reputation:0,level:"neutral"},{id:"cultistas",name:"Cultistas",reputation:0,level:"neutral"},{id:"exploradores",name:"Exploradores",reputation:0,level:"neutral"}],dailyGoals:a.dailyGoals||[],achievements:a.achievements||[],stats:a.stats||{questsCompleted:0,totalCombats:0,totalPlayTime:0,lastActiveAt:new Date().toISOString(),enemiesDefeated:0,goldEarned:0,itemsFound:0,achievementsUnlocked:0,loginStreak:0,lastLogin:new Date}};return a.rankData||(r.rankData=J.initializeRankData(r)),r})),t)})),gc=({hero:t})=>{var u;const e=x=>x*100+(x-1)*50,a=e(t.progression.level),r=e(t.progression.level+1),i=t.progression.xp-a,n=r-a,o=Math.max(0,Math.min(100,i/n*100)),l=t.attributes.constituicao*5,c=Math.floor((t.derivedAttributes.currentHp||t.derivedAttributes.hp)/t.derivedAttributes.hp*l),m=c/l*100,d=t.activeQuests[0],h=x=>x>=70?"bg-green-500":x>=30?"bg-yellow-500":"bg-red-500",p=x=>x>=80?"bg-blue-500":x>=50?"bg-blue-400":"bg-blue-300";return s.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-gray-900/95 backdrop-blur-sm border border-gray-700 rounded-lg p-4 min-w-80 shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-400 to-amber-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:t.progression.level}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white font-semibold text-sm",children:t.name}),s.jsx("div",{className:"text-gray-400 text-xs",children:t.class})]})]}),s.jsx("div",{className:"text-amber-400 text-lg",children:"⚡"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-blue-400 text-xs font-medium",children:"Experiência"}),s.jsxs("span",{className:"text-gray-300 text-xs",children:[i,"/",n," XP"]})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${p(o)}`,style:{width:`${o}%`}})}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[o.toFixed(1),"% para o nível ",t.progression.level+1]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-green-400 text-xs font-medium",children:"Stamina"}),s.jsxs("span",{className:"text-gray-300 text-xs",children:[c,"/",l]})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${h(t.stamina)}`,style:{width:`${m}%`}})}),t.stamina<30&&s.jsx("div",{className:"text-xs text-red-400 mt-1 flex items-center",children:"⚠️ Stamina baixa - Descanse para recuperar"})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-purple-400 text-xs font-medium",children:"Missão Ativa"}),d&&s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-green-400 text-xs",children:"Em Progresso"})]})]}),d?s.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-purple-400 text-xs font-medium",children:"Missão Ativa"}),s.jsx("span",{className:"text-gray-400 text-xs",children:"⚔️"})]}),s.jsx("div",{className:"text-white text-sm font-medium mb-1 truncate",children:"Missão em Andamento"}),s.jsx("div",{className:"text-gray-400 text-xs mb-2",children:"Você tem uma missão ativa"}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("span",{className:"text-blue-400",children:"Em progresso"})}),s.jsx("span",{className:"text-gray-500",children:"⭐"})]})]}):s.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-center",children:[s.jsx("div",{className:"text-gray-400 text-sm",children:"Nenhuma missão ativa"}),s.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Visite o Quadro de Missões"})]})]}),t.dailyGoals&&t.dailyGoals.length>0&&s.jsxs("div",{className:"border-t border-gray-700 pt-3 mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"text-white text-sm font-medium flex items-center gap-1",children:"🎯 Metas Diárias"}),s.jsxs("div",{className:"text-xs text-gray-400",children:[t.dailyGoals.filter(x=>x.completed).length,"/",t.dailyGoals.length]})]}),s.jsxs("div",{className:"space-y-1",children:[t.dailyGoals.slice(0,2).map(x=>{const g=x.progress/x.maxProgress*100;return s.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[s.jsx("span",{className:`text-gray-300 ${x.completed?"line-through":""}`,children:x.description}),x.completed&&s.jsx("span",{className:"text-green-400",children:"✓"})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1",children:s.jsx("div",{className:`h-1 rounded-full transition-all duration-300 ${x.completed?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min(g,100)}%`}})})]},x.id)}),t.dailyGoals.length>2&&s.jsxs("div",{className:"text-center text-xs text-gray-500 mt-1",children:["+",t.dailyGoals.length-2," mais metas"]})]})]}),s.jsx("div",{className:"border-t border-gray-700 pt-3 mt-3",children:s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center","data-testid":"hero-stats",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg p-2",children:[s.jsx("div",{className:"text-yellow-400 text-lg",children:"🪙"}),s.jsx("div",{className:"text-white text-sm font-medium",children:t.progression.gold}),s.jsx("div",{className:"text-gray-400 text-xs",children:"Ouro"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-2",children:[s.jsx("div",{className:"text-green-400 text-lg",children:"✅"}),s.jsx("div",{className:"text-white text-sm font-medium",children:t.completedQuests.length}),s.jsx("div",{className:"text-gray-400 text-xs",children:"Missões"})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-2",children:[s.jsx("div",{className:"text-purple-400 text-lg",children:"👑"}),s.jsx("div",{className:"text-white text-sm font-medium",children:((u=t.titles)==null?void 0:u.length)||0}),s.jsx("div",{className:"text-gray-400 text-xs",children:"Títulos"})]})]})})]})},fc=({notification:t,onRemove:e})=>{j.useEffect(()=>{const i=setTimeout(()=>{e(t.id)},t.duration||4e3);return()=>clearTimeout(i)},[t.id,t.duration,e]);const a=i=>{switch(i){case"xp":return"bg-blue-600 border-blue-500";case"levelup":return"bg-purple-600 border-purple-500";case"gold":return"bg-yellow-600 border-yellow-500";case"item":return"bg-green-600 border-green-500";case"achievement":return"bg-amber-600 border-amber-500";case"quest":return"bg-indigo-600 border-indigo-500";case"stamina":return"bg-red-600 border-red-500";default:return"bg-gray-600 border-gray-500"}},r=(i,n)=>{if(n)return n;switch(i){case"xp":return"⭐";case"levelup":return"🎉";case"gold":return"🪙";case"item":return"📦";case"achievement":return"🏆";case"quest":return"⚔️";case"stamina":return"💤";default:return"📢"}};return s.jsx("div",{className:`${a(t.type)} border-l-4 p-4 rounded-r-lg shadow-lg transform transition-all duration-300 animate-slide-in-right mb-2`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"text-2xl mr-3",children:r(t.type,t.icon)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-white font-semibold text-sm",children:[t.title,t.value&&s.jsxs("span",{className:"ml-2 text-lg font-bold",children:["+",t.value]})]}),s.jsx("div",{className:"text-gray-200 text-xs mt-1",children:t.message})]}),s.jsx("button",{onClick:()=>e(t.id),className:"text-white hover:text-gray-300 ml-2 text-lg",children:"×"})]})})},bc=({notifications:t,onRemove:e})=>s.jsx("div",{className:"fixed top-20 right-4 z-40 max-w-sm space-y-2",children:t.map(a=>s.jsx(fc,{notification:a,onRemove:e},a.id))}),vc=()=>{const[t,e]=j.useState([]),a=p=>{const u=Date.now().toString()+Math.random().toString(36).substr(2,9);e(x=>[...x,{...p,id:u}])};return{notifications:t,addNotification:a,removeNotification:p=>{e(u=>u.filter(x=>x.id!==p))},clearAllNotifications:()=>{e([])},notifyXPGain:(p,u)=>{a({type:"xp",title:"XP Ganho!",message:`Você ganhou experiência de ${u}`,value:p,duration:3e3})},notifyLevelUp:p=>{a({type:"levelup",title:"Level Up!",message:`Parabéns! Você alcançou o nível ${p}!`,duration:5e3})},notifyGoldGain:(p,u)=>{a({type:"gold",title:"Ouro Ganho!",message:`Você ganhou ouro de ${u}`,value:p,duration:3e3})},notifyItemReceived:p=>{a({type:"item",title:"Item Recebido!",message:`Você recebeu: ${p}`,duration:4e3})},notifyAchievement:p=>{a({type:"achievement",title:"Conquista Desbloqueada!",message:p,duration:5e3})},notifyQuestComplete:p=>{a({type:"quest",title:"Missão Completa!",message:`Você completou: ${p}`,duration:4e3})},notifyStaminaLow:()=>{a({type:"stamina",title:"Stamina Baixa!",message:"Descanse para recuperar sua energia",duration:3e3})}}},yc=()=>{const[t,e]=j.useState(!1),a=Si(),{getSelectedHero:r}=V(),i=r();if(!i)return null;const n=[{id:"quests",label:"Missões",icon:"⚔️",path:"/quests",color:"bg-blue-600 hover:bg-blue-700",badge:i.activeQuests.length>0?i.activeQuests.length:null},{id:"training",label:"Treino",icon:"💪",path:"/training",color:"bg-red-600 hover:bg-red-700",badge:(i.derivedAttributes.currentHp||i.derivedAttributes.hp)<i.derivedAttributes.hp*.3?"!":null},{id:"shop",label:"Loja",icon:"🏪",path:"/shop",color:"bg-green-600 hover:bg-green-700",badge:i.progression.gold>=100?"$":null},{id:"daily-goals",label:"Metas Diárias",icon:"🎯",path:"/daily-goals",color:"bg-indigo-600 hover:bg-indigo-700",badge:i.dailyGoals?i.dailyGoals.filter(l=>l.completed).length:null},{id:"tutorial",label:"Tutorial",icon:"🎓",path:"/tutorial",color:"bg-orange-600 hover:bg-orange-700"},{id:"events",label:"Eventos",icon:"🎪",path:"/events",color:"bg-pink-600 hover:bg-pink-700"},{id:"activities",label:"Atividades",icon:"📰",path:"/activities",color:"bg-cyan-600 hover:bg-cyan-700"},{id:"guilds",label:"Guildas",icon:"🏰",path:"/guilds",color:"bg-purple-600 hover:bg-purple-700"},{id:"leaderboards",label:"Rankings",icon:"🏆",path:"/leaderboards",color:"bg-yellow-600 hover:bg-yellow-700"},{id:"metrics",label:"Métricas",icon:"📊",path:"/metrics",color:"bg-blue-600 hover:bg-blue-700"}],o=l=>a.pathname===l;return s.jsxs("div",{className:"fixed bottom-4 left-4 z-50",children:[s.jsx("button",{onClick:()=>e(!t),className:`w-14 h-14 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-lg transition-all duration-300 flex items-center justify-center ${t?"rotate-45":""}`,children:s.jsx("span",{className:"text-2xl",children:"⚡"})}),t&&s.jsxs("div",{className:"absolute bottom-16 left-0 space-y-2 animate-slide-in-up",children:[n.map((l,c)=>s.jsxs(q,{to:l.path,"data-testid":`quick-nav-${l.id}`,onClick:()=>e(!1),className:`
                flex items-center space-x-3 px-4 py-3 rounded-lg text-white shadow-lg transition-all duration-300 min-w-40
                ${l.color}
                ${o(l.path)?"ring-2 ring-white ring-opacity-50":""}
                transform hover:scale-105
              `,style:{animationDelay:`${c*50}ms`},children:[s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"text-xl",children:l.icon}),l.badge&&s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center text-xs font-bold",children:l.badge})]}),s.jsx("span",{className:"font-medium",children:l.label})]},l.id)),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-white shadow-lg",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Status Rápido"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-blue-400",children:"⭐"}),s.jsxs("span",{children:["Nv. ",i.progression.level]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-yellow-400",children:"🪙"}),s.jsx("span",{children:i.progression.gold})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-green-400",children:"💚"}),s.jsxs("span",{children:[Math.floor((i.derivedAttributes.currentHp||i.derivedAttributes.hp)/i.derivedAttributes.hp*(i.attributes.constituicao*5)),"/",i.attributes.constituicao*5]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("span",{className:"text-purple-400",children:"⚔️"}),s.jsx("span",{children:i.activeQuests.length})]})]})]})]})]})},T={colors:{gold:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f"},bronze:{50:"#fdf8f6",100:"#f2e8e5",200:"#eaddd7",300:"#e0cfc5",400:"#d2bab0",500:"#bfa094",600:"#a18072",700:"#8b6f47",800:"#734a2e",900:"#5c3317"},silver:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"},royal:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7c3aed",800:"#6b21a8",900:"#581c87"},crimson:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b"}},gradients:{ranks:{F:"from-gray-400 to-gray-600",E:"from-emerald-400 to-emerald-600",D:"from-blue-400 to-blue-600",C:"from-purple-400 to-purple-600",B:"from-amber-400 to-amber-600",A:"from-red-400 to-red-600",S:"from-yellow-300 via-yellow-400 to-amber-500"},backgrounds:{primary:"from-slate-900 via-slate-800 to-slate-900",secondary:"from-slate-800 via-slate-700 to-slate-800",accent:"from-gold-900/20 via-gold-800/10 to-transparent",hero:"from-royal-900/30 via-royal-800/20 to-transparent",quest:"from-emerald-900/30 via-emerald-800/20 to-transparent",combat:"from-crimson-900/30 via-crimson-800/20 to-transparent"},buttons:{primary:"from-gold-500 via-gold-600 to-gold-700",secondary:"from-silver-500 via-silver-600 to-silver-700",success:"from-emerald-500 via-emerald-600 to-emerald-700",danger:"from-crimson-500 via-crimson-600 to-crimson-700",royal:"from-royal-500 via-royal-600 to-royal-700"}},icons:{ranks:{F:"⚪",E:"🟢",D:"🔵",C:"🟣",B:"🟡",A:"🔴",S:"⭐"},classes:{Guerreiro:"⚔️",Mago:"🔮",Arqueiro:"🏹",Ladino:"🗡️",Paladino:"🛡️",Bárbaro:"🪓",Druida:"🌿",Feiticeiro:"✨"},activities:{"quest-completed":"🎯","epic-quest-completed":"🌟","level-up":"📈","achievement-unlocked":"🏆","title-earned":"👑","event-completed":"🎪","daily-goal-completed":"✅","combat-victory":"⚔️","rank-promotion":"🏆"},ui:{close:"✕",menu:"☰",settings:"⚙️",profile:"👤",stats:"📊",inventory:"🎒",guild:"🏰",leaderboard:"🏆",calendar:"📅",notification:"🔔"}},effects:{shadows:{small:"shadow-lg shadow-black/25",medium:"shadow-xl shadow-black/30",large:"shadow-2xl shadow-black/40",glow:"shadow-2xl shadow-gold-500/20",royal:"shadow-2xl shadow-royal-500/20",crimson:"shadow-2xl shadow-crimson-500/20"},borders:{gold:"border border-gold-500/30",silver:"border border-silver-500/30",royal:"border border-royal-500/30",crimson:"border border-crimson-500/30",emerald:"border border-emerald-500/30"},animations:{float:"animate-bounce",pulse:"animate-pulse",spin:"animate-spin",ping:"animate-ping"}},typography:{fonts:{heading:"font-bold tracking-wide",body:"font-medium",accent:"font-semibold tracking-wider uppercase"},sizes:{xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl"}},layout:{spacing:{xs:"p-2",sm:"p-4",md:"p-6",lg:"p-8",xl:"p-12"},rounded:{sm:"rounded-md",md:"rounded-lg",lg:"rounded-xl",full:"rounded-full"},containers:{card:"bg-slate-800 rounded-lg border border-slate-700 shadow-xl",panel:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl border border-slate-600 shadow-2xl",modal:"bg-gradient-to-br from-slate-900 to-black rounded-2xl border border-slate-600 shadow-2xl"}}},Es=t=>T.gradients.ranks[t]||"from-gray-400 to-gray-600",aa=t=>T.icons.ranks[t]||"🎖️",zi=t=>T.icons.classes[t]||"⚔️",jc=()=>{var l,c;const t=Si(),{getSelectedHero:e}=V(),a=e(),{notifications:r,removeNotification:i}=vc(),n=m=>t.pathname===m,o=m=>`hover:text-amber-400 transition-colors ${n(m)?"text-amber-400 font-semibold":""}`;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white",children:[s.jsx("header",{className:"bg-gradient-to-r from-slate-800 via-slate-700 to-slate-800 shadow-2xl shadow-amber-500/20",children:s.jsxs("div",{className:"container mx-auto px-4 py-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(q,{to:"/",className:"text-2xl font-bold text-amber-400 font-serif",children:[T.icons.ui.castle," Forjador de Heróis"]}),a&&s.jsxs("div",{className:"hidden md:flex items-center space-x-3 bg-slate-800 border border-amber-400 px-4 py-2 rounded-lg",children:[s.jsx("span",{className:"text-2xl",children:a.avatar}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium flex items-center space-x-2",children:[s.jsx("span",{children:a.name}),a.activeTitle&&a.titles.find(m=>m.id===a.activeTitle)&&s.jsxs("span",{className:"text-amber-400 text-xs",children:[(l=a.titles.find(m=>m.id===a.activeTitle))==null?void 0:l.badge,(c=a.titles.find(m=>m.id===a.activeTitle))==null?void 0:c.name]})]}),s.jsxs("div",{className:"text-xs text-amber-600",children:[zi(a.class)," ",a.class," • Nível ",a.progression.level]})]})]})]}),s.jsx("nav",{className:"mt-4",children:s.jsxs("ul",{className:"flex flex-wrap space-x-6",children:[s.jsx("li",{children:s.jsxs(q,{to:"/",className:o("/"),children:[T.icons.ui.users," Heróis"]})}),s.jsx("li",{children:s.jsxs(q,{to:"/create",className:o("/create"),children:[T.icons.ui.plus," Criar Herói"]})}),s.jsx("li",{children:s.jsxs(q,{to:"/progression",className:o("/progression"),children:[T.icons.ui.chart," Progressão"]})}),s.jsx("li",{children:s.jsxs(q,{to:"/evolution",className:o("/evolution"),children:[T.icons.ranks.Elite," Evolução"]})}),s.jsx("li",{children:s.jsxs(q,{to:"/quests",className:o("/quests"),children:[T.icons.ui.sword," Missões"]})}),s.jsx("li",{children:s.jsxs(q,{to:"/guilds",className:o("/guilds"),children:[T.icons.ui.castle," Guildas"]})}),s.jsx("li",{children:s.jsxs(q,{to:"/titles",className:o("/titles"),children:[T.icons.ranks.Mestre," Títulos"]})}),s.jsx("li",{children:s.jsxs(q,{to:"/leaderboards",className:o("/leaderboards"),children:[T.icons.ui.chart," Rankings"]})}),s.jsx("li",{children:s.jsxs(q,{to:"/playtest",className:o("/playtest"),children:[T.icons.ui.chart," Playtest"]})}),s.jsx("li",{children:s.jsx(q,{to:"/shop",className:o("/shop"),children:"🏪 Loja"})}),s.jsx("li",{children:s.jsx(q,{to:"/training",className:o("/training"),children:"💪 Treinamento"})}),s.jsx("li",{children:s.jsx(q,{to:"/ai-avatar",className:o("/ai-avatar"),children:"🎭 Avatar IA"})}),s.jsx("li",{children:s.jsx(q,{to:"/ai-missions",className:o("/ai-missions"),children:"🗡️ Missões IA"})}),s.jsx("li",{children:s.jsx(q,{to:"/ai-recommendations",className:o("/ai-recommendations"),children:"🧠 Recomendações IA"})})]})})]})}),s.jsx("main",{className:"container mx-auto py-8 px-4",children:s.jsx(Fo,{})}),a&&s.jsx(gc,{hero:a}),s.jsx(bc,{notifications:r,onRemove:i}),s.jsx(yc,{}),s.jsx("footer",{className:"bg-gray-800 py-6 mt-12",children:s.jsx("div",{className:"container mx-auto px-4 text-center text-gray-400",children:s.jsxs("p",{children:["© ",new Date().getFullYear()," Forjador de Heróis - Criado com React, TypeScript e Zustand"]})})})]})};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wc=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase()),Ja=t=>{const e=wc(t);return e.charAt(0).toUpperCase()+e.slice(1)},Ui=(...t)=>t.filter((e,a,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===a).join(" ").trim(),Cc=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:i="",children:n,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...kc,width:e,height:e,stroke:t,strokeWidth:r?Number(a)*24/Number(e):a,className:Ui("lucide",i),...!n&&!Cc(l)&&{"aria-hidden":"true"},...l},[...o.map(([m,d])=>j.createElement(m,d)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=(t,e)=>{const a=j.forwardRef(({className:r,...i},n)=>j.createElement(Sc,{ref:n,iconNode:e,className:Ui(`lucide-${Nc(Ja(t))}`,`lucide-${t}`,r),...i}));return a.displayName=Ja(t),a};/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Tc=H("award",Ac);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Za=H("calendar",Pc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Mc=H("camera",Ec);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],as=H("chart-column",Rc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$c=H("clock",Dc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Qi=H("crown",Ic);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lc=H("eye",Vc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],qc=H("funnel",Fc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Bc=H("grid-3x3",Oc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Gc=H("heart",Hc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],zc=H("list",_c);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],er=H("plus",Uc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Wc=H("search",Qc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Kc=H("sparkles",Xc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Jc=H("square-pen",Yc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ra=H("star",Zc);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]],td=H("sword",ed);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ot=H("target",sd);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],rd=H("trending-up",ad);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const id=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],rt=H("trophy",id);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],od=H("user-x",nd);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],tr=H("users",ld);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],dd=H("wand-sparkles",cd);/**
 * @license lucide-react v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ud=H("zap",md),sr={guerreiro:s.jsx(td,{className:"w-4 h-4"}),mago:s.jsx(dd,{className:"w-4 h-4"}),ladino:s.jsx(od,{className:"w-4 h-4"}),clerigo:s.jsx(Gc,{className:"w-4 h-4"}),patrulheiro:s.jsx(Ot,{className:"w-4 h-4"}),paladino:s.jsx(Qi,{className:"w-4 h-4"}),arqueiro:s.jsx(Ot,{className:"w-4 h-4"})},ar={fire:"from-red-900/20 via-orange-800/30 to-yellow-700/20",ice:"from-blue-900/20 via-cyan-800/30 to-blue-700/20",thunder:"from-purple-900/20 via-yellow-800/30 to-blue-700/20",earth:"from-green-900/20 via-brown-800/30 to-green-700/20",light:"from-yellow-900/20 via-white/30 to-yellow-700/20",dark:"from-purple-900/20 via-gray-800/30 to-black/20",physical:"from-gray-900/20 via-slate-800/30 to-gray-700/20"},pd={fire:"border-red-500/50 shadow-red-500/20",ice:"border-blue-500/50 shadow-blue-500/20",thunder:"border-yellow-500/50 shadow-yellow-500/20",earth:"border-green-500/50 shadow-green-500/20",light:"border-yellow-400/50 shadow-yellow-400/20",dark:"border-purple-500/50 shadow-purple-500/20",physical:"border-gray-500/50 shadow-gray-500/20"},hd=({hero:t,onClick:e,showDetails:a=!0,size:r="medium",onEdit:i,onImageChange:n})=>{var v,w,y,S;const[o,l]=j.useState(!1),[c,m]=j.useState(!1),{selectHero:d,getSelectedHero:h}=V(),p=h(),u=(p==null?void 0:p.id)===t.id,x=ta[t.element],g={small:"w-48 h-64",medium:"w-56 h-72",large:"w-64 h-80"},b=()=>{d(t.id),e==null||e()};return s.jsxs("div",{className:`
        ${g[r]}
        relative group cursor-pointer
        transform transition-all duration-300 ease-out
        ${o?"scale-105 -translate-y-2":""}
        ${u?"ring-2 ring-yellow-400 ring-opacity-60":""}
      `,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:b,children:[s.jsxs("div",{className:`
        absolute inset-0 rounded-lg
        bg-gradient-to-br from-yellow-600/20 via-amber-700/30 to-yellow-800/20
        border-2 ${pd[t.element]}
        shadow-lg ${o?"shadow-xl shadow-yellow-500/30":""}
        transition-all duration-300
      `,children:[s.jsx("div",{className:"absolute top-2 left-2 text-yellow-400/60 text-xs",children:"⚜"}),s.jsx("div",{className:"absolute top-2 right-2 text-yellow-400/60 text-xs",children:"⚜"}),s.jsx("div",{className:"absolute bottom-2 left-2 text-yellow-400/60 text-xs",children:"⚜"}),s.jsx("div",{className:"absolute bottom-2 right-2 text-yellow-400/60 text-xs",children:"⚜"})]}),s.jsxs("div",{className:`
        absolute inset-1 rounded-md
        bg-gradient-to-br ${ar[t.element]}
        backdrop-blur-sm
      `,children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-50/10 via-yellow-100/5 to-amber-200/10 rounded-md"}),o&&s.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-md",children:[s.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 bg-yellow-400 rounded-full animate-pulse opacity-60"}),s.jsx("div",{className:"absolute top-1/3 right-1/3 w-1 h-1 bg-yellow-400 rounded-full animate-pulse opacity-40 animation-delay-300"}),s.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 bg-yellow-400 rounded-full animate-pulse opacity-50 animation-delay-600"})]})]}),s.jsx("div",{className:"relative h-3/4 p-3",children:s.jsxs("div",{className:"relative h-full rounded-md overflow-hidden",children:[t.image&&!c?s.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover",onError:()=>m(!0)}):s.jsx("div",{className:`
              w-full h-full flex items-center justify-center
              bg-gradient-to-br ${ar[t.element]}
              text-6xl
            `,children:sr[t.class]||"🦸"}),s.jsx("div",{className:`
            absolute inset-0 
            bg-gradient-to-t from-transparent via-transparent to-yellow-400/10
            ${o?"opacity-100":"opacity-0"}
            transition-opacity duration-300
          `}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded-full px-2 py-1 text-xs text-yellow-400 font-bold",children:[aa(((v=t.progression)==null?void 0:v.rank)||"F")," ",((w=t.progression)==null?void 0:w.rank)||"F"]})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded-full px-2 py-1 text-xs text-white font-bold",children:["Nv. ",((y=t.progression)==null?void 0:y.level)||1]})})]})}),s.jsx("div",{className:"absolute bottom-2 left-2 right-2 h-1/3 z-40",children:s.jsxs("div",{className:"h-full bg-black/80 backdrop-blur-md rounded-md border border-yellow-500/30 p-3 flex flex-col justify-between shadow-lg",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("h3",{className:"text-white font-bold text-lg truncate font-serif leading-tight drop-shadow-lg",style:{textShadow:"2px 2px 4px rgba(0,0,0,1)"},children:t.name||"Nome não definido"})}),s.jsxs("div",{className:"flex flex-col space-y-1 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-300",children:[s.jsxs("div",{className:"flex items-center space-x-1 min-w-0 flex-1",children:[sr[t.class],s.jsx("span",{className:"capitalize truncate",children:t.class})]}),s.jsx("div",{className:"flex items-center space-x-1 ml-2",children:s.jsx("span",{className:"text-base",children:x.icon})})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[s.jsx("span",{className:"capitalize truncate",children:t.race}),s.jsxs("span",{className:"text-sm whitespace-nowrap",children:[((S=t.progression)==null?void 0:S.xp)||0," XP"]})]})]})]})}),a&&o&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 rounded-lg z-50",children:s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsxs("button",{onClick:C=>{C.stopPropagation(),e==null||e()},className:"bg-yellow-600 hover:bg-yellow-500 text-white px-3 py-2 rounded-md font-bold text-xs transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(Lc,{className:"w-3 h-3"}),s.jsx("span",{children:"Ver Detalhes"})]}),i&&s.jsxs("button",{onClick:C=>{C.stopPropagation(),i(t)},className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded-md font-bold text-xs transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(Jc,{className:"w-3 h-3"}),s.jsx("span",{children:"Editar"})]}),n&&s.jsxs("button",{onClick:C=>{C.stopPropagation(),n(t)},className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-2 rounded-md font-bold text-xs transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(Mc,{className:"w-3 h-3"}),s.jsx("span",{children:"Trocar Foto"})]})]})}),u&&s.jsx("div",{className:"absolute -top-2 -right-2",children:s.jsx("div",{className:"bg-yellow-500 text-white rounded-full p-1",children:s.jsx(ra,{className:"w-4 h-4 fill-current"})})})]})},xd=({onCreateHero:t,onHeroSelect:e,onHeroEdit:a,onHeroImageChange:r,showCreateButton:i=!0,cardSize:n="medium",viewMode:o="grid"})=>{const{heroes:l}=V(),[c,m]=j.useState(""),[d,h]=j.useState("all"),[p,u]=j.useState("all"),[x,g]=j.useState(o),[b,v]=j.useState(!1),w=j.useMemo(()=>l.filter(C=>{const N=C.name.toLowerCase().includes(c.toLowerCase())||C.class.toLowerCase().includes(c.toLowerCase())||C.race.toLowerCase().includes(c.toLowerCase()),A=d==="all"||C.class===d,f=p==="all"||C.element===p;return N&&A&&f}),[l,c,d,p]),y=C=>{e==null||e(C)},S={small:"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6",medium:"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",large:"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"};return s.jsxs("div",{className:"w-full space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-amber-900/20 to-yellow-800/20 backdrop-blur-sm rounded-lg border border-yellow-500/30 p-4",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-yellow-400 font-serif",children:"Galeria de Heróis"}),s.jsxs("span",{className:"bg-yellow-600/20 text-yellow-300 px-3 py-1 rounded-full text-sm",children:[w.length," ",w.length===1?"herói":"heróis"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Buscar heróis...",value:c,onChange:C=>m(C.target.value),className:"pl-10 pr-4 py-2 bg-black/30 border border-yellow-500/30 rounded-md text-white placeholder-gray-400 focus:outline-none focus:border-yellow-400 w-64"})]}),s.jsx("button",{onClick:()=>v(!b),className:`p-2 rounded-md border transition-colors ${b?"bg-yellow-600 border-yellow-500 text-white":"bg-black/30 border-yellow-500/30 text-yellow-400 hover:bg-yellow-600/20"}`,children:s.jsx(qc,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex border border-yellow-500/30 rounded-md overflow-hidden",children:[s.jsx("button",{onClick:()=>g("grid"),className:`p-2 transition-colors ${x==="grid"?"bg-yellow-600 text-white":"bg-black/30 text-yellow-400 hover:bg-yellow-600/20"}`,children:s.jsx(Bc,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>g("list"),className:`p-2 transition-colors ${x==="list"?"bg-yellow-600 text-white":"bg-black/30 text-yellow-400 hover:bg-yellow-600/20"}`,children:s.jsx(zc,{className:"w-4 h-4"})})]}),i&&s.jsxs("button",{onClick:t,className:"bg-yellow-600 hover:bg-yellow-500 text-white px-4 py-2 rounded-md font-bold transition-colors flex items-center space-x-2",children:[s.jsx(er,{className:"w-4 h-4"}),s.jsx("span",{children:"Criar Herói"})]})]})]}),b&&s.jsx("div",{className:"mt-4 pt-4 border-t border-yellow-500/30",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-yellow-300 mb-2",children:"Classe"}),s.jsxs("select",{value:d,onChange:C=>h(C.target.value),className:"w-full bg-black/30 border border-yellow-500/30 rounded-md text-white p-2 focus:outline-none focus:border-yellow-400",children:[s.jsx("option",{value:"all",children:"Todas as Classes"}),s.jsx("option",{value:"guerreiro",children:"Guerreiro"}),s.jsx("option",{value:"mago",children:"Mago"}),s.jsx("option",{value:"ladino",children:"Ladino"}),s.jsx("option",{value:"clerigo",children:"Clérigo"}),s.jsx("option",{value:"patrulheiro",children:"Patrulheiro"}),s.jsx("option",{value:"paladino",children:"Paladino"}),s.jsx("option",{value:"arqueiro",children:"Arqueiro"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-yellow-300 mb-2",children:"Elemento"}),s.jsxs("select",{value:p,onChange:C=>u(C.target.value),className:"w-full bg-black/30 border border-yellow-500/30 rounded-md text-white p-2 focus:outline-none focus:border-yellow-400",children:[s.jsx("option",{value:"all",children:"Todos os Elementos"}),s.jsx("option",{value:"fire",children:"🔥 Fogo"}),s.jsx("option",{value:"ice",children:"❄️ Gelo"}),s.jsx("option",{value:"thunder",children:"⚡ Raio"}),s.jsx("option",{value:"earth",children:"🌍 Terra"}),s.jsx("option",{value:"light",children:"✨ Luz"}),s.jsx("option",{value:"dark",children:"🌑 Sombra"}),s.jsx("option",{value:"physical",children:"⚔️ Físico"})]})]})]})})]}),w.length>0?s.jsx("div",{className:`
          ${x==="grid"?`grid ${S[n]} gap-6`:"flex flex-col space-y-4"}
        `,children:w.map(C=>s.jsx(hd,{hero:C,onClick:()=>y(C),size:x==="list"?"small":n,showDetails:!0,onEdit:a,onImageChange:r},C.id))}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🦸"}),s.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-2",children:"Nenhum herói encontrado"}),s.jsx("p",{className:"text-gray-400 mb-6",children:c||d!=="all"||p!=="all"?"Tente ajustar os filtros de busca.":"Você ainda não criou nenhum herói."}),i&&s.jsxs("button",{onClick:t,className:"bg-yellow-600 hover:bg-yellow-500 text-white px-6 py-3 rounded-md font-bold transition-colors flex items-center space-x-2 mx-auto",children:[s.jsx(er,{className:"w-5 h-5"}),s.jsx("span",{children:"Criar Primeiro Herói"})]})]})]})},gd={guerreiro:[{id:"golpe-poderoso",name:"Golpe Poderoso",description:"Um ataque devastador que causa alto dano físico",type:"attack",cost:5,basePower:18,element:"earth",target:"single",cooldown:2},{id:"postura-defensiva",name:"Postura Defensiva",description:"Aumenta a defesa por alguns turnos",type:"buff",cost:3,duration:2,target:"self",effects:{buff:{attribute:"constituicao",percentage:30}}},{id:"grito-guerra",name:"Grito de Guerra",description:"Inspira aliados próximos, aumentando seu ataque",type:"support",cost:4,duration:2,target:"ally",effects:{buff:{attribute:"forca",percentage:15}}}],mago:[{id:"bola-fogo",name:"Bola de Fogo",description:"Lança uma esfera flamejante que atinge múltiplos inimigos",type:"attack",cost:6,basePower:20,element:"fire",target:"aoe",cooldown:3},{id:"escudo-arcano",name:"Escudo Arcano",description:"Cria uma barreira mágica que reduz dano mágico",type:"buff",cost:4,duration:2,target:"self",effects:{special:"magic_resistance_40"}},{id:"sussurros-mente",name:"Sussurros da Mente",description:"Reduz o cooldown das habilidades dos aliados",type:"support",cost:5,target:"ally",effects:{special:"reduce_cooldown_1"}}],arqueiro:[{id:"tiro-preciso",name:"Tiro Preciso",description:"Um tiro certeiro com alta chance de crítico",type:"attack",cost:4,basePower:15,element:"physical",target:"single",effects:{special:"high_crit_chance"}},{id:"passo-silencioso",name:"Passo Silencioso",description:"Aumenta a chance de esquiva por alguns turnos",type:"buff",cost:3,duration:2,target:"self",effects:{buff:{attribute:"destreza",percentage:25}}},{id:"chuva-flechas",name:"Chuva de Flechas",description:"Dispara múltiplas flechas atingindo vários inimigos",type:"attack",cost:6,basePower:12,element:"physical",target:"aoe",cooldown:4}],clerigo:[{id:"luz-curativa",name:"Luz Curativa",description:"Canaliza energia divina para curar ferimentos",type:"support",cost:5,target:"ally",effects:{heal:20}},{id:"bencao",name:"Bênção",description:"Abençoa um aliado, aumentando a cura recebida",type:"buff",cost:4,duration:3,target:"ally",effects:{special:"healing_bonus_10"}},{id:"exorcismo",name:"Exorcismo",description:"Ataque sagrado especialmente efetivo contra mortos-vivos",type:"attack",cost:6,basePower:14,element:"light",target:"single",effects:{special:"extra_vs_undead"}}],ladino:[{id:"estocada",name:"Estocada",description:"Ataque furtivo que causa dano extra em alvos desprevenidos",type:"attack",cost:4,basePower:16,element:"physical",target:"single",effects:{special:"sneak_attack_bonus"}},{id:"fuga-sombria",name:"Fuga Sombria",description:"Teleporta para as sombras, ganhando invulnerabilidade temporária",type:"support",cost:3,target:"self",effects:{special:"teleport_invulnerable_1_turn"}},{id:"manobra-enganosa",name:"Manobra Enganosa",description:"Confunde inimigos, fazendo-os errar seus ataques",type:"buff",cost:4,duration:2,target:"single",effects:{debuff:{special:"confusion_miss_chance"}}}],patrulheiro:[{id:"tiro-rastreador",name:"Tiro Rastreador",description:"Marca o alvo e causa dano contínuo",type:"attack",cost:4,basePower:14,element:"physical",target:"single",effects:{special:"mark_target_dot"}},{id:"camuflagem",name:"Camuflagem",description:"Torna-se invisível por alguns turnos",type:"buff",cost:5,duration:2,target:"self",effects:{special:"invisibility"}},{id:"chamado-natureza",name:"Chamado da Natureza",description:"Invoca a ajuda de animais selvagens",type:"support",cost:6,target:"ally",effects:{special:"summon_animal_companion"}}],paladino:[{id:"golpe-sagrado",name:"Golpe Sagrado",description:"Ataque imbuído com poder divino",type:"attack",cost:5,basePower:16,element:"light",target:"single",cooldown:2},{id:"aura-protecao",name:"Aura de Proteção",description:"Protege aliados próximos com energia sagrada",type:"buff",cost:6,duration:3,target:"ally",effects:{buff:{attribute:"constituicao",percentage:20}}},{id:"cura-divina",name:"Cura Divina",description:"Canaliza poder divino para curar ferimentos graves",type:"support",cost:7,target:"ally",effects:{heal:25}}]};function $t(t){return gd[t]||[]}const rr={humano:{first:["Erik","Mira","Roland","Selene","Alba","Marcus","Elena","Gareth","Lyanna","Cedric","Aria","Theron","Vera","Aldric","Nora","Darius","Celia","Roderick","Iris","Magnus","Luna","Cassius","Stella"],last:["Vargas","Dorn","Marin","Cavaleiro","Ferreira","Santos","Silva","Monteiro","Pereira","Costa","Almeida","Rocha","Cardoso","Ribeiro","Machado","Barbosa","Correia","Teixeira","Moreira","Carvalho"]},elfo:{first:["Elarion","Sylwen","Althir","Thalindra","Aelindra","Celeborn","Galadriel","Legolas","Arwen","Elrond","Nimrodel","Thranduil","Elaria","Silvyr","Moonwhisper","Starweaver","Dawnbringer","Nightsong"],last:["Lunarwind","Silvertree","Aelaris","Moonblade","Starfall","Dawnstrider","Nightwhisper","Goldleaf","Silverbrook","Crystalwind","Shadowmere","Brightbane","Swiftarrow","Lightbringer","Forestwalker","Stormwind"]},anao:{first:["Durak","Brom","Thrain","Hilda","Thorin","Dain","Balin","Dwalin","Gimli","Gloin","Oin","Nori","Dori","Ori","Bifur","Bofur","Bombur","Fili","Kili","Grenda","Magna","Vera"],last:["Ferrobarba","Pedramar","Martelo-de-Ferro","Barba-de-Aço","Punho-de-Pedra","Escudo-de-Ferro","Machado-Dourado","Forja-Negra","Barba-Branca","Pé-de-Ferro","Coração-de-Pedra","Mão-de-Ferro","Barba-Vermelha"]},orc:{first:["Gor","Krag","Thokk","Urgar","Grash","Morg","Skar","Vrak","Grom","Thrall","Durotan","Orgrim","Blackhand","Kilrogg","Ner'zhul","Gul'dan","Cho'gall","Teron","Kargath","Dentarg"],last:["Sangrent","Ruptura","Osso-Quebrado","Garra-Negra","Dente-Afiado","Punho-de-Ferro","Olho-Vermelho","Cicatriz-Profunda","Lâmina-Suja","Crânio-Rachado","Pele-Dura","Força-Bruta","Raiva-Eterna"]},halfling:{first:["Bilbo","Frodo","Sam","Merry","Pippin","Rosie","Daisy","Poppy","Lily","Violet","Peregrin","Meriadoc","Samwise","Fredegar","Folco","Odo","Drogo","Primula","Belladonna","Mirabella","Donnamira"],last:["Bolseiro","Gamgee","Tuk","Brandebuque","Sacola-Dourada","Pé-Peludo","Colina-Verde","Vale-Alegre","Pedra-Branca","Água-Clara","Campo-Florido","Boa-Sorte","Coração-Alegre","Sorriso-Largo","Barriga-Cheia"]}},ir={guerreiro:["Pelas chamas da honra!","Mostrem seu valor!","Aço nunca falha!","Por glória e batalha!","Que o ferro encontre a carne!","Nenhum passo atrás!","A vitória ou a morte!"],mago:["Que o cosmos exalte meu nome!","Pelas letras ancestrais!","Que o selo se quebre!","Magia flui através de mim!","Os elementos me obedecem!","Conhecimento é poder!","Que a realidade se curve!"],arqueiro:["Minha mira nunca falha!","Silêncio e precisão!","Uma flecha, um alvo!","Que o vento guie minha flecha!","Distância é minha aliada!","Olhos de águia, mãos firmes!","A caça começou!"],clerigo:["Pela luz divina!","Que a fé me guie!","A cura vem dos céus!","Proteção aos justos!","Luz contra as trevas!","Bênçãos sobre nós!","O divino me fortalece!"],ladino:["Sombras, me guiem!","Essa carteira não vai se esvaziar sozinha!","Sorria e corra!","Silêncio é ouro!","Nas sombras eu prospero!","Rápido e mortal!","Você não me viu chegando!"],default:["Por glória e ouro!","Pelo rei!","Avante, heróis!","A aventura nos chama!","Que a sorte nos favoreça!"]};function nr(t){const e=ir[t.toLowerCase()]||ir.default;return e[Math.floor(Math.random()*e.length)]}function fd(t,e=3){const a=[],r=rr[t]||rr.humano;for(let i=0;i<e;i++){let n;do{const o=r.first[Math.floor(Math.random()*r.first.length)],l=r.last[Math.floor(Math.random()*r.last.length)];n=`${o} ${l}`}while(a.includes(n));a.push(n)}return a}function bd(t){return!t||t.trim().length===0?{valid:!1,message:"Nome não pode estar vazio"}:t.length<2?{valid:!1,message:"Nome deve ter pelo menos 2 caracteres"}:t.length>50?{valid:!1,message:"Nome deve ter no máximo 50 caracteres"}:/[<>{}[\]\\\/\|`~!@#$%^&*()+=;:'"?]/.test(t)?{valid:!1,message:"Nome contém caracteres inválidos"}:{valid:!0}}const K={MIN_ATTRIBUTE:1,MAX_ATTRIBUTE:10,TOTAL_POINTS:18,STARTING_POINTS_PER_ATTRIBUTE:1},Ms={forca:{name:"Força",icon:"💪",description:"Determina o dano físico e capacidade de carregar equipamentos pesados"},destreza:{name:"Destreza",icon:"🏃",description:"Afeta precisão, esquiva e velocidade de movimento"},constituicao:{name:"Constituição",icon:"❤️",description:"Determina pontos de vida e resistência a doenças"},inteligencia:{name:"Inteligência",icon:"🧠",description:"Afeta dano mágico, mana e habilidades de conhecimento"},sabedoria:{name:"Sabedoria",icon:"🦉",description:"Influencia percepção, intuição e resistência mental"},carisma:{name:"Carisma",icon:"✨",description:"Determina habilidades sociais e liderança"}};function Wi(){return{forca:K.STARTING_POINTS_PER_ATTRIBUTE,destreza:K.STARTING_POINTS_PER_ATTRIBUTE,constituicao:K.STARTING_POINTS_PER_ATTRIBUTE,inteligencia:K.STARTING_POINTS_PER_ATTRIBUTE,sabedoria:K.STARTING_POINTS_PER_ATTRIBUTE,carisma:K.STARTING_POINTS_PER_ATTRIBUTE}}function ia(t){const e=Object.values(t).reduce((a,r)=>a+r,0);return K.TOTAL_POINTS-e}function or(t){const e=[],a=Object.values(t).reduce((i,n)=>i+n,0),r=K.TOTAL_POINTS-a;return Object.entries(t).forEach(([i,n])=>{n<K.MIN_ATTRIBUTE&&e.push(`${Ms[i].name} deve ter pelo menos ${K.MIN_ATTRIBUTE} ponto`),n>K.MAX_ATTRIBUTE&&e.push(`${Ms[i].name} não pode ter mais que ${K.MAX_ATTRIBUTE} pontos`)}),a>K.TOTAL_POINTS&&e.push(`Total de pontos (${a}) excede o limite de ${K.TOTAL_POINTS}`),a<K.TOTAL_POINTS&&e.push(`Você ainda tem ${r} pontos para distribuir`),{valid:e.length===0,errors:e,totalPoints:a,remainingPoints:r}}function Bt(t,e){const a=t[e],r=ia(t);return a<K.MAX_ATTRIBUTE&&r>0}function Rs(t,e){return t[e]>K.MIN_ATTRIBUTE}function vd(t,e){return Bt(t,e)?{...t,[e]:t[e]+1}:t}function yd(t,e){return Rs(t,e)?{...t,[e]:t[e]-1}:t}function jd(t){const e=Wi();let a=ia(e);for(t&&Object.entries(t).forEach(([r,i])=>{const n=r,o=Math.min(i||0,K.MAX_ATTRIBUTE-e[n],a);e[n]+=o,a-=o});a>0;){const r=Object.keys(e),i=r[Math.floor(Math.random()*r.length)];Bt(e,i)&&(e[i]++,a--)}return e}const Xi={name:"Elarion Silvertree",race:"elfo",class:"mago",alignment:"neutro-bom",background:"sage",attributes:{forca:2,destreza:3,constituicao:2,inteligencia:5,sabedoria:4,carisma:2},element:"fire",skills:$t("mago"),image:"",battleQuote:"Que as chamas da sabedoria iluminem meu caminho!",backstory:"Nascido nas florestas élficas, Elarion sempre demonstrou afinidade com a magia elemental. Seus estudos o levaram a dominar o poder do fogo, usando-o tanto para proteção quanto para destruição quando necessário."};JSON.stringify(Xi,null,2);const Nd=()=>{const t=Wt(),{updateHero:e,createHero:a}=V(),r=j.useRef(null),[i,n]=Qt.useState(null),o=()=>{t("/create")},l=()=>{try{a(Xi)}catch(p){console.error("Erro ao criar herói de exemplo:",p)}},c=p=>{t(`/hero/${p.id}`)},m=p=>{t(`/hero/${p.id}`)},d=p=>{var u;n(p),(u=r.current)==null||u.click()},h=p=>{var x;const u=(x=p.target.files)==null?void 0:x[0];if(u&&i){const g=new FileReader;g.onload=b=>{var w;const v=(w=b.target)==null?void 0:w.result;e(i.id,{image:v}),n(null)},g.readAsDataURL(u)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-gray-900 to-slate-800",children:s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:h,className:"hidden"}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-amber-400 mb-2",children:"⚔️ Hero Forge"}),s.jsx("p",{className:"text-gray-300",children:"Gerencie seus heróis épicos"}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:l,className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md text-sm transition-colors",children:"🧙‍♂️ Criar Herói de Exemplo"})})]}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[s.jsxs(q,{to:"/quests",className:"bg-gradient-to-br from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 text-white p-4 rounded-lg text-center transition-all transform hover:scale-105 border border-blue-500/30",children:[s.jsx("div",{className:"text-2xl mb-2",children:"⚔️"}),s.jsx("div",{className:"font-medium",children:"Missões"})]}),s.jsxs(q,{to:"/guilds",className:"bg-gradient-to-br from-purple-600 to-purple-700 hover:from-purple-500 hover:to-purple-600 text-white p-4 rounded-lg text-center transition-all transform hover:scale-105 border border-purple-500/30",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🏰"}),s.jsx("div",{className:"font-medium",children:"Guildas"})]}),s.jsxs(q,{to:"/titles",className:"bg-gradient-to-br from-amber-600 to-amber-700 hover:from-amber-500 hover:to-amber-600 text-white p-4 rounded-lg text-center transition-all transform hover:scale-105 border border-amber-500/30",children:[s.jsx("div",{className:"text-2xl mb-2",children:"👑"}),s.jsx("div",{className:"font-medium",children:"Títulos"})]}),s.jsxs(q,{to:"/leaderboards",className:"bg-gradient-to-br from-yellow-600 to-yellow-700 hover:from-yellow-500 hover:to-yellow-600 text-white p-4 rounded-lg text-center transition-all transform hover:scale-105 border border-yellow-500/30",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🏆"}),s.jsx("div",{className:"font-medium",children:"Rankings"})]}),s.jsxs(q,{to:"/playtest",className:"bg-gradient-to-br from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 text-white p-4 rounded-lg text-center transition-all transform hover:scale-105 border border-green-500/30",children:[s.jsx("div",{className:"text-2xl mb-2",children:"📊"}),s.jsx("div",{className:"font-medium",children:"Playtest"})]})]})}),s.jsx(xd,{onCreateHero:o,onHeroSelect:c,onHeroEdit:m,onHeroImageChange:d,showCreateButton:!0,cardSize:"medium",viewMode:"grid"})]})})};class rs extends Error{constructor(a){super(a.message);F(this,"code");F(this,"provider");F(this,"retryable");this.name="AIError",this.code=a.code,this.provider=a.provider,this.retryable=a.retryable}}class wd{constructor(){F(this,"config");F(this,"cache",new Map);F(this,"usageStats",{totalRequests:0,totalTokens:0,totalCost:0,requestsByType:{},averageResponseTime:0,errorRate:0});this.config=this.loadConfig()}loadConfig(){const e="openrouter",a="demo_key_for_build";return a?{provider:e,apiKey:a,model:{}.VITE_AI_MODEL||(e==="openai"?"gpt-4":"claude-3-sonnet-20240229"),imageModel:{}.VITE_AI_IMAGE_MODEL||"dall-e-3",baseURL:e==="openai"?"https://openrouter.ai/api/v1":"https://api.anthropic.com",maxTokens:2e3,temperature:.7}:(console.warn(`API key not found for provider: ${e}. AI features will be disabled.`),{provider:e,apiKey:"",apiUrl:"",model:e==="openai"?"gpt-3.5-turbo":"claude-3-sonnet-20240229",maxTokens:1e3,temperature:.7,timeout:3e4,retryAttempts:3,retryDelay:1e3})}generateCacheKey(e){return btoa(JSON.stringify(e)).replace(/[/+=]/g,"")}isValidCache(e){return Date.now()<e.expiresAt}async makeOpenAITextRequest(e){var i,n;const a=await fetch(`${this.config.baseURL}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},body:JSON.stringify({model:this.config.model,messages:[...e.systemMessage?[{role:"system",content:e.systemMessage}]:[],...e.context?[{role:"user",content:e.context}]:[],{role:"user",content:e.prompt}],max_tokens:e.maxTokens||this.config.maxTokens,temperature:e.temperature||this.config.temperature})});if(!a.ok){const o=await a.json();throw new rs({code:((i=o.error)==null?void 0:i.code)||"unknown_error",message:((n=o.error)==null?void 0:n.message)||"Unknown error occurred",provider:"openai",retryable:a.status>=500})}const r=await a.json();return{text:r.choices[0].message.content,usage:r.usage,model:r.model,provider:"openai"}}async makeAnthropicTextRequest(e){var i,n;const a=await fetch(`${this.config.baseURL}/messages`,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.config.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:this.config.model,max_tokens:e.maxTokens||this.config.maxTokens,temperature:e.temperature||this.config.temperature,system:e.systemMessage,messages:[...e.context?[{role:"user",content:e.context}]:[],{role:"user",content:e.prompt}]})});if(!a.ok){const o=await a.json();throw new rs({code:((i=o.error)==null?void 0:i.type)||"unknown_error",message:((n=o.error)==null?void 0:n.message)||"Unknown error occurred",provider:"anthropic",retryable:a.status>=500})}const r=await a.json();return{text:r.content[0].text,usage:r.usage,model:r.model,provider:"anthropic"}}async makeOpenAIImageRequest(e){var i,n;const a=await fetch(`${this.config.baseURL}/images/generations`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`},body:JSON.stringify({model:this.config.imageModel,prompt:e.prompt,size:e.size||"1024x1024",quality:e.quality||"standard",style:e.style||"vivid",n:e.n||1})});if(!a.ok){const o=await a.json();throw new rs({code:((i=o.error)==null?void 0:i.code)||"unknown_error",message:((n=o.error)==null?void 0:n.message)||"Unknown error occurred",provider:"openai",retryable:a.status>=500})}const r=await a.json();return{url:r.data[0].url,revisedPrompt:r.data[0].revised_prompt,size:e.size||"1024x1024",model:this.config.imageModel,provider:"openai"}}async generateText(e){var i;if(!this.isConfigured())return{text:"AI service is not configured. Please check your API keys.",usage:{promptTokens:0,completionTokens:0,totalTokens:0},model:this.config.model,provider:this.config.provider,finishReason:"stop"};const a=Date.now(),r=this.generateCacheKey(e);if({}.VITE_AI_CACHE_ENABLED==="true"){const n=this.cache.get(r);if(n&&this.isValidCache(n))return n.response}try{let n;return this.config.provider==="openai"?n=await this.makeOpenAITextRequest(e):n=await this.makeAnthropicTextRequest(e),this.updateUsageStats(a,((i=n.usage)==null?void 0:i.totalTokens)||0,"text"),{}.VITE_AI_CACHE_ENABLED==="true"&&this.cache.set(r,{key:r,response:n,timestamp:Date.now(),expiresAt:Date.now()+24*60*60*1e3}),n}catch(n){throw this.usageStats.errorRate++,n}}async generateImage(e){if(!this.isConfigured())return{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OTk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkFJIE5vdCBDb25maWd1cmVkPC90ZXh0Pjwvc3ZnPg==",revisedPrompt:e.prompt,size:e.size||"1024x1024",model:this.config.imageModel||"dall-e-3",provider:this.config.provider};const a=Date.now(),r=this.generateCacheKey(e);if({}.VITE_AI_CACHE_ENABLED==="true"){const i=this.cache.get(r);if(i&&this.isValidCache(i))return i.response}try{let i;if(this.config.provider==="openai")i=await this.makeOpenAIImageRequest(e);else throw new Error("Image generation not supported for Anthropic");return this.updateUsageStats(a,0,"image"),{}.VITE_AI_CACHE_ENABLED==="true"&&this.cache.set(r,{key:r,response:i,timestamp:Date.now(),expiresAt:Date.now()+7*24*60*60*1e3}),i}catch(i){throw this.usageStats.errorRate++,i}}updateUsageStats(e,a,r){const i=Date.now()-e;this.usageStats.totalRequests++,this.usageStats.totalTokens+=a,this.usageStats.requestsByType[r]=(this.usageStats.requestsByType[r]||0)+1,this.usageStats.averageResponseTime=(this.usageStats.averageResponseTime*(this.usageStats.totalRequests-1)+i)/this.usageStats.totalRequests}getUsageStats(){return{...this.usageStats}}clearCache(){this.cache.clear()}getCacheSize(){return this.cache.size}isConfigured(){return!!this.config.apiKey}getProvider(){return this.config.provider}}const pe=new wd,lr={Warrior:["${name} treinou entre aço e fogo, moldando sua coragem nas batalhas de ${place}.",'Chamado de "Escudo de ${place}", ${name} ergueu sua lâmina para proteger os fracos.',"Em ${place}, ${name} aprendeu que disciplina vale mais que força bruta.","Quando os tambores ecoaram em ${place}, ${name} avançou sem hesitar.","Cada cicatriz de ${name} conta uma história de honra e dever em ${place}."],Mage:["${name} estudou grimórios antigos em ${place}, dominando segredos arcanos.",'Chamado de "Sábio de ${place}", ${name} manipula o véu entre mundos.',"Em ${place}, ${name} aprendeu que conhecimento é a maior arma.","Quando as estrelas alinharam-se sobre ${place}, ${name} recitou um antigo encantamento.","As runas de ${place} sussurraram o destino de ${name} nas noites longas."],Rogue:["Nas sombras de ${place}, ${name} move-se como o vento.",'Chamado de "Eco de ${place}", ${name} nunca está onde o inimigo espera.',"Em ${place}, ${name} aprendeu que silêncio pode ser mais poderoso que aço.","Quando a lua caiu sobre ${place}, ${name} roubou o segredo que virou a guerra.","Cada passo de ${name} em ${place} deixa apenas perguntas e nenhum rastro."],Cleric:["Sob as bênçãos em ${place}, ${name} cura feridas e expulsa trevas.",'Chamado de "Luz de ${place}", ${name} mantém a fé firme sob qualquer tormenta.',"Em ${place}, ${name} aprendeu que compaixão é coragem de outro tipo.","Quando as campanas tocaram em ${place}, ${name} respondeu com oração e ação.","Cada milagre de ${name} em ${place} acende esperança onde antes havia medo."],Ranger:["Entre florestas de ${place}, ${name} conhece cada trilha e rastro.",'Chamado de "Guia de ${place}", ${name} anda onde poucos sobrevivem.',"Em ${place}, ${name} aprendeu que paciência supera pressa.","Quando o vento mudou em ${place}, ${name} já sabia o caminho seguro.","Os animais de ${place} reconhecem ${name} como parte da própria natureza."],Paladin:["Jurando votos em ${place}, ${name} combate o mal com retidão.",'Chamado de "Voto de ${place}", ${name} não recua diante da injustiça.',"Em ${place}, ${name} aprendeu que a verdade é lâmina afiada.","Quando a escuridão caiu sobre ${place}, ${name} ergueu o estandarte da luz.","Cada ato de ${name} em ${place} grava um exemplo de virtude."]},Cd=["Alto Vale","Muralha de Pedra","Costa Âmbar","Planícies de Ébano","Bosque das Runas"];function cr(t){return t[Math.floor(Math.random()*t.length)]}function kd(t){const e={strength:"força",agility:"destreza",constitution:"constituição",intelligence:"inteligência",wisdom:"sabedoria",charisma:"carisma"},a=Object.entries(t),[r]=a.reduce((i,n)=>n[1]>i[1]?n:i,a[0]);return{key:r,label:e[r]}}function Sd(t){return Ad(t)}function Ad(t){const e=cr(lr[t.class]||lr.Warrior),a=cr(Cd),r=kd(t.attributes),i=e.replaceAll("${name}",t.name||"Sem Nome").replaceAll("${place}",a),n=`Sua maior virtude é a ${r.label}.`;return`${i} ${n}`}const Td=()=>{const[t,e]=j.useState({name:"",race:"humano",class:"guerreiro",alignment:"neutro-puro",attributes:Wi(),background:"",backstory:"",element:"physical",skills:[],image:"",battleQuote:""}),[a,r]=j.useState(!1),[i,n]=j.useState(!1),[o,l]=j.useState([]),[c,m]=j.useState(!1),[d,h]=j.useState(null),[p,u]=j.useState(!1),[x,g]=j.useState(""),b=j.useRef(null),{createHero:v}=V(),w=Wt(),y=ia(t.attributes),S=$t(t.class),C=async()=>{n(!0);try{const P=fd(t.race);l(P),m(!0)}catch(P){console.error("Erro ao gerar nomes:",P)}finally{n(!1)}},N=P=>{e($=>({...$,name:P})),m(!1)},A=(P,$)=>{let I=t.attributes;$&&Bt(t.attributes,P)?I=vd(t.attributes,P):!$&&Rs(t.attributes,P)&&(I=yd(t.attributes,P)),I!==t.attributes&&e(L=>({...L,attributes:I}))},f=()=>{const P=jd(t.attributes);e($=>({...$,attributes:P}))},k=P=>{e($=>({...$,element:P,skills:$t($.class)}))},E=()=>{const P=ql();k(P)},D=P=>{const $=$t(P),I=nr(P);e(L=>({...L,class:P,skills:$,battleQuote:I}))},_=()=>{const P=nr(t.class);e($=>({...$,battleQuote:P}))},ne=P=>{var I;const $=(I=P.target.files)==null?void 0:I[0];if($){const L=new FileReader;L.onload=ge=>{var jt;const ye=(jt=ge.target)==null?void 0:jt.result;e(Do=>({...Do,image:ye}))},L.readAsDataURL($)}},M=P=>{P.preventDefault();const $=or(t.attributes);if(!$.valid){g($.errors.join(", ")||"Atributos inválidos");return}if(!t.name.trim()){g("Nome é obrigatório");return}const I=bd(t.name);if(!I.valid){g(I.message||"Nome inválido");return}try{v(t),w("/")}catch(L){console.error("Erro ao criar herói:",L),g("Erro ao criar herói. Tente novamente.")}};return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 bg-gray-800 rounded-lg shadow-lg",children:[s.jsx("h2",{className:"text-3xl font-bold text-amber-400 mb-6 text-center",children:"Forjar Novo Herói - Versão 3.0"}),s.jsxs("form",{onSubmit:M,className:"space-y-8",children:[s.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-amber-400 mb-4",children:"1. Raça e Nome"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Raça"}),s.jsxs("select",{value:t.race,onChange:P=>e({...t,race:P.target.value}),className:"mt-1 block w-full rounded-md bg-gray-600 border-gray-500 text-white",children:[s.jsx("option",{value:"humano",children:"Humano"}),s.jsx("option",{value:"elfo",children:"Elfo"}),s.jsx("option",{value:"anao",children:"Anão"}),s.jsx("option",{value:"orc",children:"Orc"}),s.jsx("option",{value:"halfling",children:"Halfling"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Nome"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:t.name,onChange:P=>e({...t,name:P.target.value}),className:"mt-1 block w-full rounded-md bg-gray-600 border-gray-500 text-white",placeholder:"Nome do herói",required:!0}),s.jsx("button",{type:"button",onClick:C,disabled:i,className:"mt-1 px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded-md text-sm font-medium transition-colors disabled:opacity-60",children:i?"...":"🎲"})]}),c&&s.jsxs("div",{className:"mt-2 p-2 bg-gray-600 rounded-md",children:[s.jsxs("p",{className:"text-xs text-gray-300 mb-2",children:["Sugestões para ",t.race,":"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:o.map((P,$)=>s.jsx("button",{type:"button",onClick:()=>N(P),className:"px-2 py-1 bg-purple-600 hover:bg-purple-700 rounded text-xs transition-colors",children:P},$))})]})]})]})]}),s.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-amber-400 mb-4",children:"2. Classe e Habilidades"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Classe"}),s.jsxs("select",{value:t.class,onChange:P=>D(P.target.value),className:"mt-1 block w-full rounded-md bg-gray-600 border-gray-500 text-white",children:[s.jsx("option",{value:"guerreiro",children:"Guerreiro"}),s.jsx("option",{value:"mago",children:"Mago"}),s.jsx("option",{value:"arqueiro",children:"Arqueiro"}),s.jsx("option",{value:"clerigo",children:"Clérigo"}),s.jsx("option",{value:"ladino",children:"Ladino"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium text-gray-300 mb-2",children:"Habilidades Iniciais:"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:S.map(P=>s.jsxs("div",{className:"bg-gray-600 p-3 rounded-md",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-white",children:P.name}),s.jsxs("p",{className:"text-xs text-gray-300",children:[P.type," • ",P.element]}),s.jsxs("p",{className:"text-xs text-amber-300",children:["Custo: ",P.cost]})]}),s.jsx("button",{type:"button",onClick:()=>h(d===P.id?null:P.id),className:"text-blue-400 hover:text-blue-300 text-sm",children:"ℹ️"})]}),d===P.id&&s.jsxs("div",{className:"mt-2 p-2 bg-gray-700 rounded text-xs",children:[s.jsx("p",{className:"text-gray-300",children:P.description}),P.basePower&&s.jsxs("p",{className:"text-amber-300",children:["Poder: ",P.basePower]}),P.duration&&s.jsxs("p",{className:"text-green-300",children:["Duração: ",P.duration," turnos"]}),P.cooldown&&s.jsxs("p",{className:"text-red-300",children:["Cooldown: ",P.cooldown," turnos"]})]})]},P.id))})]})]}),s.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-amber-400 mb-4",children:"3. Atributos"}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("p",{className:"text-sm text-amber-300 font-semibold",children:["Pontos restantes: ",y]}),s.jsx("button",{type:"button",onClick:f,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded text-sm transition-colors",children:"Auto-Distribuir"})]}),x&&s.jsx("p",{className:"text-sm text-red-400 mb-4",children:x}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(t.attributes).map(([P,$])=>s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 capitalize mb-1",children:P}),s.jsx("p",{className:"text-xs text-gray-400 text-center mb-2",children:Ms[P].description}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{type:"button",onClick:()=>A(P,!1),className:"px-2 py-1 bg-red-700 hover:bg-red-600 rounded-l-md disabled:opacity-50 transition-colors",disabled:!Rs(t.attributes,P),children:"-"}),s.jsx("span",{className:"px-4 py-1 bg-gray-600 min-w-[3rem] text-center",children:$}),s.jsx("button",{type:"button",onClick:()=>A(P,!0),className:"px-2 py-1 bg-green-700 hover:bg-green-600 rounded-r-md disabled:opacity-50 transition-colors",disabled:!Bt(t.attributes,P),children:"+"})]})]},P))})]}),s.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-amber-400 mb-4",children:"4. Elemento"}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("button",{type:"button",onClick:E,className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded-md text-sm font-medium transition-colors",children:"🎲 Gerar Aleatório"}),s.jsx("button",{type:"button",onClick:()=>u(!p),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm font-medium transition-colors",children:"ℹ️ Relações"})]}),p&&s.jsxs("div",{className:"mb-4 p-3 bg-gray-600 rounded-md text-sm",children:[s.jsx("h5",{className:"font-medium text-white mb-2",children:"Vantagens Elementais:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsx("p",{children:"Fogo vence Gelo"}),s.jsx("p",{children:"Gelo vence Trovão"}),s.jsx("p",{children:"Trovão vence Terra"}),s.jsx("p",{children:"Terra vence Fogo"}),s.jsx("p",{children:"Luz contra Sombra"}),s.jsx("p",{children:"Físico é neutro"})]})]}),s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-2",children:Object.entries(ta).map(([P,$])=>s.jsxs("button",{type:"button",onClick:()=>k(P),className:`p-3 rounded-md text-center transition-colors ${t.element===P?"bg-amber-600 text-white":"bg-gray-600 hover:bg-gray-500 text-gray-300"}`,children:[s.jsx("div",{className:"text-2xl mb-1",children:$.icon}),s.jsx("div",{className:"text-xs",children:$.name})]},P))})]}),s.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-amber-400 mb-4",children:"5. Imagem do Herói"}),s.jsxs("div",{className:"flex gap-4 items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{ref:b,type:"file",accept:"image/*",onChange:ne,className:"hidden"}),s.jsx("button",{type:"button",onClick:()=>{var P;return(P=b.current)==null?void 0:P.click()},className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md font-medium transition-colors",children:"📁 Upload de Imagem"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Formatos aceitos: JPG, PNG, GIF (máx. 5MB)"})]}),t.image&&s.jsx("div",{className:"w-24 h-24 bg-gray-600 rounded-md overflow-hidden",children:s.jsx("img",{src:t.image,alt:"Preview do herói",className:"w-full h-full object-cover"})})]})]}),s.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-xl font-semibold text-amber-400 mb-4",children:"6. Frase de Batalha"}),s.jsx("div",{className:"flex gap-2 mb-2",children:s.jsx("button",{type:"button",onClick:_,className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded-md text-sm font-medium transition-colors",children:"🎲 Gerar Aleatória"})}),s.jsx("textarea",{value:t.battleQuote||"",onChange:P=>e({...t,battleQuote:P.target.value}),rows:2,className:"w-full rounded-md bg-gray-600 border-gray-500 text-white",placeholder:"Digite uma frase épica para seu herói..."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Alinhamento"}),s.jsxs("select",{value:t.alignment,onChange:P=>e({...t,alignment:P.target.value}),className:"mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-white",children:[s.jsx("option",{value:"leal-bom",children:"Leal e Bom"}),s.jsx("option",{value:"neutro-bom",children:"Neutro e Bom"}),s.jsx("option",{value:"caotico-bom",children:"Caótico e Bom"}),s.jsx("option",{value:"leal-neutro",children:"Leal e Neutro"}),s.jsx("option",{value:"neutro-puro",children:"Verdadeiramente Neutro"}),s.jsx("option",{value:"caotico-neutro",children:"Caótico e Neutro"}),s.jsx("option",{value:"leal-mal",children:"Leal e Mau"}),s.jsx("option",{value:"neutro-mal",children:"Neutro e Mau"}),s.jsx("option",{value:"caotico-mal",children:"Caótico e Mau"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Antecedente"}),s.jsxs("select",{value:t.background,onChange:P=>e({...t,background:P.target.value}),className:"mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-white",children:[s.jsx("option",{value:"",children:"Selecione um antecedente"}),s.jsx("option",{value:"acolyte",children:"Acólito"}),s.jsx("option",{value:"criminal",children:"Criminoso"}),s.jsx("option",{value:"folk-hero",children:"Herói do Povo"}),s.jsx("option",{value:"noble",children:"Nobre"}),s.jsx("option",{value:"sage",children:"Sábio"}),s.jsx("option",{value:"soldier",children:"Soldado"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"História"}),s.jsx("div",{className:"flex gap-3 mb-2",children:s.jsx("button",{type:"button",onClick:()=>{r(!0),setTimeout(()=>{const P=Sd(t);e($=>({...$,backstory:P})),r(!1)},600)},className:"px-3 py-2 bg-amber-600 hover:bg-amber-700 rounded-md text-sm font-medium transition-colors disabled:opacity-60",disabled:a||!t.name.trim(),children:a?"Gerando...":"Gerar história"})}),s.jsx("textarea",{value:t.backstory||"",onChange:P=>e({...t,backstory:P.target.value}),rows:4,className:"mt-1 block w-full rounded-md bg-gray-700 border-gray-600 text-white",placeholder:"Conte a história do seu herói..."})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{type:"submit",className:"px-8 py-4 bg-amber-600 hover:bg-amber-700 rounded-md font-bold text-lg transition-colors disabled:opacity-60",disabled:!or(t.attributes).valid||!t.name.trim(),children:"⚔️ Forjar Herói"})})]})]})},Pd=()=>{const{id:t}=qo(),e=Wt(),{heroes:a,deleteHero:r}=V(),i=a.find(o=>o.id===t);if(!i)return s.jsxs("div",{className:"text-center p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-amber-400 mb-4",children:"Herói não encontrado"}),s.jsx("p",{className:"text-gray-300 mb-6",children:"O herói que você está procurando não existe."}),s.jsx(q,{to:"/",className:"px-6 py-3 bg-amber-600 hover:bg-amber-700 rounded-md font-bold transition-colors",children:"Voltar para Lista"})]});const n=()=>{window.confirm("Tem certeza que deseja deletar este herói?")&&(r(i.id),e("/"))};return s.jsx("div",{className:"container mx-auto p-6",children:s.jsx("div",{className:"max-w-4xl mx-auto bg-gray-800 rounded-lg shadow-lg overflow-hidden",children:s.jsxs("div",{className:"p-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-amber-400 mb-6",children:i.name}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Informações Básicas"}),s.jsxs("div",{className:"space-y-2 text-gray-300",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-amber-400 font-medium",children:"Raça:"})," ",i.race.charAt(0).toUpperCase()+i.race.slice(1)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-amber-400 font-medium",children:"Classe:"})," ",i.class.charAt(0).toUpperCase()+i.class.slice(1)]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-amber-400 font-medium",children:"Nível:"})," ",i.progression.level]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-amber-400 font-medium",children:"Alinhamento:"})," ",i.alignment.split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join(" ")]}),i.background&&s.jsxs("p",{children:[s.jsx("span",{className:"text-amber-400 font-medium",children:"Antecedente:"})," ",i.background.charAt(0).toUpperCase()+i.background.slice(1)]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Atributos"}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(i.attributes).map(([o,l])=>s.jsxs("div",{className:"bg-gray-700 p-3 rounded-md",children:[s.jsxs("span",{className:"text-amber-400 font-medium capitalize",children:[o,":"]})," ",l]},o))})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Atributos Derivados"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:Object.entries(i.derivedAttributes).map(([o,l])=>s.jsxs("div",{className:"bg-gray-700 p-3 rounded-md",children:[s.jsxs("span",{className:"text-amber-400 font-medium capitalize",children:[o,":"]})," ",l]},o))})]}),i.backstory&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"História"}),s.jsx("p",{className:"text-gray-300 bg-gray-700 p-4 rounded-md",children:i.backstory})]}),i.objective&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Objetivo"}),s.jsx("p",{className:"text-gray-300 bg-gray-700 p-4 rounded-md",children:i.objective})]}),i.battleCry&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Grito de Guerra"}),s.jsxs("p",{className:"text-gray-300 bg-gray-700 p-4 rounded-md italic",children:['"',i.battleCry,'"']})]}),s.jsxs("div",{className:"flex justify-between mt-8",children:[s.jsx(q,{to:"/",className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-md font-bold transition-colors",children:"Voltar"}),s.jsx("button",{onClick:n,className:"px-6 py-3 bg-red-600 hover:bg-red-700 rounded-md font-bold transition-colors",children:"Deletar Herói"})]})]})})})},Ed=({achievement:t,isUnlocked:e=!1,showProgress:a=!1})=>{const r=t.maxProgress?Math.round(t.progress/t.maxProgress*100):100,i=o=>{switch(o){case"comum":return"text-gray-600 border-gray-300";case"raro":return"text-blue-600 border-blue-300";case"épico":return"text-purple-600 border-purple-300";case"lendário":return"text-yellow-600 border-yellow-300";default:return"text-gray-600 border-gray-300"}},n=o=>{switch(o){case"comum":return"bg-gray-50";case"raro":return"bg-blue-50";case"épico":return"bg-purple-50";case"lendário":return"bg-yellow-50";default:return"bg-gray-50"}};return s.jsxs("div",{className:`
        relative p-4 rounded-lg border-2 transition-all duration-200
        ${e?`${i(t.rarity)} ${n(t.rarity)} shadow-md`:"text-gray-400 border-gray-200 bg-gray-50 opacity-60"}
        ${e?"hover:shadow-lg transform hover:-translate-y-1":""}
      `,children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`
            w-12 h-12 rounded-full flex items-center justify-center text-2xl
            ${e?n(t.rarity):"bg-gray-200"}
          `,children:t.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:`font-bold text-lg ${e?"":"text-gray-400"}`,children:t.title}),s.jsx("span",{className:`
                px-2 py-1 rounded-full text-xs font-medium uppercase tracking-wide
                ${e?i(t.rarity).replace("text-","text-").replace("border-","bg-")+" bg-opacity-20":"bg-gray-200 text-gray-500"}
              `,children:t.rarity})]}),s.jsx("p",{className:`text-sm mb-2 ${e?"text-gray-700":"text-gray-400"}`,children:t.description}),a&&t.maxProgress&&t.maxProgress>1&&s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[s.jsx("span",{children:"Progresso"}),s.jsxs("span",{children:[t.progress,"/",t.maxProgress]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`
                    h-2 rounded-full transition-all duration-300
                    ${e?i(t.rarity).replace("text-","bg-").replace("border-",""):"bg-gray-300"}
                  `,style:{width:`${r}%`}})})]}),e&&t.unlockedAt&&s.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Desbloqueado em ",new Date(t.unlockedAt).toLocaleDateString("pt-BR")]}),t.rewards&&s.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.rewards.xp&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:["+",t.rewards.xp," XP"]}),t.rewards.gold&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800",children:["+",t.rewards.gold," 🪙"]}),t.rewards.title&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-800",children:["Título: ",t.rewards.title]})]})]})]}),e&&s.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-transparent via-white to-transparent opacity-0 hover:opacity-20 transition-opacity duration-300 pointer-events-none"})]})},Md=({hero:t})=>{const[e,a]=j.useState("all"),[r,i]=j.useState("all"),n=Di.map(d=>{const h=t.progression.achievements.find(u=>u.id===d.id);if(h)return{...h,isUnlocked:!0};let p=0;switch(d.id){case"primeira-missao":p=t.stats.questsCompleted>=1?1:0;break;case"heroi-da-vila":p=Math.min(d.maxProgress,t.stats.questsCompleted);break;case"cacador-experiente":p=Math.min(d.maxProgress,Math.floor(t.stats.questsCompleted*.4));break;case"explorador-corajoso":p=Math.min(d.maxProgress,Math.floor(t.stats.questsCompleted*.3));break;case"lenda-epica":p=Math.min(d.maxProgress,Math.floor(t.stats.questsCompleted*.1));break}return{...d,progress:p,isUnlocked:!1}}),o=n.filter(d=>!(e==="unlocked"&&!d.isUnlocked||e==="locked"&&d.isUnlocked||r!=="all"&&d.rarity!==r)),l=n.filter(d=>d.isUnlocked).length,c=n.length,m=Math.round(l/c*100);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-blue-600 text-white p-6 rounded-lg",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"🏆 Conquistas"}),s.jsxs("div",{className:"flex items-center space-x-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-3xl font-bold",children:[l,"/",c]}),s.jsx("div",{className:"text-sm opacity-90",children:"Desbloqueadas"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm mb-1",children:"Progresso Geral"}),s.jsx("div",{className:"w-full bg-white bg-opacity-20 rounded-full h-3",children:s.jsx("div",{className:"bg-white h-3 rounded-full transition-all duration-500",style:{width:`${m}%`}})}),s.jsxs("div",{className:"text-sm mt-1",children:[m,"% completo"]})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status:"}),s.jsxs("select",{value:e,onChange:d=>a(d.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Todas"}),s.jsx("option",{value:"unlocked",children:"Desbloqueadas"}),s.jsx("option",{value:"locked",children:"Bloqueadas"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Raridade:"}),s.jsxs("select",{value:r,onChange:d=>i(d.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Todas"}),s.jsx("option",{value:"comum",children:"Comum"}),s.jsx("option",{value:"raro",children:"Raro"}),s.jsx("option",{value:"épico",children:"Épico"}),s.jsx("option",{value:"lendário",children:"Lendário"})]})]})]}),s.jsx("div",{className:"grid gap-4",children:o.length>0?o.map(d=>s.jsx(Ed,{achievement:d,isUnlocked:d.isUnlocked,showProgress:!d.isUnlocked},d.id)):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"text-4xl mb-2",children:"🔍"}),s.jsx("div",{children:"Nenhuma conquista encontrada com os filtros selecionados."})]})}),t.progression.titles&&t.progression.titles.length>0&&s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"🎖️ Títulos Conquistados"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:t.progression.titles.map((d,h)=>s.jsx("span",{className:"inline-flex items-center px-3 py-2 rounded-full text-sm font-medium bg-gradient-to-r from-purple-100 to-blue-100 text-purple-800 border border-purple-200",children:d},h))})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"💡 Próximas Conquistas"}),s.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[!t.progression.achievements.some(d=>d.id==="primeira-missao")&&s.jsx("div",{children:'• Complete sua primeira missão para desbloquear "Primeira Aventura"'}),t.stats.questsCompleted<5&&s.jsxs("div",{children:["• Complete ",5-t.stats.questsCompleted,' missões para "Herói da Vila"']}),t.stats.questsCompleted<10&&s.jsx("div",{children:"• Continue completando missões para desbloquear mais conquistas!"})]})]})]})},Rd=({hero:t})=>{const e=a=>{Cs(a);const r=Math.min(6,Math.max(0,[...Array(7)].findIndex((l,c)=>a<[-1e3,-500,-100,0,100,500,1e3][c+1]||c===6))),i=[-1e3,-500,-100,0,100,500,1e3][r],n=[-1e3,-500,-100,0,100,500,1e3][r+1]||1e3;if(a>=1e3)return 100;if(a<=-1e3)return 0;const o=(a-i)/(n-i)*100;return Math.max(0,Math.min(100,o))};return s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsxs("h3",{className:"text-xl font-bold text-amber-400 mb-4 flex items-center",children:[s.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Reputação das Facções"]}),s.jsx("div",{className:"space-y-4",children:(t.reputationFactions||[]).map(a=>{const r=Cs(a.reputation),i=Jl(t,a.name),n=Oi[a.name],o=e(a.reputation);return s.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-white",children:a.name}),s.jsx("p",{className:"text-sm text-gray-400",children:n==null?void 0:n.description})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:`font-bold ${r.color}`,children:r.name}),s.jsxs("div",{className:"text-sm text-gray-400",children:[a.reputation,"/1000"]})]})]}),s.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2 mb-3",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${a.reputation>=0?"bg-gradient-to-r from-green-500 to-blue-500":"bg-gradient-to-r from-red-500 to-orange-500"}`,style:{width:`${o}%`}})}),(i.goldBonus!==0||i.xpBonus!==0)&&s.jsxs("div",{className:"flex space-x-4 text-sm",children:[i.goldBonus!==0&&s.jsxs("span",{className:i.goldBonus>0?"text-yellow-400":"text-red-400",children:["Gold: ",i.goldBonus>0?"+":"",Math.round(i.goldBonus*100),"%"]}),i.xpBonus!==0&&s.jsxs("span",{className:i.xpBonus>0?"text-blue-400":"text-red-400",children:["XP: ",i.xpBonus>0?"+":"",Math.round(i.xpBonus*100),"%"]})]}),r.questModifiers.specialQuestsUnlocked.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs text-purple-400 font-medium",children:"Missões Especiais:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:r.questModifiers.specialQuestsUnlocked.map(l=>s.jsx("span",{className:"px-2 py-1 bg-purple-600/30 text-purple-300 text-xs rounded",children:l.replace("_"," ")},l))})]}),n&&s.jsxs("div",{className:"mt-3 text-xs",children:[n.allyFactions.length>0&&s.jsxs("div",{className:"mb-1",children:[s.jsx("span",{className:"text-green-400",children:"Aliados: "}),s.jsx("span",{className:"text-gray-400",children:n.allyFactions.join(", ")})]}),n.opposingFactions.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-red-400",children:"Inimigos: "}),s.jsx("span",{className:"text-gray-400",children:n.opposingFactions.join(", ")})]})]})]},a.name)})}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-900/30 rounded-lg border border-blue-500/30",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-400 mb-2",children:"💡 Dicas de Reputação"}),s.jsxs("ul",{className:"text-xs text-gray-300 space-y-1",children:[s.jsx("li",{children:"• Missões narrativas afetam sua reputação com diferentes facções"}),s.jsx("li",{children:"• Maior reputação = melhores recompensas e missões especiais"}),s.jsx("li",{children:"• Cuidado: algumas facções são inimigas entre si"}),s.jsx("li",{children:"• Reputação negativa pode fechar certas oportunidades"})]})]})]})},Dd=({hero:t})=>{const[e,a]=j.useState("overview"),{useItem:r,equipItem:i,sellItem:n}=V(),o=y=>y*100+(y-1)*50,l=o(t.progression.level),c=o(t.progression.level+1),m=t.progression.xp-l,d=c-l,h=Math.max(0,Math.min(100,m/d*100)),p=y=>y?ee.find(S=>S.id===y):null,u=p(t.inventory.equippedWeapon),x=p(t.inventory.equippedArmor),g=p(t.inventory.equippedAccessory),v=(()=>{let y={attack:0,defense:0,hp:0,mp:0};return[u,x,g].forEach(S=>{S!=null&&S.effects&&(y.attack+=S.effects.attack||0,y.defense+=S.effects.defense||0,y.hp+=S.effects.hp||0,y.mp+=S.effects.mp||0)}),y})(),w=[{id:"overview",label:"Visão Geral",icon:"📊"},{id:"equipment",label:"Equipamentos",icon:"⚔️"},{id:"achievements",label:"Conquistas",icon:"🏆"},{id:"reputation",label:"Reputação",icon:"⭐"}];return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-6xl",children:t.avatar}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold",children:t.name}),s.jsxs("p",{className:"text-lg opacity-90",children:[t.class," • Nível ",t.progression.level]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:"🪙"}),s.jsx("span",{children:t.progression.gold})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:"⭐"}),s.jsx("span",{children:t.progression.reputation})]})]})]})]})}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8",children:w.map(y=>s.jsxs("button",{onClick:()=>a(y.id),className:`
                flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors
                ${e===y.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
              `,children:[s.jsx("span",{children:y.icon}),s.jsx("span",{children:y.label})]},y.id))})}),e==="overview"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"📈 Progressão"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{children:"Experiência"}),s.jsxs("span",{children:[t.progression.xp," XP"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-3 rounded-full transition-all duration-500",style:{width:`${h}%`}})}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[m,"/",d," XP para o nível ",t.progression.level+1]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.stats.questsCompleted}),s.jsx("div",{className:"text-sm text-gray-600",children:"Missões Completas"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.stats.totalCombats}),s.jsx("div",{className:"text-sm text-gray-600",children:"Combates"})]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"💪 Atributos"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Força"}),s.jsx("span",{className:"font-medium",children:t.attributes.forca})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Destreza"}),s.jsx("span",{className:"font-medium",children:t.attributes.destreza})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Constituição"}),s.jsx("span",{className:"font-medium",children:t.attributes.constituicao})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Inteligência"}),s.jsx("span",{className:"font-medium",children:t.attributes.inteligencia})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Sabedoria"}),s.jsx("span",{className:"font-medium",children:t.attributes.sabedoria})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Carisma"}),s.jsx("span",{className:"font-medium",children:t.attributes.carisma})]})]})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t",children:[s.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Atributos Derivados"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"HP"}),s.jsxs("span",{className:"font-medium",children:[t.derivedAttributes.currentHp,"/",t.derivedAttributes.hp,v.hp>0&&s.jsxs("span",{className:"text-green-600",children:[" (+",v.hp,")"]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"MP"}),s.jsxs("span",{className:"font-medium",children:[t.derivedAttributes.currentMp,"/",t.derivedAttributes.mp,v.mp>0&&s.jsxs("span",{className:"text-blue-600",children:[" (+",v.mp,")"]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Ataque"}),s.jsxs("span",{className:"font-medium",children:[t.attributes.forca,v.attack>0&&s.jsxs("span",{className:"text-red-600",children:[" (+",v.attack,")"]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Defesa"}),s.jsxs("span",{className:"font-medium",children:[t.derivedAttributes.armorClass,v.defense>0&&s.jsxs("span",{className:"text-blue-600",children:[" (+",v.defense,")"]})]})]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 lg:col-span-2",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"🎒 Inventário"}),Object.keys(t.inventory.items).length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:Object.entries(t.inventory.items).map(([y,S])=>{const C=ee.find(N=>N.id===y);return!C||S<=0?null:s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:C.icon}),s.jsx("div",{className:"text-sm font-medium",children:C.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["x",S]}),C.type==="consumable"&&s.jsx("button",{onClick:()=>r(t.id,y),className:"mt-2 px-2 py-1 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors",children:"Usar"})]},y)})}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📦"}),s.jsx("div",{children:"Inventário vazio"})]})]})]}),e==="equipment"&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800",children:"⚔️ Arma"}),u?s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-3xl",children:u.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:u.name}),s.jsx("div",{className:"text-sm text-gray-600",children:u.description}),u.effects&&s.jsx("div",{className:"text-sm text-green-600 mt-1",children:u.effects.attack&&`+${u.effects.attack} Ataque`})]}),s.jsx("button",{onClick:()=>n(t.id,u.id),className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 transition-colors",children:"Vender"})]}):s.jsxs("div",{className:"text-center py-8 text-gray-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"⚔️"}),s.jsx("div",{children:"Nenhuma arma equipada"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800",children:"🛡️ Armadura"}),x?s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-3xl",children:x.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:x.name}),s.jsx("div",{className:"text-sm text-gray-600",children:x.description}),x.effects&&s.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:[x.effects.defense&&`+${x.effects.defense} Defesa`,x.effects.hp&&` +${x.effects.hp} HP`]})]}),s.jsx("button",{onClick:()=>n(t.id,x.id),className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 transition-colors",children:"Vender"})]}):s.jsxs("div",{className:"text-center py-8 text-gray-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"🛡️"}),s.jsx("div",{children:"Nenhuma armadura equipada"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800",children:"💍 Acessório"}),g?s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-3xl",children:g.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:g.name}),s.jsx("div",{className:"text-sm text-gray-600",children:g.description}),g.effects&&s.jsxs("div",{className:"text-sm text-purple-600 mt-1",children:[g.effects.mp&&`+${g.effects.mp} MP`,g.effects.hp&&` +${g.effects.hp} HP`]})]}),s.jsx("button",{onClick:()=>n(t.id,g.id),className:"px-3 py-1 bg-red-500 text-white text-sm rounded hover:bg-red-600 transition-colors",children:"Vender"})]}):s.jsxs("div",{className:"text-center py-8 text-gray-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"💍"}),s.jsx("div",{children:"Nenhum acessório equipado"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-lg font-bold mb-4 text-gray-800",children:"📊 Bônus Totais"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Ataque"}),s.jsxs("span",{className:`font-medium ${v.attack>0?"text-red-600":"text-gray-400"}`,children:["+",v.attack]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Defesa"}),s.jsxs("span",{className:`font-medium ${v.defense>0?"text-blue-600":"text-gray-400"}`,children:["+",v.defense]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"HP"}),s.jsxs("span",{className:`font-medium ${v.hp>0?"text-green-600":"text-gray-400"}`,children:["+",v.hp]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"MP"}),s.jsxs("span",{className:`font-medium ${v.mp>0?"text-purple-600":"text-gray-400"}`,children:["+",v.mp]})]})]}),s.jsxs("div",{className:"mt-6 pt-4 border-t",children:[s.jsx("h4",{className:"font-semibold mb-3 text-gray-700",children:"Equipar"}),s.jsx("div",{className:"space-y-2",children:Object.entries(t.inventory.items).map(([y,S])=>{const C=ee.find(A=>A.id===y);return!C||S<=0||C.type==="consumable"||C.type==="cosmetic"||t.inventory.equippedWeapon===y||t.inventory.equippedArmor===y||t.inventory.equippedAccessory===y?null:s.jsxs("button",{onClick:()=>i(t.id,y),className:"w-full flex items-center space-x-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors",children:[s.jsx("span",{children:C.icon}),s.jsx("span",{className:"text-sm",children:C.name})]},y)})})]})]})]}),e==="achievements"&&s.jsx(Md,{hero:t}),e==="reputation"&&s.jsx(Rd,{hero:t})]})},$d=({hero:t})=>{const[e,a]=j.useState("browse"),[r,i]=j.useState(""),[n,o]=j.useState(""),{guilds:l,availableQuests:c,createGuild:m,joinGuild:d,leaveGuild:h,acceptQuest:p,completeQuest:u,refreshQuests:x}=V(),g=t.progression.guildId?l.find(f=>f.id===t.progression.guildId):null,b=()=>{r.trim()&&n.trim()&&(m(t.id,r.trim(),n.trim()),i(""),o(""),a("my-guild"))},v=f=>{d(t.id,f),a("my-guild")},w=()=>{g&&(h(t.id,g.id),a("browse"))},y=f=>{console.log("🎯 Tentando aceitar missão de guilda:",{questId:f,heroId:t.id,heroLevel:t.progression.level,activeQuests:t.activeQuests.length,maxActiveQuests:3});const k=c.find(D=>D.id===f);console.log("📋 Missão encontrada:",k);const E=p(t.id,f);console.log("✅ Resultado da aceitação:",E),console.log(E?"🎉 Missão aceita com sucesso!":"❌ Falha ao aceitar missão")},S=f=>{var D,_;console.log("🏁 Tentando completar missão de guilda:",{questId:f,heroId:t.id,heroLevel:t.progression.level,activeQuests:t.activeQuests});const k=c.find(ne=>ne.id===f);console.log("📋 Missão encontrada:",k);const E=u(t.id,f,!0);console.log("✅ Resultado da conclusão:",E),E!==null?(E.log&&E.log.length>0&&(console.log("📖 Narrativa do Combate:"),E.log.forEach((ne,M)=>{setTimeout(()=>console.log(`   ${ne}`),M*500)})),E.victory?(console.log("🎉 VITÓRIA! Missão completada com sucesso!"),alert(`🎉 VITÓRIA!

${((D=E.log)==null?void 0:D.join(`
`))||"Missão completada com sucesso!"}`)):(console.log("💔 DERROTA! A missão falhou..."),alert(`💔 DERROTA!

${((_=E.log)==null?void 0:_.join(`
`))||"A missão falhou. Tente novamente quando estiver mais forte!"}`))):(console.log("❌ Falha ao completar missão"),alert("❌ Erro ao processar a missão. Tente novamente."))},C=f=>{switch(f){case"fácil":return"text-green-600 bg-green-100";case"média":return"text-yellow-600 bg-yellow-100";case"difícil":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},N=f=>{switch(f){case"Contrato":return"📋";case"Caça":return"⚔️";case"Exploração":return"🗺️";case"História":return"📖";default:return"❓"}},A=[{id:"browse",label:"Explorar Guildas",icon:"🔍"},{id:"my-guild",label:g?"Minha Guilda":"Sem Guilda",icon:"🏰"},{id:"create",label:"Criar Guilda",icon:"➕"}];return s.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 rounded-lg",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"🏰 Sistema de Guildas"}),s.jsx("p",{className:"text-lg opacity-90",children:g?`Membro da ${g.name}`:"Aventureiro Independente"})]}),s.jsx("div",{className:"border-b border-gray-200",children:s.jsx("nav",{className:"flex space-x-8",children:A.map(f=>s.jsxs("button",{onClick:()=>a(f.id),className:`
                flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors
                ${e===f.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
              `,children:[s.jsx("span",{children:f.icon}),s.jsx("span",{children:f.label})]},f.id))})}),e==="browse"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Guildas Disponíveis"}),l.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(f=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800",children:f.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f.description})]}),s.jsx("div",{className:"text-2xl",children:"🏰"})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Membros:"}),s.jsx("span",{className:"font-medium",children:f.members.length})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"XP da Guilda:"}),s.jsx("span",{className:"font-medium",children:f.guildXP})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Tesouro:"}),s.jsxs("span",{className:"font-medium",children:[f.bankGold," 🪙"]})]})]}),t.progression.guildId===f.id?s.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-2 rounded text-center text-sm font-medium",children:"✓ Membro desta guilda"}):t.progression.guildId?s.jsx("div",{className:"bg-gray-100 text-gray-600 px-3 py-2 rounded text-center text-sm",children:"Já é membro de outra guilda"}):s.jsx("button",{onClick:()=>v(f.id),className:"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 transition-colors",children:"Entrar na Guilda"})]},f.id))}):s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🏰"}),s.jsx("h3",{className:"text-xl font-medium mb-2",children:"Nenhuma guilda encontrada"}),s.jsx("p",{children:"Seja o primeiro a criar uma guilda!"})]})]}),e==="my-guild"&&s.jsx("div",{className:"space-y-6",children:g?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:g.name}),s.jsx("p",{className:"text-gray-600 mt-1",children:g.description})]}),s.jsx("button",{onClick:w,className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors",children:"Sair da Guilda"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-600",children:g.members.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Membros"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:g.guildXP}),s.jsx("div",{className:"text-sm text-gray-600",children:"XP da Guilda"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:g.bankGold}),s.jsx("div",{className:"text-sm text-gray-600",children:"Tesouro"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"👥 Membros"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.members.map(f=>{const k=f===t.id;return s.jsx("div",{className:`p-3 rounded-lg border ${k?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"text-2xl",children:k?t.avatar:"👤"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:k?t.name:`Membro ${f.slice(-4)}`}),s.jsx("div",{className:"text-sm text-gray-600",children:k?`${t.class} • Nível ${t.progression.level}`:"Aventureiro"})]}),k&&s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Você"})]})},f)})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"📋 Quadro de Missões da Guilda"}),s.jsx("button",{onClick:()=>x(t.progression.level),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-md font-medium transition-colors",children:"🔄 Atualizar Missões"})]}),c.filter(f=>f.isGuildQuest).length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.filter(f=>f.isGuildQuest).slice(0,6).map(f=>{var D,_;const k=t.activeQuests.includes(f.id),E=t.progression.level>=f.levelRequirement&&!k;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:N(f.type)}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-800",children:f.title}),s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${C(f.difficulty)}`,children:f.difficulty})]})]})}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:f.description}),s.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[s.jsxs("span",{className:"text-gray-600",children:["Nível mín: ",f.levelRequirement]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("span",{className:"text-yellow-600",children:["🪙 ",((D=f.rewards)==null?void 0:D.gold)||0]}),s.jsxs("span",{className:"text-blue-600",children:["⭐ ",((_=f.rewards)==null?void 0:_.xp)||0]})]})]}),k?s.jsx("button",{onClick:()=>S(f.id),className:"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition-colors",children:"Completar Missão"}):E?s.jsx("button",{onClick:()=>y(f.id),className:"w-full bg-purple-600 text-white py-2 px-4 rounded hover:bg-purple-700 transition-colors",children:"Aceitar Missão"}):s.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-500 py-2 px-4 rounded cursor-not-allowed",children:t.progression.level<f.levelRequirement?"Nível insuficiente":"Já aceita"})]},f.id)})}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📋"}),s.jsx("div",{children:"Nenhuma missão disponível no momento"})]})]})]}):s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🏰"}),s.jsx("h3",{className:"text-xl font-medium mb-2",children:"Você não está em nenhuma guilda"}),s.jsx("p",{className:"mb-6",children:"Explore guildas existentes ou crie a sua própria!"}),s.jsxs("div",{className:"space-x-4",children:[s.jsx("button",{onClick:()=>a("browse"),className:"bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700 transition-colors",children:"Explorar Guildas"}),s.jsx("button",{onClick:()=>a("create"),className:"bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 transition-colors",children:"Criar Guilda"})]})]})}),e==="create"&&s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"➕ Criar Nova Guilda"}),t.progression.guildId?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"text-4xl mb-2",children:"⚠️"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Você já está em uma guilda"}),s.jsx("p",{children:"Saia da sua guilda atual para criar uma nova."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Guilda"}),s.jsx("input",{type:"text",value:r,onChange:f=>i(f.target.value),placeholder:"Digite o nome da sua guilda...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",maxLength:50})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrição"}),s.jsx("textarea",{value:n,onChange:f=>o(f.target.value),placeholder:"Descreva o propósito e valores da sua guilda...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",maxLength:200})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"💡 Dicas para criar uma guilda"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"• Escolha um nome único e memorável"}),s.jsx("li",{children:"• Descreva claramente o foco da guilda (PvE, social, etc.)"}),s.jsx("li",{children:"• Defina expectativas para os membros"}),s.jsx("li",{children:"• Seja acolhedor para atrair novos aventureiros"})]})]}),s.jsx("button",{onClick:b,disabled:!r.trim()||!n.trim(),className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"Criar Guilda"})]})]})})]})},Id=()=>{const{heroes:t,guilds:e,availableQuests:a}=V(),[r,i]=j.useState(null),[n,o]=j.useState([]),[l,c]=j.useState("today");j.useEffect(()=>{m(),d()},[t,e,l]);const m=()=>{if(t.length===0){i({totalHeroes:0,totalQuests:0,totalCombats:0,averageLevel:0,averageSessionTime:0,questSuccessRate:0,mostPopularClass:"N/A",totalGuilds:e.length,activeUsers:0,retentionRate:0});return}const x=t.reduce((A,f)=>A+f.stats.questsCompleted,0),g=t.reduce((A,f)=>A+f.stats.totalCombats,0),b=t.reduce((A,f)=>A+f.progression.level,0)/t.length,v={};t.forEach(A=>{v[A.class]=(v[A.class]||0)+1});const w=Object.entries(v).reduce((A,f)=>v[A[0]]>v[f[0]]?A:f)[0]||"N/A",y=x>0?Math.min(95,70+b*2):0,S=Date.now()-7*24*60*60*1e3,C=t.filter(A=>new Date(A.createdAt).getTime()>S).length,N=t.length>0?Math.min(100,40+x/t.length*5):0;i({totalHeroes:t.length,totalQuests:x,totalCombats:g,averageLevel:Math.round(b*10)/10,averageSessionTime:h(),questSuccessRate:Math.round(y),mostPopularClass:w,totalGuilds:e.length,activeUsers:C,retentionRate:Math.round(N)})},d=()=>{const x=t.map(g=>({heroId:g.id,startTime:new Date(g.createdAt).getTime(),lastActivity:new Date(g.updatedAt).getTime(),questsStarted:g.activeQuests.length+g.stats.questsCompleted,questsCompleted:g.stats.questsCompleted,combatsWon:Math.floor(g.stats.totalCombats*.7),combatsLost:Math.floor(g.stats.totalCombats*.3)}));o(x)},h=()=>{if(n.length===0)return 0;const x=n.reduce((g,b)=>g+(b.lastActivity-b.startTime),0);return Math.round(x/n.length/(1e3*60))},p=()=>{switch(l){case"today":return"Hoje";case"week":return"Última Semana";case"all":return"Todos os Tempos"}},u=()=>{const x={timestamp:new Date().toISOString(),timeframe:l,metrics:r,sessionData:n.map(w=>({...w,sessionDuration:w.lastActivity-w.startTime})),heroes:t.map(w=>({id:w.id,name:w.name,class:w.class,level:w.progression.level,questsCompleted:w.stats.questsCompleted,totalCombats:w.stats.totalCombats,createdAt:w.createdAt,updatedAt:w.updatedAt}))},g=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),b=URL.createObjectURL(g),v=document.createElement("a");v.href=b,v.download=`hero-forge-metrics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(v),v.click(),document.body.removeChild(v),URL.revokeObjectURL(b)};return r?s.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-6 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"📊 Painel de Playtest"}),s.jsx("p",{className:"text-lg opacity-90",children:"Métricas e análises do Hero Forge"})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("select",{value:l,onChange:x=>c(x.target.value),className:"bg-white text-gray-800 px-3 py-2 rounded border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[s.jsx("option",{value:"today",children:"Hoje"}),s.jsx("option",{value:"week",children:"Última Semana"}),s.jsx("option",{value:"all",children:"Todos os Tempos"})]}),s.jsx("button",{onClick:u,className:"bg-white text-indigo-600 px-4 py-2 rounded hover:bg-gray-100 transition-colors font-medium",children:"📥 Exportar Dados"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total de Heróis"}),s.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r.totalHeroes})]}),s.jsx("div",{className:"text-4xl",children:"👥"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Missões Completas"}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:r.totalQuests})]}),s.jsx("div",{className:"text-4xl",children:"✅"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total de Combates"}),s.jsx("p",{className:"text-3xl font-bold text-red-600",children:r.totalCombats})]}),s.jsx("div",{className:"text-4xl",children:"⚔️"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Nível Médio"}),s.jsx("p",{className:"text-3xl font-bold text-purple-600",children:r.averageLevel})]}),s.jsx("div",{className:"text-4xl",children:"📈"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Tempo Médio de Sessão"}),s.jsxs("p",{className:"text-2xl font-bold text-indigo-600",children:[r.averageSessionTime,"min"]})]}),s.jsx("div",{className:"text-3xl",children:"⏱️"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Sucesso"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[r.questSuccessRate,"%"]})]}),s.jsx("div",{className:"text-3xl",children:"🎯"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Usuários Ativos"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.activeUsers})]}),s.jsx("div",{className:"text-3xl",children:"🔥"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Taxa de Retenção"}),s.jsxs("p",{className:"text-2xl font-bold text-teal-600",children:[r.retentionRate,"%"]})]}),s.jsx("div",{className:"text-3xl",children:"📊"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"🎭 Distribuição de Classes"}),t.length>0?s.jsx("div",{className:"space-y-3",children:Object.entries(t.reduce((x,g)=>(x[g.class]=(x[g.class]||0)+1,x),{})).map(([x,g])=>{const b=g/t.length*100;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:x}),s.jsxs("span",{children:[g," (",b.toFixed(1),"%)"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${b}%`}})})]},x)})}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📊"}),s.jsx("div",{children:"Nenhum dado disponível"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"🏰 Atividade de Guildas"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Total de Guildas"}),s.jsx("span",{className:"text-2xl font-bold text-purple-600",children:r.totalGuilds})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Heróis em Guildas"}),s.jsxs("span",{className:"text-lg font-medium",children:[t.filter(x=>x.progression.guildId).length," / ",t.length]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-gray-600",children:"Taxa de Participação"}),s.jsxs("span",{className:"text-lg font-medium text-green-600",children:[t.length>0?Math.round(t.filter(x=>x.progression.guildId).length/t.length*100):0,"%"]})]}),e.length>0&&s.jsxs("div",{className:"pt-4 border-t",children:[s.jsx("h4",{className:"font-medium mb-2 text-gray-700",children:"Guildas Mais Ativas"}),s.jsx("div",{className:"space-y-2",children:e.slice(0,3).map(x=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"truncate",children:x.name}),s.jsxs("span",{className:"text-gray-600",children:[x.members.length," membros"]})]},x.id))})]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold mb-4 text-gray-800",children:"💡 Insights e Recomendações"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.totalHeroes===0&&s.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-yellow-600",children:"⚠️"}),s.jsx("span",{className:"font-medium text-yellow-800",children:"Primeiros Passos"})]}),s.jsx("p",{className:"text-sm text-yellow-700",children:"Nenhum herói criado ainda. Comece criando seu primeiro herói para testar o sistema!"})]}),r.averageLevel<2&&r.totalHeroes>0&&s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-blue-600",children:"📈"}),s.jsx("span",{className:"font-medium text-blue-800",children:"Progressão Inicial"})]}),s.jsx("p",{className:"text-sm text-blue-700",children:"Nível médio baixo. Considere adicionar mais missões fáceis para iniciantes."})]}),r.questSuccessRate<60&&s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-red-600",children:"🎯"}),s.jsx("span",{className:"font-medium text-red-800",children:"Taxa de Sucesso Baixa"})]}),s.jsx("p",{className:"text-sm text-red-700",children:"Taxa de sucesso em missões está baixa. Considere balancear a dificuldade."})]}),r.totalGuilds===0&&r.totalHeroes>2&&s.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-purple-600",children:"🏰"}),s.jsx("span",{className:"font-medium text-purple-800",children:"Sistema Social"})]}),s.jsx("p",{className:"text-sm text-purple-700",children:"Nenhuma guilda criada. Incentive a criação de guildas para aumentar o engajamento social."})]}),r.retentionRate>80&&s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-green-600",children:"🎉"}),s.jsx("span",{className:"font-medium text-green-800",children:"Excelente Retenção"})]}),s.jsx("p",{className:"text-sm text-green-700",children:"Alta taxa de retenção! Os jogadores estão engajados com o sistema."})]}),r.averageSessionTime>30&&s.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-indigo-600",children:"⏱️"}),s.jsx("span",{className:"font-medium text-indigo-800",children:"Sessões Longas"})]}),s.jsx("p",{className:"text-sm text-indigo-700",children:"Sessões longas indicam alto engajamento. Continue adicionando conteúdo!"})]})]})]}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-center text-sm text-gray-600",children:s.jsxs("p",{children:["Dados coletados em ",p().toLowerCase()," • Última atualização: ",new Date().toLocaleString("pt-BR")," • Versão do sistema: 1.0.0-beta"]})})]}):s.jsx("div",{className:"max-w-6xl mx-auto p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((x,g)=>s.jsx("div",{className:"bg-gray-200 h-32 rounded-lg"},g))})]})})},Vd=[{id:"prisoner-rescue",title:"O Prisioneiro Perdido",description:"Um comerciante foi capturado por bandidos. Como você vai lidar com a situação?",difficulty:"medio",levelRequirement:3,type:"narrative",location:"Estrada do Norte",narrative:{intro:"Você encontra um acampamento de bandidos na estrada. Através das árvores, você vê um comerciante amarrado próximo a uma fogueira.",situation:"Os bandidos parecem estar discutindo sobre o resgate. Você tem algumas opções de como proceder..."},choices:[{id:"stealth-rescue",text:"Resgate Furtivo",description:"Esperar a noite e tentar resgatar o prisioneiro silenciosamente",consequences:{reputation:2,xp:150,gold:50,risk:30,reputationChanges:{"Guarda da Cidade":5,Comerciantes:3,Ladrões:-2}},requirements:{level:3}},{id:"direct-attack",text:"Ataque Direto",description:"Confrontar os bandidos diretamente em combate",consequences:{reputation:1,xp:200,gold:100,risk:60,reputationChanges:{"Guarda da Cidade":3,Comerciantes:2,Bandidos:-5}},requirements:{level:4}},{id:"negotiate",text:"Negociar",description:"Tentar negociar a libertação do prisioneiro",consequences:{reputation:3,xp:100,gold:-50,risk:20,reputationChanges:{Comerciantes:5,Diplomatas:4,Bandidos:2}}},{id:"ignore",text:"Ignorar",description:"Seguir seu caminho sem se envolver",consequences:{reputation:-2,xp:0,gold:0,risk:0}}]},{id:"cursed-artifact",title:"O Artefato Amaldiçoado",description:"Você encontrou um artefato mágico poderoso, mas ele parece estar amaldiçoado.",difficulty:"dificil",levelRequirement:5,type:"narrative",location:"Ruínas Antigas",narrative:{intro:"Nas profundezas de uma ruína antiga, você descobre um orbe brilhante emanando energia mágica.",situation:"O artefato pulsa com poder, mas você sente uma presença sinistra ao redor dele. Sussurros ecoam em sua mente..."},choices:[{id:"take-artifact",text:"Pegar o Artefato",description:"Arriscar a maldição pelo poder que ele oferece",consequences:{reputation:-1,xp:300,gold:200,items:["orbe-amaldicoado"],risk:70,reputationChanges:{"Magos Sombrios":10,Igreja:-8,Estudiosos:3}},requirements:{level:5}},{id:"purify-artifact",text:"Purificar o Artefato",description:"Tentar remover a maldição com magia sagrada",consequences:{reputation:4,xp:250,gold:150,items:["orbe-purificado"],risk:40,reputationChanges:{Igreja:15,Paladinos:10,"Magos Sombrios":-10}},requirements:{class:"clerigo"}},{id:"destroy-artifact",text:"Destruir o Artefato",description:"Destruir o artefato para evitar que cause mal",consequences:{reputation:3,xp:200,gold:0,risk:30}},{id:"leave-artifact",text:"Deixar o Artefato",description:"Sair das ruínas sem tocar no artefato",consequences:{reputation:1,xp:50,gold:0,risk:0}}]},{id:"village-plague",title:"A Praga da Vila",description:"Uma vila está sofrendo com uma praga misteriosa. Os habitantes pedem sua ajuda.",difficulty:"dificil",levelRequirement:6,type:"narrative",location:"Vila de Pedraverde",narrative:{intro:"Você chega a uma vila onde metade dos habitantes está doente com uma praga desconhecida.",situation:"O curandeiro local suspeita que a fonte da praga pode estar no poço da vila ou ser causada por magia sombria..."},choices:[{id:"investigate-well",text:"Investigar o Poço",description:"Examinar o poço da vila em busca de contaminação",consequences:{reputation:2,xp:180,gold:80,risk:25}},{id:"seek-magical-cure",text:"Buscar Cura Mágica",description:"Procurar por uma solução mágica para a praga",consequences:{reputation:3,xp:220,gold:120,risk:45},requirements:{class:"mago"}},{id:"quarantine-village",text:"Quarentena",description:"Organizar uma quarentena para conter a praga",consequences:{reputation:1,xp:100,gold:50,risk:15}},{id:"flee-village",text:"Fugir da Vila",description:"Deixar a vila para evitar contrair a praga",consequences:{reputation:-3,xp:0,gold:0,risk:0}}]},{id:"noble-corruption",title:"A Corrupção do Nobre",description:"Você descobriu evidências de que um nobre local está extorquindo os camponeses.",difficulty:"extremo",levelRequirement:8,type:"narrative",location:"Mansão Dourada",narrative:{intro:"Documentos secretos revelam que Lorde Aldric tem extorquido os camponeses locais há anos.",situation:"Você tem evidências suficientes para expô-lo, mas ele é poderoso e tem conexões influentes..."},choices:[{id:"expose-publicly",text:"Exposição Pública",description:"Revelar a corrupção publicamente na praça da cidade",consequences:{reputation:5,xp:400,gold:0,risk:80,reputationChanges:{Povo:20,Justiceiros:15,Nobreza:-15}},requirements:{level:8,reputation:5}},{id:"blackmail-noble",text:"Chantagear o Nobre",description:"Usar as evidências para chantagear o nobre",consequences:{reputation:-3,xp:200,gold:500,risk:60}},{id:"report-authorities",text:"Reportar às Autoridades",description:"Entregar as evidências às autoridades competentes",consequences:{reputation:4,xp:300,gold:200,risk:40}},{id:"confront-directly",text:"Confronto Direto",description:"Confrontar o nobre diretamente em sua mansão",consequences:{reputation:2,xp:350,gold:150,risk:90},requirements:{level:9}}]}],Ld=t=>{const e=Vd.filter(r=>r.levelRequirement<=t+2);if(e.length===0)return Fd(t);const a=e[Math.floor(Math.random()*e.length)];return{id:`${a.id}-${Date.now()}`,title:a.title,description:a.description,difficulty:a.difficulty,levelRequirement:a.levelRequirement,rewards:Ki(a.difficulty,t),type:a.type,status:"available",location:a.location,hasChoices:!0,choices:a.choices,narrative:a.narrative}},Fd=t=>({id:`basic-narrative-${Date.now()}`,title:"Decisão Simples",description:"Uma situação que requer uma escolha cuidadosa.",difficulty:"facil",levelRequirement:1,rewards:Ki("facil",t),type:"narrative",status:"available",hasChoices:!0,choices:[{id:"choice-a",text:"Opção Segura",description:"Escolher o caminho mais seguro",consequences:{reputation:1,xp:50,gold:25,risk:10}},{id:"choice-b",text:"Opção Arriscada",description:"Arriscar por uma recompensa maior",consequences:{reputation:0,xp:100,gold:75,risk:50}}],narrative:{intro:"Você se depara com uma situação que requer uma decisão.",situation:"Duas opções se apresentam diante de você..."}}),Ki=(t,e)=>{const a=e*10,r=e*5,n={facil:1,medio:1.5,dificil:2,extremo:3}[t]||1;return{xp:Math.floor(a*n),gold:Math.floor(r*n)}},qd=(t,e,a,r,i)=>{var m;const n=(m=t.choices)==null?void 0:m.find(d=>d.id===e);if(!n)return{success:!1,outcome:"Escolha inválida.",rewards:{},reputationChange:0};if(n.requirements){const d=n.requirements;if(d.level&&a<d.level)return{success:!1,outcome:`Você precisa ser nível ${d.level} para esta escolha.`,rewards:{},reputationChange:0};if(d.class&&r!==d.class)return{success:!1,outcome:`Apenas ${d.class}s podem fazer esta escolha.`,rewards:{},reputationChange:0};if(d.reputation&&i<d.reputation)return{success:!1,outcome:"Você precisa de mais reputação para esta escolha.",rewards:{},reputationChange:0}}const o=n.consequences.risk||0;return Math.random()*100>o?{success:!0,outcome:Od(t.title,n.text),rewards:{xp:n.consequences.xp||0,gold:n.consequences.gold||0,items:n.consequences.items||[]},reputationChange:n.consequences.reputation||0,reputationChanges:n.consequences.reputationChanges||{}}:{success:!1,outcome:Bd(n.text),rewards:{xp:Math.floor((n.consequences.xp||0)*.3),gold:0},reputationChange:-1}},Od=(t,e)=>{const a=[`Sua decisão de "${e}" foi bem-sucedida! A situação foi resolvida de forma satisfatória.`,`Você escolheu "${e}" e conseguiu um resultado positivo. Sua reputação na região aumentou.`,`A escolha "${e}" provou ser acertada. Você completou a missão com sucesso.`,`Sua abordagem "${e}" funcionou perfeitamente. A missão foi concluída com êxito.`];return a[Math.floor(Math.random()*a.length)]},Bd=t=>{const e=[`Infelizmente, sua tentativa de "${t}" não deu certo. Você aprendeu com o erro.`,`A escolha "${t}" não teve o resultado esperado. Às vezes as coisas não saem como planejado.`,`Sua abordagem "${t}" falhou desta vez. Você ganha experiência mesmo com o fracasso.`,`A decisão de "${t}" não foi bem-sucedida, mas você ainda aprende algo valioso.`];return e[Math.floor(Math.random()*e.length)]},Hd=({quest:t,onComplete:e,onClose:a})=>{var C;const{getSelectedHero:r,gainExperience:i,addGold:n,addItem:o,updateReputation:l}=V(),c=r(),[m,d]=j.useState(null),[h,p]=j.useState(!1),[u,x]=j.useState(null);if(!c)return null;const g=N=>{d(N)},b=()=>{if(!m||!t.choices)return;const N=qd(t,m,c.progression.level,c.class,c.progression.reputation);x(N),p(!0),N.success&&(N.rewards.xp>0&&i(c.id,N.rewards.xp),N.rewards.gold>0&&n(c.id,N.rewards.gold),N.rewards.item&&o(c.id,N.rewards.item),N.reputationChanges&&Object.entries(N.reputationChanges).forEach(([A,f])=>{l(A,f)}),e(t.id,N))},v=N=>{if(!N.requirements)return null;const A=N.requirements,f=[];return A.level&&f.push(`Nível ${A.level}`),A.class&&f.push(`Classe: ${A.class}`),A.reputation&&f.push(`Reputação: ${A.reputation}`),f.length>0?`Requisitos: ${f.join(", ")}`:null},w=N=>{if(!N.requirements)return!0;const A=N.requirements;return!(A.level&&c.progression.level<A.level||A.class&&c.class!==A.class||A.reputation&&c.progression.reputation<A.reputation)},y=N=>N<=20?"text-green-400":N<=50?"text-yellow-400":N<=80?"text-orange-400":"text-red-400",S=N=>N<=20?"Baixo Risco":N<=50?"Risco Moderado":N<=80?"Alto Risco":"Risco Extremo";return h&&u?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-gray-800 rounded-lg p-8 max-w-2xl w-full mx-4 border border-gray-700",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-amber-400 mb-4",children:u.success?"✅ Sucesso!":"❌ Falha"}),s.jsx("div",{className:"bg-gray-700 rounded-lg p-6 mb-6",children:s.jsx("p",{className:"text-gray-300 text-lg leading-relaxed",children:u.outcome})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[u.rewards.xp>0&&s.jsxs("div",{className:"bg-blue-900/30 rounded-lg p-4 border border-blue-700",children:[s.jsxs("div",{className:"text-blue-400 font-bold text-lg",children:["+",u.rewards.xp," XP"]}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Experiência"})]}),u.rewards.gold!==0&&s.jsxs("div",{className:`rounded-lg p-4 border ${u.rewards.gold>0?"bg-yellow-900/30 border-yellow-700":"bg-red-900/30 border-red-700"}`,children:[s.jsxs("div",{className:`font-bold text-lg ${u.rewards.gold>0?"text-yellow-400":"text-red-400"}`,children:[u.rewards.gold>0?"+":"",u.rewards.gold," Ouro"]}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Moedas"})]}),u.reputationChange!==0&&s.jsxs("div",{className:`rounded-lg p-4 border ${u.reputationChange>0?"bg-green-900/30 border-green-700":"bg-red-900/30 border-red-700"}`,children:[s.jsxs("div",{className:`font-bold text-lg ${u.reputationChange>0?"text-green-400":"text-red-400"}`,children:[u.reputationChange>0?"+":"",u.reputationChange," Rep"]}),s.jsx("div",{className:"text-gray-400 text-sm",children:"Reputação"})]})]}),u.rewards.items&&u.rewards.items.length>0&&s.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-700 mb-6",children:[s.jsx("h4",{className:"text-purple-400 font-bold mb-2",children:"Itens Recebidos:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.rewards.items.map((N,A)=>s.jsx("span",{className:"bg-purple-700 px-3 py-1 rounded-md text-sm",children:N},A))})]}),s.jsx("button",{onClick:a,className:"px-6 py-3 bg-amber-600 hover:bg-amber-700 rounded-md font-medium transition-colors",children:"Continuar"})]})})}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-4xl w-full mx-4 border border-gray-700 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-amber-400 mb-2",children:t.title}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[s.jsxs("span",{children:["📍 ",t.location]}),s.jsxs("span",{children:["⚔️ ",t.difficulty]}),s.jsxs("span",{children:["🎯 Nível ",t.levelRequirement,"+"]})]})]}),s.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),t.narrative&&s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"bg-gray-700 rounded-lg p-6 mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-3",children:"📖 História"}),s.jsx("p",{className:"text-gray-300 leading-relaxed mb-4",children:t.narrative.intro}),s.jsx("p",{className:"text-gray-300 leading-relaxed",children:t.narrative.situation})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"🤔 Suas Opções"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(C=t.choices)==null?void 0:C.map(N=>{const A=w(N),f=m===N.id;return s.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all ${A?f?"border-amber-500 bg-amber-900/20":"border-gray-600 hover:border-gray-500 bg-gray-700":"border-gray-700 bg-gray-800 opacity-50 cursor-not-allowed"}`,onClick:()=>A&&g(N.id),children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h4",{className:`font-bold ${A?"text-white":"text-gray-500"}`,children:N.text}),f&&s.jsx("span",{className:"text-amber-400",children:"✓"})]}),s.jsx("p",{className:`text-sm mb-4 ${A?"text-gray-300":"text-gray-500"}`,children:N.description}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[N.consequences.xp&&s.jsxs("span",{className:"bg-blue-900/50 text-blue-300 px-2 py-1 rounded",children:["+",N.consequences.xp," XP"]}),N.consequences.gold&&s.jsxs("span",{className:`px-2 py-1 rounded ${N.consequences.gold>0?"bg-yellow-900/50 text-yellow-300":"bg-red-900/50 text-red-300"}`,children:[N.consequences.gold>0?"+":"",N.consequences.gold," Ouro"]}),N.consequences.reputation&&s.jsxs("span",{className:`px-2 py-1 rounded ${N.consequences.reputation>0?"bg-green-900/50 text-green-300":"bg-red-900/50 text-red-300"}`,children:[N.consequences.reputation>0?"+":"",N.consequences.reputation," Rep"]}),N.consequences.risk&&s.jsx("span",{className:`px-2 py-1 rounded bg-gray-900/50 ${y(N.consequences.risk)}`,children:S(N.consequences.risk)})]}),v(N)&&s.jsx("div",{className:"text-xs text-gray-400 border-t border-gray-600 pt-2",children:v(N)})]})]},N.id)})})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:a,className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-md font-medium transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:b,disabled:!m,className:`px-6 py-3 rounded-md font-medium transition-colors ${m?"bg-amber-600 hover:bg-amber-700":"bg-gray-600 cursor-not-allowed"}`,children:"Confirmar Escolha"})]})]})})},Gd=({heroes:t,onHeroSelect:e})=>{const{getSelectedHero:a}=V(),r=a(),i=(r==null?void 0:r.id)||null,n=o=>{e(o)};return t.length===0?s.jsxs("div",{className:"text-center p-8 bg-slate-800/50 rounded-lg border border-amber-500/30",children:[s.jsx("div",{className:"text-4xl mb-4",children:"🦸"}),s.jsx("h3",{className:"text-xl font-bold text-amber-400 mb-2",children:"Nenhum Herói Criado"}),s.jsx("p",{className:"text-gray-300 mb-4",children:"Você precisa criar um herói primeiro para acessar as missões."}),s.jsx("a",{href:"/",className:"inline-block px-6 py-3 bg-amber-600 hover:bg-amber-700 text-white font-medium rounded-lg transition-colors",children:"Criar Primeiro Herói"})]}):s.jsxs("div",{className:"bg-slate-800/50 rounded-lg border border-amber-500/30 p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-amber-400 mb-4 text-center",children:"Escolha seu Herói"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(o=>{const l=ta[o.element];return s.jsx("div",{onClick:()=>n(o.id),className:`bg-slate-700/50 rounded-lg p-4 border transition-all cursor-pointer group ${i===o.id?"border-amber-500 bg-amber-900/20":"border-slate-600 hover:border-amber-500 hover:bg-slate-700/70"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"text-3xl",children:o.avatar}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold text-white group-hover:text-amber-400 transition-colors",children:o.name}),s.jsxs("div",{className:"text-sm text-gray-300 flex items-center space-x-2",children:[s.jsxs("span",{children:[zi(o.class)," ",o.class]}),s.jsxs("span",{className:l.color,children:[l.icon," ",o.element]})]}),s.jsxs("div",{className:"text-xs text-amber-600",children:["Nível ",o.progression.level," • ",o.progression.experience," XP"]}),i===o.id&&s.jsx("div",{className:"text-xs text-green-400 mt-1 font-medium",children:"✓ Herói selecionado! Carregando missões..."})]})]})},o.id)})})]})},_d=()=>{const{getSelectedHero:t,availableQuests:e,refreshQuests:a,acceptQuest:r,completeQuest:i,selectHero:n,heroes:o}=V(),l=t(),[c,m]=j.useState("available"),[d,h]=j.useState(null),[p,u]=j.useState([]),[x,g]=j.useState(0);j.useEffect(()=>{!l&&o.length>0&&(console.log("Nenhum herói selecionado, selecionando automaticamente o primeiro:",o[0].name),n(o[0].id),a(o[0].progression.level))},[l==null?void 0:l.id,o.length]),j.useEffect(()=>{console.log("Estado do herói selecionado mudou:",(l==null?void 0:l.name)||"Nenhum")},[l]),j.useEffect(()=>{if(l){const k=[];for(let E=0;E<Math.min(3,Math.max(1,Math.floor(l.progression.level/2)));E++)k.push(Ld(l.progression.level));u(k)}},[l==null?void 0:l.id,l==null?void 0:l.progression.level]);const b=k=>{console.log("Clique detectado! Selecionando herói:",k),n(k);const E=o.find(D=>D.id===k);E&&(console.log("Atualizando missões para herói:",E.name,"Level:",E.progression.level),a(E.progression.level)),console.log("Herói selecionado, forçando atualização..."),g(D=>D+1),setTimeout(()=>{const D=o.find(_=>_.id===k);console.log("Herói encontrado:",D==null?void 0:D.name)},100)},v=(k,E)=>{E.success&&l&&(console.log("Aplicando recompensas:",E.rewards),u(D=>D.filter(_=>_.id!==k))),h(null)};if(!l)return s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📜"}),s.jsx("h2",{className:"text-3xl font-bold text-amber-400 mb-4",children:"Quadro de Missões"}),s.jsx("p",{className:"text-gray-300 mb-6",children:"Selecione um herói para ver as missões disponíveis"})]}),s.jsx(Gd,{heroes:o,onHeroSelect:b})]});const w=k=>{switch(k){case"rapida":return"text-green-400 bg-green-900/20";case"padrao":return"text-yellow-400 bg-yellow-900/20";case"epica":return"text-purple-400 bg-purple-900/20";default:return"text-gray-400 bg-gray-900/20"}},y=k=>{switch(k){case"rapida":return"Rápida";case"padrao":return"Padrão";case"epica":return"Épica";default:return"Desconhecido"}},S=k=>{switch(k){case"contrato":return"📜";case"caca":return"⚔️";case"exploracao":return"🗺️";case"historia":return"📖";default:return"❓"}},C=k=>l.progression.level>=k.levelRequirement&&!l.activeQuests.some(E=>E.id===k.id),N=k=>{C(k)&&l&&(console.log("🎯 Aceitando missão:",k.title,"para herói:",l.name),r(l.id,k.id))},A=k=>{l&&(console.log("✅ Completando missão:",k,"para herói:",l.name),i(l.id,k))},f=(k,E=!1,D=!1)=>{var _,ne,M;return s.jsxs("div",{"data-testid":"quest-card",className:"bg-gray-800 rounded-lg p-6 border border-gray-700 hover:border-amber-500 transition-all",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:S(k.type)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:k.title}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${w(k.difficulty)}`,children:y(k.difficulty)}),s.jsxs("span",{className:"text-gray-400 text-sm",children:["Nível ",k.levelRequirement,"+"]})]})]})]}),k.timeLimit&&s.jsx("div",{className:"text-right",children:s.jsxs("span",{className:"text-red-400 text-sm",children:["⏰ ",k.timeLimit,"h"]})})]}),s.jsx("p",{className:"text-gray-300 mb-4",children:k.description}),k.objectives&&k.objectives.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-amber-400 font-medium mb-2",children:"Objetivos:"}),s.jsx("ul",{className:"space-y-1",children:k.objectives.map((P,$)=>s.jsxs("li",{className:"text-gray-300 text-sm flex items-center space-x-2",children:[s.jsx("span",{className:"text-amber-400",children:"•"}),s.jsx("span",{children:P})]},$))})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[s.jsx("h4",{className:"text-amber-400 font-medium mb-2",children:"Recompensas:"}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:"🪙"}),s.jsxs("span",{children:[((_=k.rewards)==null?void 0:_.gold)||0," ouro"]})]}),s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:"⭐"}),s.jsxs("span",{children:[((ne=k.rewards)==null?void 0:ne.xp)||0," XP"]})]}),((M=k.rewards)==null?void 0:M.items)&&k.rewards.items.length>0&&s.jsxs("span",{className:"flex items-center space-x-1",children:[s.jsx("span",{children:"🎁"}),s.jsxs("span",{children:[k.rewards.items.length," item(s)"]})]})]})]}),s.jsxs("div",{className:"mt-4 flex justify-end",children:[!E&&!D&&s.jsx("button",{onClick:()=>N(k),disabled:!C(k),className:`px-4 py-2 rounded-md font-medium transition-colors ${C(k)?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:C(k)?"Aceitar Missão":"Requisitos não atendidos"}),E&&s.jsx("button",{onClick:()=>A(k.id),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md font-medium transition-colors",children:"Completar Missão"}),D&&s.jsx("span",{className:"px-4 py-2 bg-gray-600 rounded-md font-medium text-gray-300",children:"✅ Concluída"})]})]},k.id)};return s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-amber-400",children:"Quadro de Missões"}),s.jsx("button",{onClick:()=>{console.log("🔄 Atualizando missões para herói:",l==null?void 0:l.name,"Level:",l==null?void 0:l.progression.level),a((l==null?void 0:l.progression.level)||1)},className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded-md font-medium transition-colors",children:"🔄 Atualizar Missões"})]}),s.jsxs("div",{className:"flex space-x-1 mb-6 bg-gray-800 p-1 rounded-lg",children:[s.jsxs("button",{onClick:()=>m("available"),className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${c==="available"?"bg-amber-600 text-white":"text-gray-400 hover:text-white"}`,children:["Disponíveis (",e.length,")"]}),s.jsxs("button",{onClick:()=>m("narrative"),className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${c==="narrative"?"bg-purple-600 text-white":"text-gray-400 hover:text-white"}`,children:["Narrativas (",p.length,")"]}),s.jsxs("button",{onClick:()=>m("active"),className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${c==="active"?"bg-amber-600 text-white":"text-gray-400 hover:text-white"}`,children:["Ativas (",l.activeQuests.length,")"]}),s.jsxs("button",{onClick:()=>m("completed"),className:`flex-1 py-2 px-4 rounded-md font-medium transition-colors ${c==="completed"?"bg-amber-600 text-white":"text-gray-400 hover:text-white"}`,children:["Concluídas (",l.completedQuests.length,")"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c==="available"&&e.map(k=>f(k)),c==="narrative"&&p.map(k=>s.jsxs("div",{className:"bg-gradient-to-br from-purple-900/50 to-purple-800/30 rounded-lg p-6 border border-purple-500 hover:border-purple-400 transition-all",children:[f(k),s.jsx("button",{onClick:()=>h(k),className:"mt-4 w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-md font-medium transition-colors",children:"Iniciar Missão Narrativa"})]},k.id)),c==="active"&&l.activeQuests.map(k=>f(k,!0)),c==="completed"&&l.completedQuests.map(k=>f(k,!1,!0))]}),c==="available"&&e.length===0&&s.jsxs("div",{className:"text-center p-8",children:[s.jsx("p",{className:"text-gray-400",children:"Nenhuma missão disponível no momento."}),s.jsx("button",{onClick:()=>{console.log("🎲 Gerando novas missões para herói:",l==null?void 0:l.name,"Level:",l==null?void 0:l.progression.level),a((l==null?void 0:l.progression.level)||1)},className:"mt-4 px-4 py-2 bg-amber-600 hover:bg-amber-700 rounded-md font-medium transition-colors",children:"Gerar Novas Missões"})]}),c==="active"&&l.activeQuests.length===0&&s.jsx("div",{className:"text-center p-8",children:s.jsx("p",{className:"text-gray-400",children:"Você não tem missões ativas."})}),c==="completed"&&l.completedQuests.length===0&&s.jsx("div",{className:"text-center p-8",children:s.jsx("p",{className:"text-gray-400",children:"Você ainda não completou nenhuma missão."})}),c==="narrative"&&p.length===0&&s.jsx("div",{className:"text-center p-8",children:s.jsx("p",{className:"text-gray-400",children:"Nenhuma missão narrativa disponível no momento."})}),d&&s.jsx(Hd,{quest:d,hero:l,onComplete:v,onClose:()=>h(null)})]})};function zd(t,e){return t.filter(a=>a.category===e)}function et(t,e){return t.filter(a=>a.rarity===e)}function Yi(t){return t.activeTitle&&t.titles.find(e=>e.id===t.activeTitle)||null}function Ud(t){const e=Yi(t);return e?`${e.badge} ${t.name}, ${e.name}`:t.name}function is(t){switch(t){case"comum":return"text-gray-400";case"raro":return"text-blue-400";case"epico":return"text-purple-400";case"lendario":return"text-yellow-400";case"especial":return"text-pink-400";default:return"text-gray-400"}}function Qd(t){switch(t){case"comum":return"bg-gray-900/20";case"raro":return"bg-blue-900/20";case"epico":return"bg-purple-900/20";case"lendario":return"bg-yellow-900/20";case"especial":return"bg-pink-900/20";default:return"bg-gray-900/20"}}const Wd=()=>{const{getSelectedHero:t,setActiveTitle:e}=V(),a=t(),[r,i]=j.useState("all"),[n,o]=j.useState("all"),[l,c]=j.useState("");if(!a)return s.jsxs("div",{className:"text-center p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-amber-400 mb-4",children:"Selecione um Herói"}),s.jsx("p",{className:"text-gray-300",children:"Você precisa selecionar um herói para gerenciar títulos."})]});const m=Yi(a);let d=a.titles;r!=="all"&&(d=zd(d,r)),n!=="all"&&(d=et(d,n)),l&&(d=d.filter(b=>b.name.toLowerCase().includes(l.toLowerCase())||b.description.toLowerCase().includes(l.toLowerCase())));const h=b=>{e(b)},p=()=>{e(void 0)},u=b=>{switch(b){case"combat":return"⚔️";case"exploration":return"🗺️";case"social":return"👥";case"achievement":return"🏆";case"special":return"⭐";default:return"📜"}},x=b=>{switch(b){case"combat":return"Combate";case"exploration":return"Exploração";case"social":return"Social";case"achievement":return"Conquistas";case"special":return"Especial";default:return"Outros"}},g=b=>{switch(b){case"comum":return"Comum";case"raro":return"Raro";case"epico":return"Épico";case"lendario":return"Lendário";case"especial":return"Especial";default:return"Desconhecido"}};return s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-3xl font-bold text-amber-400 mb-4",children:"Gerenciar Títulos"}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Título Ativo"}),m?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:"text-4xl",children:m.badge}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-lg font-bold ${is(m.rarity)}`,children:m.name}),s.jsx("p",{className:"text-gray-300 text-sm",children:m.description}),s.jsxs("p",{className:"text-amber-400 text-sm mt-1",children:["Como será exibido: ",Ud(a)]})]})]}),s.jsx("button",{onClick:p,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-md font-medium transition-colors",children:"Remover Título"})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Nenhum título ativo"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Selecione um título abaixo para exibi-lo em seu perfil"})]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700 mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Filtros"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Buscar Título"}),s.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"Nome ou descrição...",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Categoria"}),s.jsxs("select",{value:r,onChange:b=>i(b.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-amber-500",children:[s.jsx("option",{value:"all",children:"Todas as Categorias"}),s.jsx("option",{value:"combat",children:"⚔️ Combate"}),s.jsx("option",{value:"exploration",children:"🗺️ Exploração"}),s.jsx("option",{value:"social",children:"👥 Social"}),s.jsx("option",{value:"achievement",children:"🏆 Conquistas"}),s.jsx("option",{value:"special",children:"⭐ Especial"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Raridade"}),s.jsxs("select",{value:n,onChange:b=>o(b.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-amber-500",children:[s.jsx("option",{value:"all",children:"Todas as Raridades"}),s.jsx("option",{value:"comum",children:"Comum"}),s.jsx("option",{value:"raro",children:"Raro"}),s.jsx("option",{value:"epico",children:"Épico"}),s.jsx("option",{value:"lendario",children:"Lendário"}),s.jsx("option",{value:"especial",children:"Especial"})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(b=>s.jsxs("div",{className:`bg-gray-800 rounded-lg p-6 border transition-all hover:border-amber-500 ${(m==null?void 0:m.id)===b.id?"border-amber-500 bg-amber-900/10":"border-gray-700"}`,children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-3xl",children:b.badge}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-lg font-bold ${is(b.rarity)}`,children:b.name}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${is(b.rarity)} ${Qd(b.rarity)}`,children:g(b.rarity)}),s.jsxs("span",{className:"text-gray-400 text-xs flex items-center space-x-1",children:[s.jsx("span",{children:u(b.category)}),s.jsx("span",{children:x(b.category)})]})]})]})]})}),s.jsx("p",{className:"text-gray-300 text-sm mb-4",children:b.description}),s.jsxs("div",{className:"text-xs text-gray-400 mb-4",children:["Desbloqueado em: ",new Date(b.unlockedAt).toLocaleDateString("pt-BR")]}),s.jsx("div",{className:"flex justify-end",children:(m==null?void 0:m.id)===b.id?s.jsx("span",{className:"px-4 py-2 bg-amber-600 rounded-md font-medium text-sm",children:"✓ Ativo"}):s.jsx("button",{onClick:()=>h(b.id),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md font-medium text-sm transition-colors",children:"Equipar Título"})})]},b.id))}),d.length===0&&s.jsxs("div",{className:"text-center p-8",children:[s.jsx("p",{className:"text-gray-400 mb-4",children:a.titles.length===0?"Você ainda não possui títulos desbloqueados.":"Nenhum título encontrado com os filtros aplicados."}),a.titles.length===0&&s.jsx("p",{className:"text-sm text-gray-500",children:"Complete conquistas e missões para desbloquear títulos!"})]}),s.jsxs("div",{className:"mt-8 bg-gray-800 rounded-lg p-6 border border-gray-700",children:[s.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Estatísticas de Títulos"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-amber-400",children:a.titles.length}),s.jsx("div",{className:"text-sm text-gray-400",children:"Total"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-400",children:et(a.titles,"comum").length}),s.jsx("div",{className:"text-sm text-gray-400",children:"Comuns"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-400",children:et(a.titles,"raro").length}),s.jsx("div",{className:"text-sm text-gray-400",children:"Raros"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:et(a.titles,"epico").length}),s.jsx("div",{className:"text-sm text-gray-400",children:"Épicos"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:et(a.titles,"lendario").length}),s.jsx("div",{className:"text-sm text-gray-400",children:"Lendários"})]})]})]})]})},Xd=()=>{const{getSelectedHero:t,heroes:e}=V(),a=t(),[r,i]=j.useState("xp"),[n,o]=j.useState([]),[l,c]=j.useState("top");if(j.useEffect(()=>{if(a){const u=Wa(a),x=sa(u);o(x)}},[a,e]),!a)return s.jsxs("div",{className:"text-center p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-amber-400 mb-4",children:"Selecione um Herói"}),s.jsx("p",{className:"text-gray-300",children:"Você precisa selecionar um herói para ver os rankings."})]});const m=n.find(u=>u.id===r),d=Hi(a,Wa(a)),h=qt.find(u=>u.id===r),p=(u,x=!1)=>s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg transition-all ${x?"bg-amber-600/20 border border-amber-500 shadow-lg":"bg-gray-700 hover:bg-gray-600"}`,children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-2xl",children:rc(u.rank)}),s.jsxs("span",{className:`font-bold text-lg ${ac(u.rank)}`,children:["#",u.rank]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("h3",{className:`font-semibold ${x?"text-amber-400":"text-white"}`,children:[u.heroName,x&&s.jsx("span",{className:"ml-2 text-xs bg-amber-600 px-2 py-1 rounded",children:"VOCÊ"})]})}),s.jsxs("p",{className:"text-sm text-gray-400",children:[u.heroRace," ",u.heroClass]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:`font-bold ${(h==null?void 0:h.color)||"text-white"}`,children:(h==null?void 0:h.formatValue(u.value))||u.value}),u.change!==0&&s.jsx("div",{className:"text-xs text-gray-400",children:sc(u.change)})]})]},u.heroId);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-amber-900/50 to-amber-800/30 rounded-lg p-6 border border-amber-500/30",children:[s.jsxs("h2",{className:"text-2xl font-bold text-amber-400 mb-4 flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:"🏆"}),"Rankings & Leaderboards"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:["#",d.globalRank]}),s.jsx("div",{className:"text-sm text-gray-400",children:"Ranking Global"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-400",children:["#",d.classRank]}),s.jsx("div",{className:"text-sm text-gray-400",children:"Ranking da Classe"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-400",children:d.achievements}),s.jsx("div",{className:"text-sm text-gray-400",children:"Conquistas"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-400",children:d.totalScore.toLocaleString()}),s.jsx("div",{className:"text-sm text-gray-400",children:"Pontuação Total"})]})]})]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:qt.map(u=>s.jsxs("button",{onClick:()=>i(u.id),className:`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors ${r===u.id?"bg-amber-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[s.jsx("span",{children:u.icon}),s.jsx("span",{children:u.name})]},u.id))}),s.jsxs("div",{className:"flex space-x-2 mb-4",children:[s.jsx("button",{onClick:()=>c("top"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="top"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Top 10"}),s.jsx("button",{onClick:()=>c("around"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${l==="around"?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Ao Redor de Você"})]}),m&&h&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-xl font-bold text-white flex items-center",children:[s.jsx("span",{className:"mr-2",children:h.icon}),h.name]}),s.jsxs("div",{className:"text-sm text-gray-400",children:["Atualizado: ",m.lastUpdated.toLocaleTimeString()]})]}),s.jsx("p",{className:"text-gray-400 mb-6",children:h.description}),s.jsx("div",{className:"space-y-2",children:l==="top"?ec(m,10).map(u=>p(u,u.heroId===a.id)):tc(m,a.id,5).map(u=>p(u,u.heroId===a.id))}),m.entries.length===0&&s.jsx("div",{className:"text-center p-8 text-gray-400",children:s.jsx("p",{children:"Nenhum herói encontrado neste ranking."})})]})]}),s.jsxs("div",{className:"bg-blue-900/30 rounded-lg p-6 border border-blue-500/30",children:[s.jsxs("h4",{className:"text-lg font-semibold text-blue-400 mb-3 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"💡"}),"Como Melhorar seu Ranking"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-300",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-white mb-2",children:"📈 Experiência & Nível"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"• Complete missões regularmente"}),s.jsx("li",{children:"• Participe de combates"}),s.jsx("li",{children:"• Explore novas áreas"})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-white mb-2",children:"💰 Riqueza"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"• Venda itens desnecessários"}),s.jsx("li",{children:"• Complete missões com recompensas altas"}),s.jsx("li",{children:"• Invista em equipamentos valiosos"})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-white mb-2",children:"🏅 Conquistas"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"• Desbloqueie títulos especiais"}),s.jsx("li",{children:"• Complete desafios únicos"}),s.jsx("li",{children:"• Mantenha streaks de login"})]})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-white mb-2",children:"⭐ Reputação"}),s.jsxs("ul",{className:"space-y-1",children:[s.jsx("li",{children:"• Faça escolhas narrativas positivas"}),s.jsx("li",{children:"• Ajude diferentes facções"}),s.jsx("li",{children:"• Mantenha boa reputação geral"})]})]})]})]})]})},Kd=({heroId:t})=>{const{heroes:e,generateDailyGoalsForHero:a,completeDailyGoal:r,cleanupExpiredGoals:i}=V(),n=e.find(p=>p.id===t),o=j.useRef(new Set);if(j.useEffect(()=>{if(!t||o.current.has(t))return;const p=e.find(b=>b.id===t);if(!p)return;const u=new Date,x=p.dailyGoals&&p.dailyGoals.length>0&&p.dailyGoals.some(b=>b.expiresAt<=u),g=p.dailyGoals&&p.dailyGoals.length>0&&p.dailyGoals.some(b=>b.expiresAt>u);o.current.add(t),x&&setTimeout(()=>i(t),0),g||setTimeout(()=>a(t),0)},[t]),!n||!n.dailyGoals||n.dailyGoals.length===0)return s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:"🎯 Metas Diárias"}),s.jsxs("div",{className:"text-gray-400 text-center py-8",children:[s.jsx("div",{className:"text-4xl mb-2",children:"⏳"}),s.jsx("p",{children:"Gerando suas metas diárias..."})]})]});const l=p=>{p.completed&&r(t,p.id)},c=p=>{const u=new Date,x=p.getTime()-u.getTime();if(x<=0)return"Expirado";const g=Math.floor(x/(1e3*60*60)),b=Math.floor(x%(1e3*60*60)/(1e3*60));return g>0?`${g}h ${b}m`:`${b}m`},m=n.dailyGoals.filter(p=>p.completed),d=n.dailyGoals.length,h=d>0?m.length/d*100:0;return s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:"🎯 Metas Diárias"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm text-gray-400",children:["Progresso: ",m.length,"/",d]}),s.jsx("div",{className:"w-24 bg-gray-700 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-300",style:{width:`${h}%`}})})]})]}),s.jsx("div",{className:"space-y-4",children:n.dailyGoals.map(p=>{const u=_i(p),x=lc(p.id),g=cc(p.id),b=p.progress/p.maxProgress*100,v=c(p.expiresAt);return s.jsx("div",{className:`bg-gray-700 rounded-lg p-4 border-l-4 transition-all duration-300 ${p.completed?"border-green-500 bg-green-900/20":"border-gray-600 hover:border-blue-500"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-2xl",children:x}),s.jsx("h4",{className:`font-semibold ${g}`,children:p.description}),p.completed&&s.jsx("span",{className:"text-green-400 text-sm",children:"✓ Completa"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400 mb-1",children:[s.jsxs("span",{children:["Progresso: ",p.progress,"/",p.maxProgress]}),s.jsxs("span",{children:["Expira em: ",v]})]}),s.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${p.completed?"bg-green-500":"bg-gradient-to-r from-blue-500 to-purple-500"}`,style:{width:`${Math.min(b,100)}%`}})})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1 text-yellow-400",children:[s.jsx("span",{children:"⭐"}),s.jsxs("span",{children:[u.xp," XP"]})]}),s.jsxs("div",{className:"flex items-center gap-1 text-yellow-500",children:[s.jsx("span",{children:"💰"}),s.jsxs("span",{children:[u.gold," Ouro"]})]}),u.items&&u.items.length>0&&s.jsxs("div",{className:"flex items-center gap-1 text-purple-400",children:[s.jsx("span",{children:"🎁"}),s.jsxs("span",{children:[u.items.length," Item(s)"]})]})]})]}),p.completed&&s.jsxs("button",{onClick:()=>l(p),className:"ml-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 flex items-center gap-2",children:[s.jsx("span",{children:"🎁"}),"Coletar"]})]})},p.id)})}),m.length===d&&d>0&&s.jsxs("div",{className:"mt-6 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg p-4 text-center",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🏆"}),s.jsx("h4",{className:"text-white font-bold mb-1",children:"Parabéns!"}),s.jsx("p",{className:"text-purple-100 text-sm",children:"Você completou todas as metas diárias! Volte amanhã para novas metas."})]}),s.jsxs("div",{className:"mt-6 bg-gray-700 rounded-lg p-4",children:[s.jsx("h4",{className:"text-white font-semibold mb-2 flex items-center gap-2",children:"💡 Dicas"}),s.jsxs("ul",{className:"text-gray-300 text-sm space-y-1",children:[s.jsx("li",{children:"• Complete missões para progredir em várias metas"}),s.jsx("li",{children:"• Metas mais difíceis oferecem recompensas maiores"}),s.jsx("li",{children:'• A meta "Dia Perfeito" oferece bônus especiais'}),s.jsx("li",{children:"• Novas metas são geradas a cada dia"})]})]})]})},Ji=({isVisible:t,onClose:e})=>{const[a,r]=j.useState(null),[i,n]=j.useState(null),[o,l]=j.useState({x:0,y:0}),c=j.useRef(null),{gainXP:m,gainGold:d,addItemToInventory:h,selectedHeroId:p}=V();j.useEffect(()=>{const C=f=>{var k;r(f.step),(k=f.step)!=null&&k.targetElement?u(f.step.targetElement):x()},N=f=>{if(f.step.rewards&&p){const{xp:k,gold:E,items:D}=f.step.rewards;k&&m(p,k),E&&d(p,E),D&&D.forEach(_=>h(p,_,1))}},A=()=>{e()};return O.on("step-changed",C),O.on("step-completed",N),O.on("flow-completed",A),t&&r(O.getCurrentStep()),()=>{O.off("step-changed",C),O.off("step-completed",N),O.off("flow-completed",A)}},[t,e]);const u=C=>{const N=document.querySelector(C);if(N){n(N);const A=N.getBoundingClientRect(),f=g(A,(a==null?void 0:a.position)||"bottom");l(f),N.scrollIntoView({behavior:"smooth",block:"center"})}},x=()=>{n(null)},g=(C,N)=>{switch(N){case"top":return{x:C.left+C.width/2-320/2,y:C.top-200-20};case"bottom":return{x:C.left+C.width/2-320/2,y:C.bottom+20};case"left":return{x:C.left-320-20,y:C.top+C.height/2-200/2};case"right":return{x:C.right+20,y:C.top+C.height/2-200/2};default:return{x:window.innerWidth/2-320/2,y:window.innerHeight/2-200/2}}},b=()=>{O.nextStep()||e()},v=()=>{O.previousStep()},w=()=>{a!=null&&a.skippable&&O.skipStep()},y=()=>{O.reset(),e()};if(!t||!a)return null;const S=a.position==="center"||!a.targetElement;return s.jsxs("div",{ref:c,className:"fixed inset-0 z-50 pointer-events-none",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 pointer-events-auto"}),i&&s.jsx("div",{className:"absolute border-4 border-yellow-400 rounded-lg shadow-lg pointer-events-none",style:{left:i.getBoundingClientRect().left-4,top:i.getBoundingClientRect().top-4,width:i.getBoundingClientRect().width+8,height:i.getBoundingClientRect().height+8,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.5)",zIndex:51}}),s.jsxs("div",{className:"absolute bg-white rounded-lg shadow-xl border border-gray-200 p-6 max-w-sm pointer-events-auto",style:{left:S?"50%":o.x,top:S?"50%":o.y,transform:S?"translate(-50%, -50%)":"none",zIndex:52},children:[s.jsx("button",{onClick:y,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 text-xl",children:"×"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:a.title}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),s.jsx("div",{className:"text-sm text-gray-700",children:a.content})]}),a.rewards&&s.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[s.jsx("div",{className:"text-xs font-medium text-yellow-800 mb-1",children:"Recompensas:"}),s.jsxs("div",{className:"flex items-center space-x-3 text-xs",children:[a.rewards.xp&&s.jsxs("span",{className:"text-blue-600",children:["+",a.rewards.xp," XP"]}),a.rewards.gold&&s.jsxs("span",{className:"text-yellow-600",children:["+",a.rewards.gold," 🪙"]}),a.rewards.items&&s.jsxs("span",{className:"text-purple-600",children:["+",a.rewards.items.length," itens"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[s.jsx("span",{children:"Progresso"}),s.jsxs("span",{children:[O.getProgress().percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${O.getProgress().percentage}%`}})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:v,disabled:!O.getCurrentStep(),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Anterior"}),a.skippable&&s.jsx("button",{onClick:w,className:"px-3 py-1 text-sm text-gray-500 hover:text-gray-700",children:"Pular"})]}),s.jsx("button",{onClick:b,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white text-sm rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:O.getCurrentStep()?"Próximo →":"Finalizar"})]})]})]})},Yd=()=>{const[t,e]=j.useState([]),[a,r]=j.useState(!1),[i,n]=j.useState({completed:0,total:0,percentage:0});j.useEffect(()=>{O.loadState(),o(),l();const u=()=>{o(),l(),r(!1)};return O.on("flow-completed",u),()=>{O.off("flow-completed",u)}},[]);const o=()=>{e(O.getAvailableFlows())},l=()=>{n(O.getProgress())},c=u=>{O.startFlow(u)&&r(!0)},m=()=>{r(!1),O.saveState()},d=u=>{switch(u){case"beginner":return"🌱";case"intermediate":return"⚡";case"advanced":return"🏆";default:return"📚"}},h=u=>{switch(u){case"beginner":return"bg-green-100 text-green-800 border-green-200";case"intermediate":return"bg-blue-100 text-blue-800 border-blue-200";case"advanced":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},p=()=>Oe.filter(u=>O.isFlowCompleted(u.id));return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white p-6",children:[s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"🎓 Centro de Aprendizagem"}),s.jsx("p",{className:"text-xl text-gray-300 mb-6",children:"Domine o HeroForge com nossos tutoriais interativos"}),s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 max-w-md mx-auto",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{children:"Progresso Geral"}),s.jsxs("span",{children:[i.percentage,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3",children:s.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-3 rounded-full transition-all duration-500",style:{width:`${i.percentage}%`}})}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[i.completed," de ",i.total," passos concluídos"]})]})]}),t.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"📋 Tutoriais Disponíveis"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(u=>s.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20 hover:bg-white/15 transition-all duration-200",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-2xl",children:d(u.category)}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg",children:u.name}),s.jsxs("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium border ${h(u.category)}`,children:[u.category==="beginner"&&"Iniciante",u.category==="intermediate"&&"Intermediário",u.category==="advanced"&&"Avançado"]})]})]})}),s.jsx("p",{className:"text-gray-300 text-sm mb-4",children:u.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:[u.steps.length," passos"]}),s.jsx("button",{onClick:()=>c(u.id),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 text-sm font-medium",children:"Iniciar"})]})]},u.id))})]}),p().length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"✅ Tutoriais Concluídos"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p().map(u=>s.jsxs("div",{className:"bg-green-900/20 backdrop-blur-sm rounded-lg p-6 border border-green-500/30",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-2xl",children:"✅"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-green-400",children:u.name}),s.jsx("span",{className:"text-xs text-green-300",children:"Concluído"})]})]})}),s.jsx("p",{className:"text-gray-300 text-sm mb-4",children:u.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:[u.steps.length," passos"]}),s.jsx("button",{onClick:()=>c(u.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 text-sm font-medium",children:"Revisar"})]})]},u.id))})]}),t.length===0&&p().length===Oe.length&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Parabéns!"}),s.jsx("p",{className:"text-gray-300",children:"Você concluiu todos os tutoriais disponíveis. Você é um verdadeiro mestre do HeroForge!"})]}),s.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-lg p-6 border border-white/10",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"💡 Dicas Rápidas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-yellow-400",children:"⚡"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Complete metas diárias"}),s.jsx("div",{className:"text-gray-400",children:"Ganhe bônus extras todos os dias"})]})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-blue-400",children:"🏰"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Una-se a uma guilda"}),s.jsx("div",{className:"text-gray-400",children:"Colabore com outros heróis"})]})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-purple-400",children:"🛡️"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Melhore seus equipamentos"}),s.jsx("div",{className:"text-gray-400",children:"Aumente suas estatísticas"})]})]}),s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-green-400",children:"📈"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Monitore seu progresso"}),s.jsx("div",{className:"text-gray-400",children:"Use os rankings para se comparar"})]})]})]})]})]}),s.jsx(Ji,{isVisible:a,onClose:m})]})},Jd=()=>{const t=Wt(),{shouldShowOnboarding:e,markOnboardingShown:a,heroes:r}=V(),[i,n]=j.useState(!1),[o,l]=j.useState(!1);j.useEffect(()=>{const u=setTimeout(()=>{e()&&n(!0)},1e3);return()=>clearTimeout(u)},[]);const c=()=>{n(!1),a(),O.loadState(),O.startFlow("first-steps")&&l(!0)},m=()=>{n(!1),a()},d=()=>{n(!1),a(),t("/tutorial")},h=()=>{l(!1),O.saveState()};return s.jsxs(s.Fragment,{children:[i&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md mx-4 p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎮"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Bem-vindo ao HeroForge!"}),s.jsx("p",{className:"text-gray-600",children:"Transforme suas tarefas diárias em aventuras épicas! Gostaria de fazer um tutorial rápido para aprender o básico?"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:c,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 font-medium",children:"🚀 Sim, vamos começar!"}),s.jsx("button",{onClick:d,className:"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-all duration-200 font-medium",children:"📚 Ver todos os tutoriais"}),s.jsx("button",{onClick:m,className:"w-full text-gray-500 py-2 px-4 rounded-lg hover:text-gray-700 transition-all duration-200 text-sm",children:"Pular por agora"})]}),s.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("div",{className:"text-xs text-blue-800",children:["💡 ",s.jsx("strong",{children:"Dica:"})," Você pode acessar os tutoriais a qualquer momento através do menu de navegação rápida!"]})})]})}),s.jsx(Ji,{isVisible:o,onClose:h})]})},Zd=()=>{const{selectedHeroId:t,gainXP:e,gainGold:a,addTitle:r}=V(),[i,n]=j.useState([]),[o,l]=j.useState([]),[c,m]=j.useState({hours:0,minutes:0});j.useEffect(()=>{d();const y=setInterval(d,6e4);return()=>clearInterval(y)},[t]);const d=()=>{const y=we.getActiveEvents();if(n(y),t){const C=we.getEventProgress(t);l(C)}const S=we.getTimeUntilNextRotation();m(S)},h=y=>o.find(S=>S.eventId===y),p=y=>{const S=h(y.id);return S?Math.min(S.progress/y.targetValue*100,100):0},u=async y=>{if(!t)return;const S=we.claimEventRewards(t,y.id);if(S){for(const C of S)switch(C.type){case"xp":C.amount&&e(t,C.amount);break;case"gold":C.amount&&a(t,C.amount);break;case"title":C.titleId&&r(t,C.titleId);break}d()}},x=y=>{switch(y){case"common":return"border-gray-300 bg-gray-50";case"rare":return"border-blue-300 bg-blue-50";case"epic":return"border-purple-300 bg-purple-50";case"legendary":return"border-yellow-300 bg-yellow-50";default:return"border-gray-300 bg-gray-50"}},g=y=>y.map(S=>{switch(S.type){case"xp":return`${S.amount} XP`;case"gold":return`${S.amount} 🪙`;case"title":return`Título: ${S.titleId}`;case"item":return S.itemName||"Item";default:return""}}).join(", "),b=i.filter(y=>y.type==="daily"),v=i.filter(y=>y.type==="weekly"),w=i.filter(y=>y.type==="special");return t?s.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"🎪 Eventos Especiais"}),s.jsx("p",{className:"text-gray-600",children:"Participe de eventos limitados e ganhe recompensas exclusivas!"}),s.jsx("div",{className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-100 rounded-lg",children:s.jsxs("span",{className:"text-sm text-blue-800",children:["⏰ Próxima rotação em: ",c.hours,"h ",c.minutes,"m"]})})]}),b.length>0&&s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:["☀️ Eventos Diários",s.jsx("span",{className:"ml-2 text-sm bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full",children:b.length})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(y=>{const S=h(y.id),C=p(y),N=(S==null?void 0:S.completed)||!1,A=N&&!(S!=null&&S.rewardsClaimed);return s.jsxs("div",{className:`border-2 rounded-lg p-6 ${x(y.rarity)} transition-all duration-200 hover:shadow-lg`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-3xl mr-3",children:y.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-800",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.description})]})]}),N&&s.jsx("span",{className:"text-green-500 text-xl",children:"✅"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:y.objective}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`bg-gradient-to-r ${y.color} h-2 rounded-full transition-all duration-300`,style:{width:`${C}%`}})}),s.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[(S==null?void 0:S.progress)||0," / ",y.targetValue]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Recompensas:"}),s.jsx("p",{className:"text-sm text-gray-600",children:g(y.rewards)})]}),A&&s.jsx("button",{onClick:()=>u(y),className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-2 px-4 rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-200 font-medium",children:"🎁 Resgatar Recompensas"}),(S==null?void 0:S.rewardsClaimed)&&s.jsx("div",{className:"w-full bg-gray-100 text-gray-500 py-2 px-4 rounded-lg text-center text-sm",children:"✅ Recompensas Resgatadas"})]},y.id)})})]}),v.length>0&&s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:["📅 Eventos Semanais",s.jsx("span",{className:"ml-2 text-sm bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:v.length})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.map(y=>{const S=h(y.id),C=p(y),N=(S==null?void 0:S.completed)||!1,A=N&&!(S!=null&&S.rewardsClaimed);return s.jsxs("div",{className:`border-2 rounded-lg p-6 ${x(y.rarity)} transition-all duration-200 hover:shadow-lg`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-4xl mr-4",children:y.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.description})]})]}),N&&s.jsx("span",{className:"text-green-500 text-2xl",children:"✅"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-gray-700 mb-3",children:y.objective}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:`bg-gradient-to-r ${y.color} h-3 rounded-full transition-all duration-300`,style:{width:`${C}%`}})}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[(S==null?void 0:S.progress)||0," / ",y.targetValue]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Recompensas Épicas:"}),s.jsx("p",{className:"text-gray-600",children:g(y.rewards)})]}),A&&s.jsx("button",{onClick:()=>u(y),className:"w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all duration-200 font-medium text-lg",children:"👑 Resgatar Recompensas Épicas"}),(S==null?void 0:S.rewardsClaimed)&&s.jsx("div",{className:"w-full bg-gray-100 text-gray-500 py-3 px-4 rounded-lg text-center",children:"✅ Recompensas Épicas Resgatadas"})]},y.id)})})]}),w.length>0&&s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:["⭐ Eventos Especiais",s.jsx("span",{className:"ml-2 text-sm bg-red-100 text-red-800 px-2 py-1 rounded-full",children:w.length})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:w.map(y=>{const S=h(y.id),C=p(y),N=(S==null?void 0:S.completed)||!1,A=N&&!(S!=null&&S.rewardsClaimed);return s.jsxs("div",{className:`border-2 rounded-lg p-6 ${x(y.rarity)} transition-all duration-200 hover:shadow-lg`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-4xl mr-4",children:y.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:y.name}),s.jsx("p",{className:"text-sm text-gray-600",children:y.description})]})]}),N&&s.jsx("span",{className:"text-green-500 text-2xl",children:"✅"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-gray-700 mb-3",children:y.objective}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:`bg-gradient-to-r ${y.color} h-3 rounded-full transition-all duration-300`,style:{width:`${C}%`}})}),s.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[(S==null?void 0:S.progress)||0," / ",y.targetValue]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Recompensas Lendárias:"}),s.jsx("p",{className:"text-gray-600",children:g(y.rewards)})]}),A&&s.jsx("button",{onClick:()=>u(y),className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-3 px-4 rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 font-medium text-lg",children:"🏆 Resgatar Recompensas Lendárias"}),(S==null?void 0:S.rewardsClaimed)&&s.jsx("div",{className:"w-full bg-gray-100 text-gray-500 py-3 px-4 rounded-lg text-center",children:"✅ Recompensas Lendárias Resgatadas"})]},y.id)})})]}),i.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎪"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum Evento Ativo"}),s.jsx("p",{className:"text-gray-600",children:"Novos eventos serão gerados em breve. Volte mais tarde!"})]})]}):s.jsx("div",{className:"max-w-4xl mx-auto p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎪"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Eventos Especiais"}),s.jsx("p",{className:"text-gray-600",children:"Selecione um herói para ver os eventos disponíveis"})]})})},em=({heroId:t,showFilters:e=!0,maxItems:a=20,compact:r=!1})=>{const[i,n]=j.useState([]),[o,l]=j.useState({}),[c,m]=j.useState({}),[d,h]=j.useState({}),{currentHero:p}=V();j.useEffect(()=>{u()},[t,o,a]);const u=()=>{let N;t?N=re.getHeroActivities(t,a):N=re.getActivityFeed(o).activities.slice(0,a),n(N)},x=N=>{re.likeActivity(N)&&u()},g=N=>{var f;const A=(f=d[N])==null?void 0:f.trim();!A||!p||re.addComment(N,p.id,p.name,A)&&(h(k=>({...k,[N]:""})),u())},b=async N=>{const A=re.shareActivity(N);if(A){if(navigator.share)try{await navigator.share({title:"HeroForge - Conquista Épica",text:A.shareText,url:A.shareUrl})}catch{v(A.shareUrl)}else v(A.shareUrl);u()}},v=N=>{navigator.clipboard.writeText(N).then(()=>{console.log("Link copiado para a área de transferência!")})},w=N=>{m(A=>({...A,[N]:!A[N]}))},y=N=>{const f=new Date().getTime()-N.getTime(),k=Math.floor(f/6e4),E=Math.floor(f/36e5),D=Math.floor(f/864e5);return k<1?"agora mesmo":k<60?`${k}m atrás`:E<24?`${E}h atrás`:D<7?`${D}d atrás`:N.toLocaleDateString("pt-BR")},S=()=>s.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm rounded-lg p-4 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Filtros"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tipo de Atividade"}),s.jsxs("select",{className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",onChange:N=>{const A=N.target.value?[N.target.value]:void 0;l(f=>({...f,types:A}))},children:[s.jsx("option",{value:"",children:"Todos os tipos"}),s.jsx("option",{value:"quest-completed",children:"Missões Completadas"}),s.jsx("option",{value:"epic-quest-completed",children:"Missões Épicas"}),s.jsx("option",{value:"level-up",children:"Subida de Nível"}),s.jsx("option",{value:"achievement-unlocked",children:"Conquistas"}),s.jsx("option",{value:"title-earned",children:"Títulos"}),s.jsx("option",{value:"event-completed",children:"Eventos"}),s.jsx("option",{value:"daily-goal-completed",children:"Metas Diárias"}),s.jsx("option",{value:"combat-victory",children:"Vitórias em Combate"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Período"}),s.jsxs("select",{className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",onChange:N=>{const A=N.target.value;let f;if(A==="today"){const k=new Date;k.setHours(0,0,0,0);const E=new Date(k);E.setDate(E.getDate()+1),f={start:k,end:E}}else if(A==="week"){const k=new Date;k.setDate(k.getDate()-7),f={start:k,end:new Date}}else if(A==="month"){const k=new Date;k.setDate(k.getDate()-30),f={start:k,end:new Date}}l(k=>({...k,dateRange:f}))},children:[s.jsx("option",{value:"",children:"Todo o período"}),s.jsx("option",{value:"today",children:"Hoje"}),s.jsx("option",{value:"week",children:"Última semana"}),s.jsx("option",{value:"month",children:"Último mês"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Visibilidade"}),s.jsxs("select",{className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white",onChange:N=>{const A=N.target.value==="public"?!0:void 0;l(f=>({...f,showOnlyPublic:A}))},children:[s.jsx("option",{value:"",children:"Todas as atividades"}),s.jsx("option",{value:"public",children:"Apenas públicas"})]})]})]})]}),C=({activity:N})=>s.jsx("div",{className:`bg-gradient-to-r ${N.color} p-0.5 rounded-lg mb-4`,children:s.jsxs("div",{className:"bg-gray-900 rounded-lg p-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[s.jsx("div",{className:"text-2xl",children:N.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-white font-medium",children:N.message}),s.jsx("p",{className:"text-gray-400 text-sm mt-1",children:y(N.timestamp)}),!r&&N.data.questReward&&s.jsxs("div",{className:"mt-2 text-sm text-gray-300",children:[s.jsxs("span",{className:"text-yellow-400",children:["+",N.data.questReward.xp," XP"]}),N.data.questReward.gold>0&&s.jsxs("span",{className:"ml-2 text-yellow-500",children:["+",N.data.questReward.gold," ouro"]})]})]})]})}),!r&&s.jsx("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>x(N.id),className:"flex items-center space-x-1 text-gray-400 hover:text-red-400 transition-colors",children:[s.jsx("span",{children:"❤️"}),s.jsx("span",{className:"text-sm",children:N.likes})]}),s.jsxs("button",{onClick:()=>w(N.id),className:"flex items-center space-x-1 text-gray-400 hover:text-blue-400 transition-colors",children:[s.jsx("span",{children:"💬"}),s.jsx("span",{className:"text-sm",children:N.comments.length})]}),s.jsxs("button",{onClick:()=>b(N.id),className:"flex items-center space-x-1 text-gray-400 hover:text-green-400 transition-colors",children:[s.jsx("span",{children:"🔗"}),s.jsx("span",{className:"text-sm",children:N.shares})]})]})}),!r&&c[N.id]&&s.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-700",children:[N.comments.map(A=>s.jsx("div",{className:"mb-3 last:mb-0",children:s.jsx("div",{className:"flex items-start space-x-2",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-white",children:A.authorName}),s.jsx("span",{className:"text-xs text-gray-400",children:y(A.timestamp)})]}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:A.content})]})})},A.id)),p&&s.jsxs("div",{className:"mt-3 flex space-x-2",children:[s.jsx("input",{type:"text",placeholder:"Adicionar comentário...",value:d[N.id]||"",onChange:A=>h(f=>({...f,[N.id]:A.target.value})),className:"flex-1 bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm",onKeyPress:A=>{A.key==="Enter"&&g(N.id)}}),s.jsx("button",{onClick:()=>g(N.id),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Enviar"})]})]})]})});return s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[!r&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:t?"Atividades do Herói":"Feed de Atividades"}),s.jsx("p",{className:"text-gray-400",children:"Acompanhe as conquistas e aventuras épicas!"})]}),e&&!r&&s.jsx(S,{}),s.jsx("div",{className:"space-y-4",children:i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎮"}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Nenhuma atividade encontrada"}),s.jsx("p",{className:"text-gray-400",children:t?"Este herói ainda não possui atividades registradas.":"Comece sua jornada épica para ver atividades aqui!"})]}):i.map(N=>s.jsx(C,{activity:N},N.id))}),i.length>=a&&s.jsx("div",{className:"text-center mt-6",children:s.jsx("button",{onClick:()=>u(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Carregar mais atividades"})})]})},ae=({title:t,value:e,change:a,icon:r,color:i,subtitle:n})=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4",style:{borderLeftColor:i},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:t}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e}),n&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n})]}),s.jsx("div",{className:"p-3 rounded-full",style:{backgroundColor:`${i}20`},children:s.jsx("div",{style:{color:i},children:r})})]}),a!==void 0&&s.jsxs("div",{className:"mt-4 flex items-center",children:[s.jsx("span",{className:"text-green-500 mr-1",children:"📈"}),s.jsxs("span",{className:`text-sm font-medium ${a>=0?"text-green-500":"text-red-500"}`,children:[a>=0?"+":"",a.toFixed(1),"%"]}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs. período anterior"})]})]}),ns=({title:t,data:e,dataKeys:a,colors:r})=>{const i=Math.max(...e.flatMap(n=>a.map(o=>n[o]||0)));return s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t}),s.jsx("div",{className:"space-y-2",children:e.slice(-7).map((n,o)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xs text-gray-500 w-16",children:new Date(n.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}),s.jsx("div",{className:"flex-1 flex space-x-1",children:a.map((l,c)=>s.jsx("div",{className:"h-6 rounded",style:{backgroundColor:r[c],width:`${(n[l]||0)/i*100}%`,minWidth:"2px"},title:`${l}: ${n[l]||0}`},l))}),s.jsx("span",{className:"text-xs text-gray-700 w-12 text-right",children:a.reduce((l,c)=>l+(n[c]||0),0)})]},o))}),s.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:a.map((n,o)=>s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r[o]}}),s.jsx("span",{className:"text-xs text-gray-600 capitalize",children:n})]},n))})]})},tm=()=>{const[t,e]=j.useState(null),[a,r]=j.useState(!0),[i,n]=j.useState("30d"),[o,l]=j.useState(!0),c=async()=>{r(!0);try{await new Promise(u=>setTimeout(u,500));const p=ue.getKPIDashboard();e(p)}catch(p){console.error("Erro ao carregar dashboard:",p)}finally{r(!1)}};j.useEffect(()=>{c()},[i]),j.useEffect(()=>{if(!o)return;const p=setInterval(c,3e4);return()=>clearInterval(p)},[o,i]);const m=p=>{const u=Math.floor(p/60),x=Math.floor(u/60);return x>0?`${x}h ${u%60}m`:`${u}m ${p%60}s`},d=p=>p>=1e6?`${(p/1e6).toFixed(1)}M`:p>=1e3?`${(p/1e3).toFixed(1)}K`:p.toString(),h=()=>{if(!t)return;const p={exportDate:new Date().toISOString(),period:i,dashboard:t},u=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),x=URL.createObjectURL(u),g=document.createElement("a");g.href=x,g.download=`heroforge-metrics-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(x)};return a?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),s.jsx("span",{className:"ml-3 text-lg text-gray-600",children:"Carregando métricas..."})]})})}):t?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx("span",{className:"text-4xl mr-3",children:"📊"}),"Dashboard de Métricas"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Análise completa de KPIs e performance do HeroForge"})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[s.jsxs("select",{value:i,onChange:p=>n(p.target.value),className:"bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[s.jsx("option",{value:"7d",children:"Últimos 7 dias"}),s.jsx("option",{value:"30d",children:"Últimos 30 dias"}),s.jsx("option",{value:"90d",children:"Últimos 90 dias"})]}),s.jsx("button",{onClick:()=>l(!o),className:`p-2 rounded-lg transition-colors ${o?"bg-green-100 text-green-600 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:o?"Desativar atualização automática":"Ativar atualização automática",children:s.jsx("span",{className:`text-lg ${o?"animate-spin":""}`,children:"🔄"})}),s.jsxs("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[s.jsx("span",{children:"💾"}),s.jsx("span",{children:"Exportar"})]}),s.jsxs("button",{onClick:c,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[s.jsx("span",{children:"🔄"}),s.jsx("span",{children:"Atualizar"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx(ae,{title:"Total de Usuários",value:d(t.overview.totalUsers),icon:s.jsx("span",{className:"text-2xl",children:"👥"}),color:"#8B5CF6",subtitle:"Usuários registrados"}),s.jsx(ae,{title:"Usuários Ativos",value:d(t.overview.activeUsers),icon:s.jsx("span",{className:"text-2xl",children:"⚡"}),color:"#10B981",subtitle:"Últimas 24 horas"}),s.jsx(ae,{title:"Total de Sessões",value:d(t.overview.totalSessions),icon:s.jsx("span",{className:"text-2xl",children:"🎯"}),color:"#F59E0B",subtitle:"Todas as sessões"}),s.jsx(ae,{title:"Duração Média",value:m(t.overview.averageSessionDuration),icon:s.jsx("span",{className:"text-2xl",children:"⏰"}),color:"#EF4444",subtitle:"Por sessão"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[s.jsx(ae,{title:"Usuários Diários",value:d(t.engagement.dailyActiveUsers),icon:s.jsx("span",{className:"text-2xl",children:"📅"}),color:"#3B82F6",subtitle:"Últimas 24h"}),s.jsx(ae,{title:"Usuários Semanais",value:d(t.engagement.weeklyActiveUsers),icon:s.jsx("span",{className:"text-2xl",children:"📅"}),color:"#6366F1",subtitle:"Últimos 7 dias"}),s.jsx(ae,{title:"Usuários Mensais",value:d(t.engagement.monthlyActiveUsers),icon:s.jsx("span",{className:"text-2xl",children:"📅"}),color:"#8B5CF6",subtitle:"Últimos 30 dias"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[s.jsx(ae,{title:"Total de Heróis",value:d(t.gameplay.totalHeroes),icon:s.jsx("span",{className:"text-2xl",children:"👥"}),color:"#10B981",subtitle:"Heróis criados"}),s.jsx(ae,{title:"Nível Médio",value:t.gameplay.averageHeroLevel.toFixed(1),icon:s.jsx("span",{className:"text-2xl",children:"⭐"}),color:"#F59E0B",subtitle:"Dos heróis"}),s.jsx(ae,{title:"Missões Completadas",value:d(t.gameplay.totalQuestsCompleted),icon:s.jsx("span",{className:"text-2xl",children:"🏆"}),color:"#8B5CF6",subtitle:"Total geral"}),s.jsx(ae,{title:"Ouro Total",value:d(t.gameplay.totalGoldEarned),icon:s.jsx("span",{className:"text-2xl",children:"🪙"}),color:"#F59E0B",subtitle:"Ouro ganho"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[s.jsx(ae,{title:"Tempo de Carregamento",value:`${t.performance.pageLoadTime.toFixed(0)}ms`,icon:s.jsx("span",{className:"text-2xl",children:"⚡"}),color:"#06B6D4",subtitle:"Página inicial"}),s.jsx(ae,{title:"Taxa de Erro",value:`${(t.performance.errorRate*100).toFixed(2)}%`,icon:s.jsx("span",{className:"text-2xl",children:"⚠️"}),color:"#EF4444",subtitle:"Erros por evento"}),s.jsx(ae,{title:"Uso de Memória",value:`${t.performance.memoryUsage.toFixed(1)}MB`,icon:s.jsx("span",{className:"text-2xl",children:"💾"}),color:"#8B5CF6",subtitle:"JavaScript heap"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsx(ns,{title:"Crescimento de Usuários",data:t.trends.userGrowth,dataKeys:["count"],colors:["#8B5CF6"]}),s.jsx(ns,{title:"Tendência de Engajamento",data:t.trends.engagementTrend,dataKeys:["sessions"],colors:["#10B981"]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-6 mb-8",children:s.jsx(ns,{title:"Atividade de Gameplay",data:t.trends.gameplayTrend,dataKeys:["quests","xp"],colors:["#F59E0B","#EF4444"]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informações Adicionais"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Classe Mais Popular"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.gameplay.mostPopularClass})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Missão Mais Completada"}),s.jsx("p",{className:"text-lg font-semibold text-green-600",children:t.gameplay.mostCompletedQuest})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Retenção (7 dias)"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[(t.engagement.retentionRate.day7*100).toFixed(1),"%"]})]})]})]}),s.jsxs("div",{className:"mt-8 text-center text-gray-500 text-sm",children:[s.jsx("p",{children:"Dashboard atualizado automaticamente • Dados em tempo real"}),s.jsxs("p",{className:"mt-1",children:["Última atualização: ",new Date().toLocaleString("pt-BR")]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-blue-50 p-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erro ao Carregar Métricas"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Não foi possível carregar os dados do dashboard."}),s.jsx("button",{onClick:c,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:"Tentar Novamente"})]})})})},na=j.createContext({});function oa(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const la=typeof window<"u",Zi=la?j.useLayoutEffect:j.useEffect,Yt=j.createContext(null);function ca(t,e){t.indexOf(e)===-1&&t.push(e)}function da(t,e){const a=t.indexOf(e);a>-1&&t.splice(a,1)}const be=(t,e,a)=>a>e?e:a<t?t:a;let ma=()=>{};const ve={},en=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function tn(t){return typeof t=="object"&&t!==null}const sn=t=>/^0[^.\s]+$/u.test(t);function ua(t){let e;return()=>(e===void 0&&(e=t()),e)}const de=t=>t,sm=(t,e)=>a=>e(t(a)),ft=(...t)=>t.reduce(sm),mt=(t,e,a)=>{const r=e-t;return r===0?1:(a-t)/r};class pa{constructor(){this.subscriptions=[]}add(e){return ca(this.subscriptions,e),()=>da(this.subscriptions,e)}notify(e,a,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,a,r);else for(let n=0;n<i;n++){const o=this.subscriptions[n];o&&o(e,a,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const he=t=>t*1e3,ce=t=>t/1e3;function an(t,e){return e?t*(1e3/e):0}const rn=(t,e,a)=>(((1-3*a+3*e)*t+(3*a-6*e))*t+3*e)*t,am=1e-7,rm=12;function im(t,e,a,r,i){let n,o,l=0;do o=e+(a-e)/2,n=rn(o,r,i)-t,n>0?a=o:e=o;while(Math.abs(n)>am&&++l<rm);return o}function bt(t,e,a,r){if(t===e&&a===r)return de;const i=n=>im(n,0,1,t,a);return n=>n===0||n===1?n:rn(i(n),e,r)}const nn=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,on=t=>e=>1-t(1-e),ln=bt(.33,1.53,.69,.99),ha=on(ln),cn=nn(ha),dn=t=>(t*=2)<1?.5*ha(t):.5*(2-Math.pow(2,-10*(t-1))),xa=t=>1-Math.sin(Math.acos(t)),mn=on(xa),un=nn(xa),nm=bt(.42,0,1,1),om=bt(0,0,.58,1),pn=bt(.42,0,.58,1),lm=t=>Array.isArray(t)&&typeof t[0]!="number",hn=t=>Array.isArray(t)&&typeof t[0]=="number",cm={linear:de,easeIn:nm,easeInOut:pn,easeOut:om,circIn:xa,circInOut:un,circOut:mn,backIn:ha,backInOut:cn,backOut:ln,anticipate:dn},dm=t=>typeof t=="string",dr=t=>{if(hn(t)){ma(t.length===4);const[e,a,r,i]=t;return bt(e,a,r,i)}else if(dm(t))return cm[t];return t},Tt=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],mr={value:null,addProjectionMetrics:null};function mm(t,e){let a=new Set,r=new Set,i=!1,n=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function m(h){o.has(h)&&(d.schedule(h),t()),c++,h(l)}const d={schedule:(h,p=!1,u=!1)=>{const g=u&&i?a:r;return p&&o.add(h),g.has(h)||g.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){n=!0;return}i=!0,[a,r]=[r,a],a.forEach(m),e&&mr.value&&mr.value.frameloop[e].push(c),c=0,a.clear(),i=!1,n&&(n=!1,d.process(h))}};return d}const um=40;function xn(t,e){let a=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},n=()=>a=!0,o=Tt.reduce((y,S)=>(y[S]=mm(n,e?S:void 0),y),{}),{setup:l,read:c,resolveKeyframes:m,preUpdate:d,update:h,preRender:p,render:u,postRender:x}=o,g=()=>{const y=ve.useManualTiming?i.timestamp:performance.now();a=!1,ve.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(y-i.timestamp,um),1)),i.timestamp=y,i.isProcessing=!0,l.process(i),c.process(i),m.process(i),d.process(i),h.process(i),p.process(i),u.process(i),x.process(i),i.isProcessing=!1,a&&e&&(r=!1,t(g))},b=()=>{a=!0,r=!0,i.isProcessing||t(g)};return{schedule:Tt.reduce((y,S)=>{const C=o[S];return y[S]=(N,A=!1,f=!1)=>(a||b(),C.schedule(N,A,f)),y},{}),cancel:y=>{for(let S=0;S<Tt.length;S++)o[Tt[S]].cancel(y)},state:i,steps:o}}const{schedule:B,cancel:Ce,state:Z,steps:os}=xn(typeof requestAnimationFrame<"u"?requestAnimationFrame:de,!0);let It;function pm(){It=void 0}const ie={now:()=>(It===void 0&&ie.set(Z.isProcessing||ve.useManualTiming?Z.timestamp:performance.now()),It),set:t=>{It=t,queueMicrotask(pm)}},gn=t=>e=>typeof e=="string"&&e.startsWith(t),ga=gn("--"),hm=gn("var(--"),fa=t=>hm(t)?xm.test(t.split("/*")[0].trim()):!1,xm=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ke={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ut={...Ke,transform:t=>be(0,1,t)},Pt={...Ke,default:1},it=t=>Math.round(t*1e5)/1e5,ba=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gm(t){return t==null}const fm=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,va=(t,e)=>a=>!!(typeof a=="string"&&fm.test(a)&&a.startsWith(t)||e&&!gm(a)&&Object.prototype.hasOwnProperty.call(a,e)),fn=(t,e,a)=>r=>{if(typeof r!="string")return r;const[i,n,o,l]=r.match(ba);return{[t]:parseFloat(i),[e]:parseFloat(n),[a]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},bm=t=>be(0,255,t),ls={...Ke,transform:t=>Math.round(bm(t))},$e={test:va("rgb","red"),parse:fn("red","green","blue"),transform:({red:t,green:e,blue:a,alpha:r=1})=>"rgba("+ls.transform(t)+", "+ls.transform(e)+", "+ls.transform(a)+", "+it(ut.transform(r))+")"};function vm(t){let e="",a="",r="",i="";return t.length>5?(e=t.substring(1,3),a=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),a=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,a+=a,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(a,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Ds={test:va("#"),parse:vm,transform:$e.transform},vt=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ne=vt("deg"),xe=vt("%"),R=vt("px"),ym=vt("vh"),jm=vt("vw"),ur=(()=>({...xe,parse:t=>xe.parse(t)/100,transform:t=>xe.transform(t*100)}))(),Be={test:va("hsl","hue"),parse:fn("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:a,alpha:r=1})=>"hsla("+Math.round(t)+", "+xe.transform(it(e))+", "+xe.transform(it(a))+", "+it(ut.transform(r))+")"},X={test:t=>$e.test(t)||Ds.test(t)||Be.test(t),parse:t=>$e.test(t)?$e.parse(t):Be.test(t)?Be.parse(t):Ds.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$e.transform(t):Be.transform(t),getAnimatableNone:t=>{const e=X.parse(t);return e.alpha=0,X.transform(e)}},Nm=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wm(t){var e,a;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ba))==null?void 0:e.length)||0)+(((a=t.match(Nm))==null?void 0:a.length)||0)>0}const bn="number",vn="color",Cm="var",km="var(",pr="${}",Sm=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pt(t){const e=t.toString(),a=[],r={color:[],number:[],var:[]},i=[];let n=0;const l=e.replace(Sm,c=>(X.test(c)?(r.color.push(n),i.push(vn),a.push(X.parse(c))):c.startsWith(km)?(r.var.push(n),i.push(Cm),a.push(c)):(r.number.push(n),i.push(bn),a.push(parseFloat(c))),++n,pr)).split(pr);return{values:a,split:l,indexes:r,types:i}}function yn(t){return pt(t).values}function jn(t){const{split:e,types:a}=pt(t),r=e.length;return i=>{let n="";for(let o=0;o<r;o++)if(n+=e[o],i[o]!==void 0){const l=a[o];l===bn?n+=it(i[o]):l===vn?n+=X.transform(i[o]):n+=i[o]}return n}}const Am=t=>typeof t=="number"?0:X.test(t)?X.getAnimatableNone(t):t;function Tm(t){const e=yn(t);return jn(t)(e.map(Am))}const ke={test:wm,parse:yn,createTransformer:jn,getAnimatableNone:Tm};function cs(t,e,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(e-t)*6*a:a<1/2?e:a<2/3?t+(e-t)*(2/3-a)*6:t}function Pm({hue:t,saturation:e,lightness:a,alpha:r}){t/=360,e/=100,a/=100;let i=0,n=0,o=0;if(!e)i=n=o=a;else{const l=a<.5?a*(1+e):a+e-a*e,c=2*a-l;i=cs(c,l,t+1/3),n=cs(c,l,t),o=cs(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(n*255),blue:Math.round(o*255),alpha:r}}function Ht(t,e){return a=>a>0?e:t}const G=(t,e,a)=>t+(e-t)*a,ds=(t,e,a)=>{const r=t*t,i=a*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Em=[Ds,$e,Be],Mm=t=>Em.find(e=>e.test(t));function hr(t){const e=Mm(t);if(!e)return!1;let a=e.parse(t);return e===Be&&(a=Pm(a)),a}const xr=(t,e)=>{const a=hr(t),r=hr(e);if(!a||!r)return Ht(t,e);const i={...a};return n=>(i.red=ds(a.red,r.red,n),i.green=ds(a.green,r.green,n),i.blue=ds(a.blue,r.blue,n),i.alpha=G(a.alpha,r.alpha,n),$e.transform(i))},$s=new Set(["none","hidden"]);function Rm(t,e){return $s.has(t)?a=>a<=0?t:e:a=>a>=1?e:t}function Dm(t,e){return a=>G(t,e,a)}function ya(t){return typeof t=="number"?Dm:typeof t=="string"?fa(t)?Ht:X.test(t)?xr:Vm:Array.isArray(t)?Nn:typeof t=="object"?X.test(t)?xr:$m:Ht}function Nn(t,e){const a=[...t],r=a.length,i=t.map((n,o)=>ya(n)(n,e[o]));return n=>{for(let o=0;o<r;o++)a[o]=i[o](n);return a}}function $m(t,e){const a={...t,...e},r={};for(const i in a)t[i]!==void 0&&e[i]!==void 0&&(r[i]=ya(t[i])(t[i],e[i]));return i=>{for(const n in r)a[n]=r[n](i);return a}}function Im(t,e){const a=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const n=e.types[i],o=t.indexes[n][r[n]],l=t.values[o]??0;a[i]=l,r[n]++}return a}const Vm=(t,e)=>{const a=ke.createTransformer(e),r=pt(t),i=pt(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?$s.has(t)&&!i.values.length||$s.has(e)&&!r.values.length?Rm(t,e):ft(Nn(Im(r,i),i.values),a):Ht(t,e)};function wn(t,e,a){return typeof t=="number"&&typeof e=="number"&&typeof a=="number"?G(t,e,a):ya(t)(t,e)}const Lm=t=>{const e=({timestamp:a})=>t(a);return{start:(a=!0)=>B.update(e,a),stop:()=>Ce(e),now:()=>Z.isProcessing?Z.timestamp:ie.now()}},Cn=(t,e,a=10)=>{let r="";const i=Math.max(Math.round(e/a),2);for(let n=0;n<i;n++)r+=Math.round(t(n/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Gt=2e4;function ja(t){let e=0;const a=50;let r=t.next(e);for(;!r.done&&e<Gt;)e+=a,r=t.next(e);return e>=Gt?1/0:e}function Fm(t,e=100,a){const r=a({...t,keyframes:[0,e]}),i=Math.min(ja(r),Gt);return{type:"keyframes",ease:n=>r.next(i*n).value/e,duration:ce(i)}}const qm=5;function kn(t,e,a){const r=Math.max(e-qm,0);return an(a-t(r),e-r)}const z={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ms=.001;function Om({duration:t=z.duration,bounce:e=z.bounce,velocity:a=z.velocity,mass:r=z.mass}){let i,n,o=1-e;o=be(z.minDamping,z.maxDamping,o),t=be(z.minDuration,z.maxDuration,ce(t)),o<1?(i=m=>{const d=m*o,h=d*t,p=d-a,u=Is(m,o),x=Math.exp(-h);return ms-p/u*x},n=m=>{const h=m*o*t,p=h*a+a,u=Math.pow(o,2)*Math.pow(m,2)*t,x=Math.exp(-h),g=Is(Math.pow(m,2),o);return(-i(m)+ms>0?-1:1)*((p-u)*x)/g}):(i=m=>{const d=Math.exp(-m*t),h=(m-a)*t+1;return-ms+d*h},n=m=>{const d=Math.exp(-m*t),h=(a-m)*(t*t);return d*h});const l=5/t,c=Hm(i,n,l);if(t=he(t),isNaN(c))return{stiffness:z.stiffness,damping:z.damping,duration:t};{const m=Math.pow(c,2)*r;return{stiffness:m,damping:o*2*Math.sqrt(r*m),duration:t}}}const Bm=12;function Hm(t,e,a){let r=a;for(let i=1;i<Bm;i++)r=r-t(r)/e(r);return r}function Is(t,e){return t*Math.sqrt(1-e*e)}const Gm=["duration","bounce"],_m=["stiffness","damping","mass"];function gr(t,e){return e.some(a=>t[a]!==void 0)}function zm(t){let e={velocity:z.velocity,stiffness:z.stiffness,damping:z.damping,mass:z.mass,isResolvedFromDuration:!1,...t};if(!gr(t,_m)&&gr(t,Gm))if(t.visualDuration){const a=t.visualDuration,r=2*Math.PI/(a*1.2),i=r*r,n=2*be(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:z.mass,stiffness:i,damping:n}}else{const a=Om(t);e={...e,...a,mass:z.mass},e.isResolvedFromDuration=!0}return e}function _t(t=z.visualDuration,e=z.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=a;const n=a.keyframes[0],o=a.keyframes[a.keyframes.length-1],l={done:!1,value:n},{stiffness:c,damping:m,mass:d,duration:h,velocity:p,isResolvedFromDuration:u}=zm({...a,velocity:-ce(a.velocity||0)}),x=p||0,g=m/(2*Math.sqrt(c*d)),b=o-n,v=ce(Math.sqrt(c/d)),w=Math.abs(b)<5;r||(r=w?z.restSpeed.granular:z.restSpeed.default),i||(i=w?z.restDelta.granular:z.restDelta.default);let y;if(g<1){const C=Is(v,g);y=N=>{const A=Math.exp(-g*v*N);return o-A*((x+g*v*b)/C*Math.sin(C*N)+b*Math.cos(C*N))}}else if(g===1)y=C=>o-Math.exp(-v*C)*(b+(x+v*b)*C);else{const C=v*Math.sqrt(g*g-1);y=N=>{const A=Math.exp(-g*v*N),f=Math.min(C*N,300);return o-A*((x+g*v*b)*Math.sinh(f)+C*b*Math.cosh(f))/C}}const S={calculatedDuration:u&&h||null,next:C=>{const N=y(C);if(u)l.done=C>=h;else{let A=C===0?x:0;g<1&&(A=C===0?he(x):kn(y,C,N));const f=Math.abs(A)<=r,k=Math.abs(o-N)<=i;l.done=f&&k}return l.value=l.done?o:N,l},toString:()=>{const C=Math.min(ja(S),Gt),N=Cn(A=>S.next(C*A).value,C,30);return C+"ms "+N},toTransition:()=>{}};return S}_t.applyToOptions=t=>{const e=Fm(t,100,_t);return t.ease=e.ease,t.duration=he(e.duration),t.type="keyframes",t};function Vs({keyframes:t,velocity:e=0,power:a=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:n=500,modifyTarget:o,min:l,max:c,restDelta:m=.5,restSpeed:d}){const h=t[0],p={done:!1,value:h},u=f=>l!==void 0&&f<l||c!==void 0&&f>c,x=f=>l===void 0?c:c===void 0||Math.abs(l-f)<Math.abs(c-f)?l:c;let g=a*e;const b=h+g,v=o===void 0?b:o(b);v!==b&&(g=v-h);const w=f=>-g*Math.exp(-f/r),y=f=>v+w(f),S=f=>{const k=w(f),E=y(f);p.done=Math.abs(k)<=m,p.value=p.done?v:E};let C,N;const A=f=>{u(p.value)&&(C=f,N=_t({keyframes:[p.value,x(p.value)],velocity:kn(y,f,p.value),damping:i,stiffness:n,restDelta:m,restSpeed:d}))};return A(0),{calculatedDuration:null,next:f=>{let k=!1;return!N&&C===void 0&&(k=!0,S(f),A(f)),C!==void 0&&f>=C?N.next(f-C):(!k&&S(f),p)}}}function Um(t,e,a){const r=[],i=a||ve.mix||wn,n=t.length-1;for(let o=0;o<n;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||de:e;l=ft(c,l)}r.push(l)}return r}function Qm(t,e,{clamp:a=!0,ease:r,mixer:i}={}){const n=t.length;if(ma(n===e.length),n===1)return()=>e[0];if(n===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[n-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Um(e,r,i),c=l.length,m=d=>{if(o&&d<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(d<t[h+1]);h++);const p=mt(t[h],t[h+1],d);return l[h](p)};return a?d=>m(be(t[0],t[n-1],d)):m}function Wm(t,e){const a=t[t.length-1];for(let r=1;r<=e;r++){const i=mt(0,e,r);t.push(G(a,1,i))}}function Xm(t){const e=[0];return Wm(e,t.length-1),e}function Km(t,e){return t.map(a=>a*e)}function Ym(t,e){return t.map(()=>e||pn).splice(0,t.length-1)}function nt({duration:t=300,keyframes:e,times:a,ease:r="easeInOut"}){const i=lm(r)?r.map(dr):dr(r),n={done:!1,value:e[0]},o=Km(a&&a.length===e.length?a:Xm(e),t),l=Qm(o,e,{ease:Array.isArray(i)?i:Ym(e,i)});return{calculatedDuration:t,next:c=>(n.value=l(c),n.done=c>=t,n)}}const Jm=t=>t!==null;function Na(t,{repeat:e,repeatType:a="loop"},r,i=1){const n=t.filter(Jm),l=i<0||e&&a!=="loop"&&e%2===1?0:n.length-1;return!l||r===void 0?n[l]:r}const Zm={decay:Vs,inertia:Vs,tween:nt,keyframes:nt,spring:_t};function Sn(t){typeof t.type=="string"&&(t.type=Zm[t.type])}class wa{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,a){return this.finished.then(e,a)}}const eu=t=>t/100;class Ca extends wa{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:a}=this.options;a&&a.updatedAt!==ie.now()&&this.tick(ie.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Sn(e);const{type:a=nt,repeat:r=0,repeatDelay:i=0,repeatType:n,velocity:o=0}=e;let{keyframes:l}=e;const c=a||nt;c!==nt&&typeof l[0]!="number"&&(this.mixKeyframes=ft(eu,wn(l[0],l[1])),l=[0,100]);const m=c({...e,keyframes:l});n==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),m.calculatedDuration===null&&(m.calculatedDuration=ja(m));const{calculatedDuration:d}=m;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=m}updateTime(e){const a=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=a}tick(e,a=!1){const{generator:r,totalDuration:i,mixKeyframes:n,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:m=0,keyframes:d,repeat:h,repeatType:p,repeatDelay:u,type:x,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),a?this.currentTime=e:this.updateTime(e);const v=this.currentTime-m*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let y=this.currentTime,S=r;if(h){const f=Math.min(this.currentTime,i)/l;let k=Math.floor(f),E=f%1;!E&&f>=1&&(E=1),E===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(p==="reverse"?(E=1-E,u&&(E-=u/l)):p==="mirror"&&(S=o)),y=be(0,1,E)*l}const C=w?{done:!1,value:d[0]}:S.next(y);n&&(C.value=n(C.value));let{done:N}=C;!w&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return A&&x!==Vs&&(C.value=Na(d,this.options,b,this.speed)),g&&g(C.value),A&&this.finish(),C}then(e,a){return this.finished.then(e,a)}get duration(){return ce(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ce(e)}get time(){return ce(this.currentTime)}set time(e){var a;e=he(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(a=this.driver)==null||a.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(ie.now());const a=this.playbackSpeed!==e;this.playbackSpeed=e,a&&(this.time=ce(this.currentTime))}play(){var i,n;if(this.isStopped)return;const{driver:e=Lm,startTime:a}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(n=(i=this.options).onPlay)==null||n.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=a??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ie.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,a;this.notifyFinished(),this.teardown(),this.state="finished",(a=(e=this.options).onComplete)==null||a.call(e)}cancel(){var e,a;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(a=(e=this.options).onCancel)==null||a.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var a;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(a=this.driver)==null||a.stop(),e.observe(this)}}function tu(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ie=t=>t*180/Math.PI,Ls=t=>{const e=Ie(Math.atan2(t[1],t[0]));return Fs(e)},su={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ls,rotateZ:Ls,skewX:t=>Ie(Math.atan(t[1])),skewY:t=>Ie(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Fs=t=>(t=t%360,t<0&&(t+=360),t),fr=Ls,br=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),vr=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),au={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:br,scaleY:vr,scale:t=>(br(t)+vr(t))/2,rotateX:t=>Fs(Ie(Math.atan2(t[6],t[5]))),rotateY:t=>Fs(Ie(Math.atan2(-t[2],t[0]))),rotateZ:fr,rotate:fr,skewX:t=>Ie(Math.atan(t[4])),skewY:t=>Ie(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function qs(t){return t.includes("scale")?1:0}function Os(t,e){if(!t||t==="none")return qs(e);const a=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(a)r=au,i=a;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=su,i=l}if(!i)return qs(e);const n=r[e],o=i[1].split(",").map(iu);return typeof n=="function"?n(o):o[n]}const ru=(t,e)=>{const{transform:a="none"}=getComputedStyle(t);return Os(a,e)};function iu(t){return parseFloat(t.trim())}const Ye=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Je=(()=>new Set(Ye))(),yr=t=>t===Ke||t===R,nu=new Set(["x","y","z"]),ou=Ye.filter(t=>!nu.has(t));function lu(t){const e=[];return ou.forEach(a=>{const r=t.getValue(a);r!==void 0&&(e.push([a,r.get()]),r.set(a.startsWith("scale")?1:0))}),e}const Ve={width:({x:t},{paddingLeft:e="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(e)-parseFloat(a),height:({y:t},{paddingTop:e="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(e)-parseFloat(a),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Os(e,"x"),y:(t,{transform:e})=>Os(e,"y")};Ve.translateX=Ve.x;Ve.translateY=Ve.y;const Le=new Set;let Bs=!1,Hs=!1,Gs=!1;function An(){if(Hs){const t=Array.from(Le).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),a=new Map;e.forEach(r=>{const i=lu(r);i.length&&(a.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=a.get(r);i&&i.forEach(([n,o])=>{var l;(l=r.getValue(n))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Hs=!1,Bs=!1,Le.forEach(t=>t.complete(Gs)),Le.clear()}function Tn(){Le.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Hs=!0)})}function cu(){Gs=!0,Tn(),An(),Gs=!1}class ka{constructor(e,a,r,i,n,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=a,this.name=r,this.motionValue=i,this.element=n,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Le.add(this),Bs||(Bs=!0,B.read(Tn),B.resolveKeyframes(An))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:a,element:r,motionValue:i}=this;if(e[0]===null){const n=i==null?void 0:i.get(),o=e[e.length-1];if(n!==void 0)e[0]=n;else if(r&&a){const l=r.readValue(a,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&n===void 0&&i.set(e[0])}tu(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Le.delete(this)}cancel(){this.state==="scheduled"&&(Le.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const du=t=>t.startsWith("--");function mu(t,e,a){du(e)?t.style.setProperty(e,a):t.style[e]=a}const uu=ua(()=>window.ScrollTimeline!==void 0),pu={};function hu(t,e){const a=ua(t);return()=>pu[e]??a()}const Pn=hu(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),at=([t,e,a,r])=>`cubic-bezier(${t}, ${e}, ${a}, ${r})`,jr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:at([0,.65,.55,1]),circOut:at([.55,0,1,.45]),backIn:at([.31,.01,.66,-.59]),backOut:at([.33,1.53,.69,.99])};function En(t,e){if(t)return typeof t=="function"?Pn()?Cn(t,e):"ease-out":hn(t)?at(t):Array.isArray(t)?t.map(a=>En(a,e)||jr.easeOut):jr[t]}function xu(t,e,a,{delay:r=0,duration:i=300,repeat:n=0,repeatType:o="loop",ease:l="easeOut",times:c}={},m=void 0){const d={[e]:a};c&&(d.offset=c);const h=En(l,i);Array.isArray(h)&&(d.easing=h);const p={delay:r,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:n+1,direction:o==="reverse"?"alternate":"normal"};return m&&(p.pseudoElement=m),t.animate(d,p)}function Mn(t){return typeof t=="function"&&"applyToOptions"in t}function gu({type:t,...e}){return Mn(t)&&Pn()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class fu extends wa{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:a,name:r,keyframes:i,pseudoElement:n,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!n,this.allowFlatten=o,this.options=e,ma(typeof e.type!="string");const m=gu(e);this.animation=xu(a,r,i,m,n),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!n){const d=Na(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):mu(a,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,a;(a=(e=this.animation).finish)==null||a.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,a;this.isPseudoElement||(a=(e=this.animation).commitStyles)==null||a.call(e)}get duration(){var a,r;const e=((r=(a=this.animation.effect)==null?void 0:a.getComputedTiming)==null?void 0:r.call(a).duration)||0;return ce(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ce(e)}get time(){return ce(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=he(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:a}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&uu()?(this.animation.timeline=e,de):a(this)}}const Rn={anticipate:dn,backInOut:cn,circInOut:un};function bu(t){return t in Rn}function vu(t){typeof t.ease=="string"&&bu(t.ease)&&(t.ease=Rn[t.ease])}const Nr=10;class yu extends fu{constructor(e){vu(e),Sn(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:a,onUpdate:r,onComplete:i,element:n,...o}=this.options;if(!a)return;if(e!==void 0){a.set(e);return}const l=new Ca({...o,autoplay:!1}),c=he(this.finishedTime??this.time);a.setWithVelocity(l.sample(c-Nr).value,l.sample(c).value,Nr),l.stop()}}const wr=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ke.test(t)||t==="0")&&!t.startsWith("url("));function ju(t){const e=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==e)return!0}function Nu(t,e,a,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const n=t[t.length-1],o=wr(i,e),l=wr(n,e);return!o||!l?!1:ju(t)||(a==="spring"||Mn(a))&&r}function _s(t){t.duration=0,t.type="keyframes"}const wu=new Set(["opacity","clipPath","filter","transform"]),Cu=ua(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ku(t){var d;const{motionValue:e,name:a,repeatDelay:r,repeatType:i,damping:n,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:m}=e.owner.getProps();return Cu()&&a&&wu.has(a)&&(a!=="transform"||!m)&&!c&&!r&&i!=="mirror"&&n!==0&&o!=="inertia"}const Su=40;class Au extends wa{constructor({autoplay:e=!0,delay:a=0,type:r="keyframes",repeat:i=0,repeatDelay:n=0,repeatType:o="loop",keyframes:l,name:c,motionValue:m,element:d,...h}){var x;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=ie.now();const p={autoplay:e,delay:a,type:r,repeat:i,repeatDelay:n,repeatType:o,name:c,motionValue:m,element:d,...h},u=(d==null?void 0:d.KeyframeResolver)||ka;this.keyframeResolver=new u(l,(g,b,v)=>this.onKeyframesResolved(g,b,p,!v),c,m,d),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,a,r,i){this.keyframeResolver=void 0;const{name:n,type:o,velocity:l,delay:c,isHandoff:m,onUpdate:d}=r;this.resolvedAt=ie.now(),Nu(e,n,o,l)||((ve.instantAnimations||!c)&&(d==null||d(Na(e,r,a))),e[0]=e[e.length-1],_s(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Su?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:a,...r,keyframes:e},u=!m&&ku(p)?new yu({...p,element:p.motionValue.owner.current}):new Ca(p);u.finished.then(()=>this.notifyFinished()).catch(de),this.pendingTimeline&&(this.stopTimeline=u.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=u}get finished(){return this._animation?this.animation.finished:this._finished}then(e,a){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),cu()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Tu=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Pu(t){const e=Tu.exec(t);if(!e)return[,];const[,a,r,i]=e;return[`--${a??r}`,i]}function Dn(t,e,a=1){const[r,i]=Pu(t);if(!r)return;const n=window.getComputedStyle(e).getPropertyValue(r);if(n){const o=n.trim();return en(o)?parseFloat(o):o}return fa(i)?Dn(i,e,a+1):i}function Sa(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const $n=new Set(["width","height","top","left","right","bottom",...Ye]),Eu={test:t=>t==="auto",parse:t=>t},In=t=>e=>e.test(t),Vn=[Ke,R,xe,Ne,jm,ym,Eu],Cr=t=>Vn.find(In(t));function Mu(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||sn(t):!0}const Ru=new Set(["brightness","contrast","saturate","opacity"]);function Du(t){const[e,a]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=a.match(ba)||[];if(!r)return t;const i=a.replace(r,"");let n=Ru.has(e)?1:0;return r!==a&&(n*=100),e+"("+n+i+")"}const $u=/\b([a-z-]*)\(.*?\)/gu,zs={...ke,getAnimatableNone:t=>{const e=t.match($u);return e?e.map(Du).join(" "):t}},kr={...Ke,transform:Math.round},Iu={rotate:Ne,rotateX:Ne,rotateY:Ne,rotateZ:Ne,scale:Pt,scaleX:Pt,scaleY:Pt,scaleZ:Pt,skew:Ne,skewX:Ne,skewY:Ne,distance:R,translateX:R,translateY:R,translateZ:R,x:R,y:R,z:R,perspective:R,transformPerspective:R,opacity:ut,originX:ur,originY:ur,originZ:R},Aa={borderWidth:R,borderTopWidth:R,borderRightWidth:R,borderBottomWidth:R,borderLeftWidth:R,borderRadius:R,radius:R,borderTopLeftRadius:R,borderTopRightRadius:R,borderBottomRightRadius:R,borderBottomLeftRadius:R,width:R,maxWidth:R,height:R,maxHeight:R,top:R,right:R,bottom:R,left:R,padding:R,paddingTop:R,paddingRight:R,paddingBottom:R,paddingLeft:R,margin:R,marginTop:R,marginRight:R,marginBottom:R,marginLeft:R,backgroundPositionX:R,backgroundPositionY:R,...Iu,zIndex:kr,fillOpacity:ut,strokeOpacity:ut,numOctaves:kr},Vu={...Aa,color:X,backgroundColor:X,outlineColor:X,fill:X,stroke:X,borderColor:X,borderTopColor:X,borderRightColor:X,borderBottomColor:X,borderLeftColor:X,filter:zs,WebkitFilter:zs},Ln=t=>Vu[t];function Fn(t,e){let a=Ln(t);return a!==zs&&(a=ke),a.getAnimatableNone?a.getAnimatableNone(e):void 0}const Lu=new Set(["auto","none","0"]);function Fu(t,e,a){let r=0,i;for(;r<t.length&&!i;){const n=t[r];typeof n=="string"&&!Lu.has(n)&&pt(n).values.length&&(i=t[r]),r++}if(i&&a)for(const n of e)t[n]=Fn(a,i)}class qu extends ka{constructor(e,a,r,i,n){super(e,a,r,i,n,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:a,name:r}=this;if(!a||!a.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let m=e[c];if(typeof m=="string"&&(m=m.trim(),fa(m))){const d=Dn(m,a.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!$n.has(r)||e.length!==2)return;const[i,n]=e,o=Cr(i),l=Cr(n);if(o!==l)if(yr(o)&&yr(l))for(let c=0;c<e.length;c++){const m=e[c];typeof m=="string"&&(e[c]=parseFloat(m))}else Ve[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:a}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||Mu(e[i]))&&r.push(i);r.length&&Fu(e,r,a)}measureInitialState(){const{element:e,unresolvedKeyframes:a,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ve[r](e.measureViewportBox(),window.getComputedStyle(e.current)),a[0]=this.measuredOrigin;const i=a[a.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:a,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(a);i&&i.jump(this.measuredOrigin,!1);const n=r.length-1,o=r[n];r[n]=Ve[a](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,m])=>{e.getValue(c).set(m)}),this.resolveNoneKeyframes()}}function Ou(t,e,a){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const i=(a==null?void 0:a[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const qn=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function On(t){return tn(t)&&"offsetHeight"in t}const Sr=30,Bu=t=>!isNaN(parseFloat(t));class Hu{constructor(e,a={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var n;const i=ie.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((n=this.events.change)==null||n.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=a.owner}setCurrent(e){this.current=e,this.updatedAt=ie.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Bu(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,a){this.events[e]||(this.events[e]=new pa);const r=this.events[e].add(a);return e==="change"?()=>{r(),B.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,a){this.passiveEffect=e,this.stopPassiveEffect=a}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,a,r){this.set(a),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,a=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ie.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Sr)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,Sr);return an(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(e){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=e(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,a;(e=this.dependents)==null||e.clear(),(a=this.events.destroy)==null||a.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function We(t,e){return new Hu(t,e)}const{schedule:Ta,cancel:cg}=xn(queueMicrotask,!1),me={x:!1,y:!1};function Bn(){return me.x||me.y}function Gu(t){return t==="x"||t==="y"?me[t]?null:(me[t]=!0,()=>{me[t]=!1}):me.x||me.y?null:(me.x=me.y=!0,()=>{me.x=me.y=!1})}function Hn(t,e){const a=Ou(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[a,i,()=>r.abort()]}function Ar(t){return!(t.pointerType==="touch"||Bn())}function _u(t,e,a={}){const[r,i,n]=Hn(t,a),o=l=>{if(!Ar(l))return;const{target:c}=l,m=e(c,l);if(typeof m!="function"||!c)return;const d=h=>{Ar(h)&&(m(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),n}const Gn=(t,e)=>e?t===e?!0:Gn(t,e.parentElement):!1,Pa=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,zu=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Uu(t){return zu.has(t.tagName)||t.tabIndex!==-1}const Vt=new WeakSet;function Tr(t){return e=>{e.key==="Enter"&&t(e)}}function us(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Qu=(t,e)=>{const a=t.currentTarget;if(!a)return;const r=Tr(()=>{if(Vt.has(a))return;us(a,"down");const i=Tr(()=>{us(a,"up")}),n=()=>us(a,"cancel");a.addEventListener("keyup",i,e),a.addEventListener("blur",n,e)});a.addEventListener("keydown",r,e),a.addEventListener("blur",()=>a.removeEventListener("keydown",r),e)};function Pr(t){return Pa(t)&&!Bn()}function Wu(t,e,a={}){const[r,i,n]=Hn(t,a),o=l=>{const c=l.currentTarget;if(!Pr(l))return;Vt.add(c);const m=e(c,l),d=(u,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",p),Vt.has(c)&&Vt.delete(c),Pr(u)&&typeof m=="function"&&m(u,{success:x})},h=u=>{d(u,c===window||c===document||a.useGlobalTarget||Gn(c,u.target))},p=u=>{d(u,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",p,i)};return r.forEach(l=>{(a.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),On(l)&&(l.addEventListener("focus",m=>Qu(m,i)),!Uu(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),n}function _n(t){return tn(t)&&"ownerSVGElement"in t}function Xu(t){return _n(t)&&t.tagName==="svg"}const te=t=>!!(t&&t.getVelocity),Ku=[...Vn,X,ke],Yu=t=>Ku.find(In(t)),Ea=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Er(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ju(...t){return e=>{let a=!1;const r=t.map(i=>{const n=Er(i,e);return!a&&typeof n=="function"&&(a=!0),n});if(a)return()=>{for(let i=0;i<r.length;i++){const n=r[i];typeof n=="function"?n():Er(t[i],null)}}}}function Zu(...t){return j.useCallback(Ju(...t),t)}class ep extends j.Component{getSnapshotBeforeUpdate(e){const a=this.props.childRef.current;if(a&&e.isPresent&&!this.props.isPresent){const r=a.offsetParent,i=On(r)&&r.offsetWidth||0,n=this.props.sizeRef.current;n.height=a.offsetHeight||0,n.width=a.offsetWidth||0,n.top=a.offsetTop,n.left=a.offsetLeft,n.right=i-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function tp({children:t,isPresent:e,anchorX:a,root:r}){const i=j.useId(),n=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=j.useContext(Ea),c=Zu(n,t==null?void 0:t.ref);return j.useInsertionEffect(()=>{const{width:m,height:d,top:h,left:p,right:u}=o.current;if(e||!n.current||!m||!d)return;const x=a==="left"?`left: ${p}`:`right: ${u}`;n.current.dataset.motionPopId=i;const g=document.createElement("style");l&&(g.nonce=l);const b=r??document.head;return b.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${d}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(g)&&b.removeChild(g)}},[e]),s.jsx(ep,{isPresent:e,childRef:n,sizeRef:o,children:j.cloneElement(t,{ref:c})})}const sp=({children:t,initial:e,isPresent:a,onExitComplete:r,custom:i,presenceAffectsLayout:n,mode:o,anchorX:l,root:c})=>{const m=oa(ap),d=j.useId();let h=!0,p=j.useMemo(()=>(h=!1,{id:d,initial:e,isPresent:a,custom:i,onExitComplete:u=>{m.set(u,!0);for(const x of m.values())if(!x)return;r&&r()},register:u=>(m.set(u,!1),()=>m.delete(u))}),[a,m,r]);return n&&h&&(p={...p}),j.useMemo(()=>{m.forEach((u,x)=>m.set(x,!1))},[a]),j.useEffect(()=>{!a&&!m.size&&r&&r()},[a]),o==="popLayout"&&(t=s.jsx(tp,{isPresent:a,anchorX:l,root:c,children:t})),s.jsx(Yt.Provider,{value:p,children:t})};function ap(){return new Map}function zn(t=!0){const e=j.useContext(Yt);if(e===null)return[!0,null];const{isPresent:a,onExitComplete:r,register:i}=e,n=j.useId();j.useEffect(()=>{if(t)return i(n)},[t]);const o=j.useCallback(()=>t&&r&&r(n),[n,r,t]);return!a&&r?[!1,o]:[!0]}const Et=t=>t.key||"";function Mr(t){const e=[];return j.Children.forEach(t,a=>{j.isValidElement(a)&&e.push(a)}),e}const Fe=({children:t,custom:e,initial:a=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:n="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[m,d]=zn(o),h=j.useMemo(()=>Mr(t),[t]),p=o&&!m?[]:h.map(Et),u=j.useRef(!0),x=j.useRef(h),g=oa(()=>new Map),[b,v]=j.useState(h),[w,y]=j.useState(h);Zi(()=>{u.current=!1,x.current=h;for(let N=0;N<w.length;N++){const A=Et(w[N]);p.includes(A)?g.delete(A):g.get(A)!==!0&&g.set(A,!1)}},[w,p.length,p.join("-")]);const S=[];if(h!==b){let N=[...h];for(let A=0;A<w.length;A++){const f=w[A],k=Et(f);p.includes(k)||(N.splice(A,0,f),S.push(f))}return n==="wait"&&S.length&&(N=S),y(Mr(N)),v(h),null}const{forceRender:C}=j.useContext(na);return s.jsx(s.Fragment,{children:w.map(N=>{const A=Et(N),f=o&&!m?!1:h===w||p.includes(A),k=()=>{if(g.has(A))g.set(A,!0);else return;let E=!0;g.forEach(D=>{D||(E=!1)}),E&&(C==null||C(),y(x.current),o&&(d==null||d()),r&&r())};return s.jsx(sp,{isPresent:f,initial:!u.current||a?void 0:!1,custom:e,presenceAffectsLayout:i,mode:n,root:c,onExitComplete:f?void 0:k,anchorX:l,children:N},A)})})},Un=j.createContext({strict:!1}),Rr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xe={};for(const t in Rr)Xe[t]={isEnabled:e=>Rr[t].some(a=>!!e[a])};function rp(t){for(const e in t)Xe[e]={...Xe[e],...t[e]}}const ip=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zt(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ip.has(t)}let Qn=t=>!zt(t);function np(t){typeof t=="function"&&(Qn=e=>e.startsWith("on")?!zt(e):t(e))}try{np(require("@emotion/is-prop-valid").default)}catch{}function op(t,e,a){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Qn(i)||a===!0&&zt(i)||!e&&!zt(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Jt=j.createContext({});function Zt(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function ht(t){return typeof t=="string"||Array.isArray(t)}const Ma=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ra=["initial",...Ma];function es(t){return Zt(t.animate)||Ra.some(e=>ht(t[e]))}function Wn(t){return!!(es(t)||t.variants)}function lp(t,e){if(es(t)){const{initial:a,animate:r}=t;return{initial:a===!1||ht(a)?a:void 0,animate:ht(r)?r:void 0}}return t.inherit!==!1?e:{}}function cp(t){const{initial:e,animate:a}=lp(t,j.useContext(Jt));return j.useMemo(()=>({initial:e,animate:a}),[Dr(e),Dr(a)])}function Dr(t){return Array.isArray(t)?t.join(" "):t}const xt={};function dp(t){for(const e in t)xt[e]=t[e],ga(e)&&(xt[e].isCSSVariable=!0)}function Xn(t,{layout:e,layoutId:a}){return Je.has(t)||t.startsWith("origin")||(e||a!==void 0)&&(!!xt[t]||t==="opacity")}const mp={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},up=Ye.length;function pp(t,e,a){let r="",i=!0;for(let n=0;n<up;n++){const o=Ye[n],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||a){const m=qn(l,Aa[o]);if(!c){i=!1;const d=mp[o]||o;r+=`${d}(${m}) `}a&&(e[o]=m)}}return r=r.trim(),a?r=a(e,i?"":r):i&&(r="none"),r}function Da(t,e,a){const{style:r,vars:i,transformOrigin:n}=t;let o=!1,l=!1;for(const c in e){const m=e[c];if(Je.has(c)){o=!0;continue}else if(ga(c)){i[c]=m;continue}else{const d=qn(m,Aa[c]);c.startsWith("origin")?(l=!0,n[c]=d):r[c]=d}}if(e.transform||(o||a?r.transform=pp(e,t.transform,a):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:m="50%",originZ:d=0}=n;r.transformOrigin=`${c} ${m} ${d}`}}const $a=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Kn(t,e,a){for(const r in e)!te(e[r])&&!Xn(r,a)&&(t[r]=e[r])}function hp({transformTemplate:t},e){return j.useMemo(()=>{const a=$a();return Da(a,e,t),Object.assign({},a.vars,a.style)},[e])}function xp(t,e){const a=t.style||{},r={};return Kn(r,a,t),Object.assign(r,hp(t,e)),r}function gp(t,e){const a={},r=xp(t,e);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=r,a}const fp={offset:"stroke-dashoffset",array:"stroke-dasharray"},bp={offset:"strokeDashoffset",array:"strokeDasharray"};function vp(t,e,a=1,r=0,i=!0){t.pathLength=1;const n=i?fp:bp;t[n.offset]=R.transform(-r);const o=R.transform(e),l=R.transform(a);t[n.array]=`${o} ${l}`}function Yn(t,{attrX:e,attrY:a,attrScale:r,pathLength:i,pathSpacing:n=1,pathOffset:o=0,...l},c,m,d){if(Da(t,l,m),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p}=t;h.transform&&(p.transform=h.transform,delete h.transform),(p.transform||h.transformOrigin)&&(p.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),p.transform&&(p.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),a!==void 0&&(h.y=a),r!==void 0&&(h.scale=r),i!==void 0&&vp(h,i,n,o,!1)}const Jn=()=>({...$a(),attrs:{}}),Zn=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yp(t,e,a,r){const i=j.useMemo(()=>{const n=Jn();return Yn(n,e,Zn(r),t.transformTemplate,t.style),{...n.attrs,style:{...n.style}}},[e]);if(t.style){const n={};Kn(n,t.style,t),i.style={...n,...i.style}}return i}const jp=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ia(t){return typeof t!="string"||t.includes("-")?!1:!!(jp.indexOf(t)>-1||/[A-Z]/u.test(t))}function Np(t,e,a,{latestValues:r},i,n=!1){const l=(Ia(t)?yp:gp)(e,r,i,t),c=op(e,typeof t=="string",n),m=t!==j.Fragment?{...c,...l,ref:a}:{},{children:d}=e,h=j.useMemo(()=>te(d)?d.get():d,[d]);return j.createElement(t,{...m,children:h})}function $r(t){const e=[{},{}];return t==null||t.values.forEach((a,r)=>{e[0][r]=a.get(),e[1][r]=a.getVelocity()}),e}function Va(t,e,a,r){if(typeof e=="function"){const[i,n]=$r(r);e=e(a!==void 0?a:t.custom,i,n)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,n]=$r(r);e=e(a!==void 0?a:t.custom,i,n)}return e}function Lt(t){return te(t)?t.get():t}function wp({scrapeMotionValuesFromProps:t,createRenderState:e},a,r,i){return{latestValues:Cp(a,r,i,t),renderState:e()}}function Cp(t,e,a,r){const i={},n=r(t,{});for(const p in n)i[p]=Lt(n[p]);let{initial:o,animate:l}=t;const c=es(t),m=Wn(t);e&&m&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=a?a.initial===!1:!1;d=d||o===!1;const h=d?l:o;if(h&&typeof h!="boolean"&&!Zt(h)){const p=Array.isArray(h)?h:[h];for(let u=0;u<p.length;u++){const x=Va(t,p[u]);if(x){const{transitionEnd:g,transition:b,...v}=x;for(const w in v){let y=v[w];if(Array.isArray(y)){const S=d?y.length-1:0;y=y[S]}y!==null&&(i[w]=y)}for(const w in g)i[w]=g[w]}}}return i}const eo=t=>(e,a)=>{const r=j.useContext(Jt),i=j.useContext(Yt),n=()=>wp(t,e,r,i);return a?n():oa(n)};function La(t,e,a){var n;const{style:r}=t,i={};for(const o in r)(te(r[o])||e.style&&te(e.style[o])||Xn(o,t)||((n=a==null?void 0:a.getValue(o))==null?void 0:n.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const kp=eo({scrapeMotionValuesFromProps:La,createRenderState:$a});function to(t,e,a){const r=La(t,e,a);for(const i in t)if(te(t[i])||te(e[i])){const n=Ye.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[n]=t[i]}return r}const Sp=eo({scrapeMotionValuesFromProps:to,createRenderState:Jn}),Ap=Symbol.for("motionComponentSymbol");function He(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Tp(t,e,a){return j.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),a&&(typeof a=="function"?a(r):He(a)&&(a.current=r))},[e])}const Fa=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Pp="framerAppearId",so="data-"+Fa(Pp),ao=j.createContext({});function Ep(t,e,a,r,i){var g,b;const{visualElement:n}=j.useContext(Jt),o=j.useContext(Un),l=j.useContext(Yt),c=j.useContext(Ea).reducedMotion,m=j.useRef(null);r=r||o.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:n,props:a,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=m.current,h=j.useContext(ao);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&Mp(m.current,a,i,h);const p=j.useRef(!1);j.useInsertionEffect(()=>{d&&p.current&&d.update(a,l)});const u=a[so],x=j.useRef(!!u&&!((g=window.MotionHandoffIsComplete)!=null&&g.call(window,u))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,u)));return Zi(()=>{d&&(p.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),j.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,u)}),x.current=!1),d.enteringChildren=void 0)}),d}function Mp(t,e,a,r){const{layoutId:i,layout:n,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:m,layoutCrossfade:d}=e;t.projection=new a(t.latestValues,e["data-framer-portal-id"]?void 0:ro(t.parent)),t.projection.setOptions({layoutId:i,layout:n,alwaysMeasureLayout:!!o||l&&He(l),visualElement:t,animationType:typeof n=="string"?n:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:m})}function ro(t){if(t)return t.options.allowProjection!==!1?t.projection:ro(t.parent)}function ps(t,{forwardMotionProps:e=!1}={},a,r){a&&rp(a);const i=Ia(t)?Sp:kp;function n(l,c){let m;const d={...j.useContext(Ea),...l,layoutId:Rp(l)},{isStatic:h}=d,p=cp(l),u=i(l,h);if(!h&&la){Dp();const x=$p(d);m=x.MeasureLayout,p.visualElement=Ep(t,u,d,r,x.ProjectionNode)}return s.jsxs(Jt.Provider,{value:p,children:[m&&p.visualElement?s.jsx(m,{visualElement:p.visualElement,...d}):null,Np(t,l,Tp(u,p.visualElement,c),u,h,e)]})}n.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=j.forwardRef(n);return o[Ap]=t,o}function Rp({layoutId:t}){const e=j.useContext(na).id;return e&&t!==void 0?e+"-"+t:t}function Dp(t,e){j.useContext(Un).strict}function $p(t){const{drag:e,layout:a}=Xe;if(!e&&!a)return{};const r={...e,...a};return{MeasureLayout:e!=null&&e.isEnabled(t)||a!=null&&a.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Ip(t,e){if(typeof Proxy>"u")return ps;const a=new Map,r=(n,o)=>ps(n,o,t,e),i=(n,o)=>r(n,o);return new Proxy(i,{get:(n,o)=>o==="create"?r:(a.has(o)||a.set(o,ps(o,void 0,t,e)),a.get(o))})}function io({top:t,left:e,right:a,bottom:r}){return{x:{min:e,max:a},y:{min:t,max:r}}}function Vp({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Lp(t,e){if(!e)return t;const a=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:r.y,right:r.x}}function hs(t){return t===void 0||t===1}function Us({scale:t,scaleX:e,scaleY:a}){return!hs(t)||!hs(e)||!hs(a)}function Pe(t){return Us(t)||no(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function no(t){return Ir(t.x)||Ir(t.y)}function Ir(t){return t&&t!=="0%"}function Ut(t,e,a){const r=t-a,i=e*r;return a+i}function Vr(t,e,a,r,i){return i!==void 0&&(t=Ut(t,i,r)),Ut(t,a,r)+e}function Qs(t,e=0,a=1,r,i){t.min=Vr(t.min,e,a,r,i),t.max=Vr(t.max,e,a,r,i)}function oo(t,{x:e,y:a}){Qs(t.x,e.translate,e.scale,e.originPoint),Qs(t.y,a.translate,a.scale,a.originPoint)}const Lr=.999999999999,Fr=1.0000000000001;function Fp(t,e,a,r=!1){const i=a.length;if(!i)return;e.x=e.y=1;let n,o;for(let l=0;l<i;l++){n=a[l],o=n.projectionDelta;const{visualElement:c}=n.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&n.options.layoutScroll&&n.scroll&&n!==n.root&&_e(t,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,oo(t,o)),r&&Pe(n.latestValues)&&_e(t,n.latestValues))}e.x<Fr&&e.x>Lr&&(e.x=1),e.y<Fr&&e.y>Lr&&(e.y=1)}function Ge(t,e){t.min=t.min+e,t.max=t.max+e}function qr(t,e,a,r,i=.5){const n=G(t.min,t.max,i);Qs(t,e,a,n,r)}function _e(t,e){qr(t.x,e.x,e.scaleX,e.scale,e.originX),qr(t.y,e.y,e.scaleY,e.scale,e.originY)}function lo(t,e){return io(Lp(t.getBoundingClientRect(),e))}function qp(t,e,a){const r=lo(t,a),{scroll:i}=e;return i&&(Ge(r.x,i.offset.x),Ge(r.y,i.offset.y)),r}const Or=()=>({translate:0,scale:1,origin:0,originPoint:0}),ze=()=>({x:Or(),y:Or()}),Br=()=>({min:0,max:0}),W=()=>({x:Br(),y:Br()}),Ws={current:null},co={current:!1};function Op(){if(co.current=!0,!!la)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ws.current=t.matches;t.addEventListener("change",e),e()}else Ws.current=!1}const Bp=new WeakMap;function Hp(t,e,a){for(const r in e){const i=e[r],n=a[r];if(te(i))t.addValue(r,i);else if(te(n))t.addValue(r,We(i,{owner:t}));else if(n!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,We(o!==void 0?o:i,{owner:t}))}}for(const r in a)e[r]===void 0&&t.removeValue(r);return e}const Hr=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Gp{scrapeMotionValuesFromProps(e,a,r){return{}}constructor({parent:e,props:a,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:n,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ka,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ie.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,B.render(this.render,!1,!0))};const{latestValues:c,renderState:m}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=a.initial?{...c}:{},this.renderState=m,this.parent=e,this.props=a,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!n,this.isControllingVariants=es(a),this.isVariantNode=Wn(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(a,{},this);for(const p in h){const u=h[p];c[p]!==void 0&&te(u)&&u.set(c[p])}}mount(e){var a;this.current=e,Bp.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),co.current||Op(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ws.current,(a=this.parent)==null||a.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Ce(this.notifyUpdate),Ce(this.render),this.valueSubscriptions.forEach(a=>a()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const a in this.events)this.events[a].clear();for(const a in this.features){const r=this.features[a];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,a){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Je.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=a.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&B.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let n;window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,a)),this.valueSubscriptions.set(e,()=>{i(),n&&n(),a.owner&&a.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xe){const a=Xe[e];if(!a)continue;const{isEnabled:r,Feature:i}=a;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):W()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,a){this.latestValues[e]=a}update(e,a){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let r=0;r<Hr.length;r++){const i=Hr[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const n="on"+i,o=e[n];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Hp(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(e),()=>a.variantChildren.delete(e)}addValue(e,a){const r=this.values.get(e);a!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,a),this.values.set(e,a),this.latestValues[e]=a.get())}removeValue(e){this.values.delete(e);const a=this.valueSubscriptions.get(e);a&&(a(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,a){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&a!==void 0&&(r=We(a===null?void 0:a,{owner:this}),this.addValue(e,r)),r}readValue(e,a){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(en(r)||sn(r))?r=parseFloat(r):!Yu(r)&&ke.test(a)&&(r=Fn(e,a)),this.setBaseTarget(e,te(r)?r.get():r)),te(r)?r.get():r}setBaseTarget(e,a){this.baseTarget[e]=a}getBaseTarget(e){var n;const{initial:a}=this.props;let r;if(typeof a=="string"||typeof a=="object"){const o=Va(this.props,a,(n=this.presenceContext)==null?void 0:n.custom);o&&(r=o[e])}if(a&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!te(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,a){return this.events[e]||(this.events[e]=new pa),this.events[e].add(a)}notify(e,...a){this.events[e]&&this.events[e].notify(...a)}scheduleRenderMicrotask(){Ta.render(this.render)}}class mo extends Gp{constructor(){super(...arguments),this.KeyframeResolver=qu}sortInstanceNodePosition(e,a){return e.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(e,a){return e.style?e.style[a]:void 0}removeValueFromRenderState(e,{vars:a,style:r}){delete a[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;te(e)&&(this.childSubscription=e.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function uo(t,{style:e,vars:a},r,i){const n=t.style;let o;for(o in e)n[o]=e[o];i==null||i.applyProjectionStyles(n,r);for(o in a)n.setProperty(o,a[o])}function _p(t){return window.getComputedStyle(t)}class zp extends mo{constructor(){super(...arguments),this.type="html",this.renderInstance=uo}readValueFromInstance(e,a){var r;if(Je.has(a))return(r=this.projection)!=null&&r.isProjecting?qs(a):ru(e,a);{const i=_p(e),n=(ga(a)?i.getPropertyValue(a):i[a])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:a}){return lo(e,a)}build(e,a,r){Da(e,a,r.transformTemplate)}scrapeMotionValuesFromProps(e,a,r){return La(e,a,r)}}const po=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Up(t,e,a,r){uo(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(po.has(i)?i:Fa(i),e.attrs[i])}class Qp extends mo{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=W}getBaseTargetFromProps(e,a){return e[a]}readValueFromInstance(e,a){if(Je.has(a)){const r=Ln(a);return r&&r.default||0}return a=po.has(a)?a:Fa(a),e.getAttribute(a)}scrapeMotionValuesFromProps(e,a,r){return to(e,a,r)}build(e,a,r){Yn(e,a,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,a,r,i){Up(e,a,r,i)}mount(e){this.isSVGTag=Zn(e.tagName),super.mount(e)}}const Wp=(t,e)=>Ia(t)?new Qp(e):new zp(e,{allowProjection:t!==j.Fragment});function Ue(t,e,a){const r=t.getProps();return Va(r,e,a!==void 0?a:r.custom,t)}const Xs=t=>Array.isArray(t);function Xp(t,e,a){t.hasValue(e)?t.getValue(e).set(a):t.addValue(e,We(a))}function Kp(t){return Xs(t)?t[t.length-1]||0:t}function Yp(t,e){const a=Ue(t,e);let{transitionEnd:r={},transition:i={},...n}=a||{};n={...n,...r};for(const o in n){const l=Kp(n[o]);Xp(t,o,l)}}function Jp(t){return!!(te(t)&&t.add)}function Ks(t,e){const a=t.getValue("willChange");if(Jp(a))return a.add(e);if(!a&&ve.WillChange){const r=new ve.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function ho(t){return t.props[so]}const Zp=t=>t!==null;function eh(t,{repeat:e,repeatType:a="loop"},r){const i=t.filter(Zp),n=e&&a!=="loop"&&e%2===1?0:i.length-1;return!n||r===void 0?i[n]:r}const th={type:"spring",stiffness:500,damping:25,restSpeed:10},sh=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ah={type:"keyframes",duration:.8},rh={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ih=(t,{keyframes:e})=>e.length>2?ah:Je.has(t)?t.startsWith("scale")?sh(e[1]):th:rh;function nh({when:t,delay:e,delayChildren:a,staggerChildren:r,staggerDirection:i,repeat:n,repeatType:o,repeatDelay:l,from:c,elapsed:m,...d}){return!!Object.keys(d).length}const qa=(t,e,a,r={},i,n)=>o=>{const l=Sa(r,t)||{},c=l.delay||r.delay||0;let{elapsed:m=0}=r;m=m-he(c);const d={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-m,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:n?void 0:i};nh(l)||Object.assign(d,ih(t,d)),d.duration&&(d.duration=he(d.duration)),d.repeatDelay&&(d.repeatDelay=he(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(_s(d),d.delay===0&&(h=!0)),(ve.instantAnimations||ve.skipAnimations)&&(h=!0,_s(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!n&&e.get()!==void 0){const p=eh(d.keyframes,l);if(p!==void 0){B.update(()=>{d.onUpdate(p),d.onComplete()});return}}return l.isSync?new Ca(d):new Au(d)};function oh({protectedKeys:t,needsAnimating:e},a){const r=t.hasOwnProperty(a)&&e[a]!==!0;return e[a]=!1,r}function xo(t,e,{delay:a=0,transitionOverride:r,type:i}={}){let{transition:n=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(n=r);const c=[],m=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,t.latestValues[d]??null),p=l[d];if(p===void 0||m&&oh(m,d))continue;const u={delay:a,...Sa(n||{},d)},x=h.get();if(x!==void 0&&!h.isAnimating&&!Array.isArray(p)&&p===x&&!u.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const v=ho(t);if(v){const w=window.MotionHandoffAnimation(v,d,B);w!==null&&(u.startTime=w,g=!0)}}Ks(t,d),h.start(qa(d,h,p,t.shouldReduceMotion&&$n.has(d)?{type:!1}:u,t,g));const b=h.animation;b&&c.push(b)}return o&&Promise.all(c).then(()=>{B.update(()=>{o&&Yp(t,o)})}),c}function go(t,e,a,r=0,i=1){const n=Array.from(t).sort((m,d)=>m.sortNodePosition(d)).indexOf(e),o=t.size,l=(o-1)*r;return typeof a=="function"?a(n,o):i===1?n*r:l-n*r}function Ys(t,e,a={}){var c;const r=Ue(t,e,a.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};a.transitionOverride&&(i=a.transitionOverride);const n=r?()=>Promise.all(xo(t,r,a)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return lh(t,e,m,d,h,p,a)}:()=>Promise.resolve(),{when:l}=i;if(l){const[m,d]=l==="beforeChildren"?[n,o]:[o,n];return m().then(()=>d())}else return Promise.all([n(),o(a.delay)])}function lh(t,e,a=0,r=0,i=0,n=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Ys(c,e,{...o,delay:a+(typeof r=="function"?0:r)+go(t.variantChildren,c,r,i,n)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function ch(t,e,a={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(n=>Ys(t,n,a));r=Promise.all(i)}else if(typeof e=="string")r=Ys(t,e,a);else{const i=typeof e=="function"?Ue(t,e,a.custom):e;r=Promise.all(xo(t,i,a))}return r.then(()=>{t.notify("AnimationComplete",e)})}function fo(t,e){if(!Array.isArray(e))return!1;const a=e.length;if(a!==t.length)return!1;for(let r=0;r<a;r++)if(e[r]!==t[r])return!1;return!0}const dh=Ra.length;function bo(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?bo(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const e={};for(let a=0;a<dh;a++){const r=Ra[a],i=t.props[r];(ht(i)||i===!1)&&(e[r]=i)}return e}const mh=[...Ma].reverse(),uh=Ma.length;function ph(t){return e=>Promise.all(e.map(({animation:a,options:r})=>ch(t,a,r)))}function hh(t){let e=ph(t),a=Gr(),r=!0;const i=c=>(m,d)=>{var p;const h=Ue(t,d,c==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(h){const{transition:u,transitionEnd:x,...g}=h;m={...m,...g,...x}}return m};function n(c){e=c(t)}function o(c){const{props:m}=t,d=bo(t.parent)||{},h=[],p=new Set;let u={},x=1/0;for(let b=0;b<uh;b++){const v=mh[b],w=a[v],y=m[v]!==void 0?m[v]:d[v],S=ht(y),C=v===c?w.isActive:null;C===!1&&(x=b);let N=y===d[v]&&y!==m[v]&&S;if(N&&r&&t.manuallyAnimateOnMount&&(N=!1),w.protectedKeys={...u},!w.isActive&&C===null||!y&&!w.prevProp||Zt(y)||typeof y=="boolean")continue;const A=xh(w.prevProp,y);let f=A||v===c&&w.isActive&&!N&&S||b>x&&S,k=!1;const E=Array.isArray(y)?y:[y];let D=E.reduce(i(v),{});C===!1&&(D={});const{prevResolvedValues:_={}}=w,ne={..._,...D},M=I=>{f=!0,p.has(I)&&(k=!0,p.delete(I)),w.needsAnimating[I]=!0;const L=t.getValue(I);L&&(L.liveStyle=!1)};for(const I in ne){const L=D[I],ge=_[I];if(u.hasOwnProperty(I))continue;let ye=!1;Xs(L)&&Xs(ge)?ye=!fo(L,ge):ye=L!==ge,ye?L!=null?M(I):p.add(I):L!==void 0&&p.has(I)?M(I):w.protectedKeys[I]=!0}w.prevProp=y,w.prevResolvedValues=D,w.isActive&&(u={...u,...D}),r&&t.blockInitialAnimation&&(f=!1);const P=N&&A;f&&(!P||k)&&h.push(...E.map(I=>{const L={type:v};if(typeof I=="string"&&r&&!P&&t.manuallyAnimateOnMount&&t.parent){const{parent:ge}=t,ye=Ue(ge,I);if(ge.enteringChildren&&ye){const{delayChildren:jt}=ye.transition||{};L.delay=go(ge.enteringChildren,t,jt)}}return{animation:I,options:L}}))}if(p.size){const b={};if(typeof m.initial!="boolean"){const v=Ue(t,Array.isArray(m.initial)?m.initial[0]:m.initial);v&&v.transition&&(b.transition=v.transition)}p.forEach(v=>{const w=t.getBaseTarget(v),y=t.getValue(v);y&&(y.liveStyle=!0),b[v]=w??null}),h.push({animation:b})}let g=!!h.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(g=!1),r=!1,g?e(h):Promise.resolve()}function l(c,m){var h;if(a[c].isActive===m)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(p=>{var u;return(u=p.animationState)==null?void 0:u.setActive(c,m)}),a[c].isActive=m;const d=o(c);for(const p in a)a[p].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:n,getState:()=>a,reset:()=>{a=Gr()}}}function xh(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fo(e,t):!1}function Te(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Gr(){return{animate:Te(!0),whileInView:Te(),whileHover:Te(),whileTap:Te(),whileDrag:Te(),whileFocus:Te(),exit:Te()}}class Se{constructor(e){this.isMounted=!1,this.node=e}update(){}}class gh extends Se{constructor(e){super(e),e.animationState||(e.animationState=hh(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Zt(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:a}=this.node.prevProps||{};e!==a&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let fh=0;class bh extends Se{constructor(){super(...arguments),this.id=fh++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:a}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);a&&!e&&i.then(()=>{a(this.id)})}mount(){const{register:e,onExitComplete:a}=this.node.presenceContext||{};a&&a(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const vh={animation:{Feature:gh},exit:{Feature:bh}};function gt(t,e,a,r={passive:!0}){return t.addEventListener(e,a,r),()=>t.removeEventListener(e,a)}function yt(t){return{point:{x:t.pageX,y:t.pageY}}}const yh=t=>e=>Pa(e)&&t(e,yt(e));function ot(t,e,a,r){return gt(t,e,yh(a),r)}const vo=1e-4,jh=1-vo,Nh=1+vo,yo=.01,wh=0-yo,Ch=0+yo;function se(t){return t.max-t.min}function kh(t,e,a){return Math.abs(t-e)<=a}function _r(t,e,a,r=.5){t.origin=r,t.originPoint=G(e.min,e.max,t.origin),t.scale=se(a)/se(e),t.translate=G(a.min,a.max,t.origin)-t.originPoint,(t.scale>=jh&&t.scale<=Nh||isNaN(t.scale))&&(t.scale=1),(t.translate>=wh&&t.translate<=Ch||isNaN(t.translate))&&(t.translate=0)}function lt(t,e,a,r){_r(t.x,e.x,a.x,r?r.originX:void 0),_r(t.y,e.y,a.y,r?r.originY:void 0)}function zr(t,e,a){t.min=a.min+e.min,t.max=t.min+se(e)}function Sh(t,e,a){zr(t.x,e.x,a.x),zr(t.y,e.y,a.y)}function Ur(t,e,a){t.min=e.min-a.min,t.max=t.min+se(e)}function ct(t,e,a){Ur(t.x,e.x,a.x),Ur(t.y,e.y,a.y)}function le(t){return[t("x"),t("y")]}const jo=({current:t})=>t?t.ownerDocument.defaultView:null,Qr=(t,e)=>Math.abs(t-e);function Ah(t,e){const a=Qr(t.x,e.x),r=Qr(t.y,e.y);return Math.sqrt(a**2+r**2)}class No{constructor(e,a,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:n=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=gs(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,x=Ah(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!u&&!x)return;const{point:g}=p,{timestamp:b}=Z;this.history.push({...g,timestamp:b});const{onStart:v,onMove:w}=this.handlers;u||(v&&v(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,p)},this.handlePointerMove=(p,u)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=xs(u,this.transformPagePoint),B.update(this.updatePoint,!0)},this.handlePointerUp=(p,u)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=gs(p.type==="pointercancel"?this.lastMoveEventInfo:xs(u,this.transformPagePoint),this.history);this.startEvent&&x&&x(p,v),g&&g(p,v)},!Pa(e))return;this.dragSnapToOrigin=n,this.handlers=a,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=yt(e),c=xs(l,this.transformPagePoint),{point:m}=c,{timestamp:d}=Z;this.history=[{...m,timestamp:d}];const{onSessionStart:h}=a;h&&h(e,gs(c,this.history)),this.removeListeners=ft(ot(this.contextWindow,"pointermove",this.handlePointerMove),ot(this.contextWindow,"pointerup",this.handlePointerUp),ot(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ce(this.updatePoint)}}function xs(t,e){return e?{point:e(t.point)}:t}function Wr(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gs({point:t},e){return{point:t,delta:Wr(t,wo(e)),offset:Wr(t,Th(e)),velocity:Ph(e,.1)}}function Th(t){return t[0]}function wo(t){return t[t.length-1]}function Ph(t,e){if(t.length<2)return{x:0,y:0};let a=t.length-1,r=null;const i=wo(t);for(;a>=0&&(r=t[a],!(i.timestamp-r.timestamp>he(e)));)a--;if(!r)return{x:0,y:0};const n=ce(i.timestamp-r.timestamp);if(n===0)return{x:0,y:0};const o={x:(i.x-r.x)/n,y:(i.y-r.y)/n};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Eh(t,{min:e,max:a},r){return e!==void 0&&t<e?t=r?G(e,t,r.min):Math.max(t,e):a!==void 0&&t>a&&(t=r?G(a,t,r.max):Math.min(t,a)),t}function Xr(t,e,a){return{min:e!==void 0?t.min+e:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function Mh(t,{top:e,left:a,bottom:r,right:i}){return{x:Xr(t.x,a,i),y:Xr(t.y,e,r)}}function Kr(t,e){let a=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([a,r]=[r,a]),{min:a,max:r}}function Rh(t,e){return{x:Kr(t.x,e.x),y:Kr(t.y,e.y)}}function Dh(t,e){let a=.5;const r=se(t),i=se(e);return i>r?a=mt(e.min,e.max-r,t.min):r>i&&(a=mt(t.min,t.max-i,e.min)),be(0,1,a)}function $h(t,e){const a={};return e.min!==void 0&&(a.min=e.min-t.min),e.max!==void 0&&(a.max=e.max-t.min),a}const Js=.35;function Ih(t=Js){return t===!1?t=0:t===!0&&(t=Js),{x:Yr(t,"left","right"),y:Yr(t,"top","bottom")}}function Yr(t,e,a){return{min:Jr(t,e),max:Jr(t,a)}}function Jr(t,e){return typeof t=="number"?t:t[e]||0}const Vh=new WeakMap;class Lh{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=W(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:a=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const n=h=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(yt(h).point)},o=(h,p)=>{const{drag:u,dragPropagation:x,onDragStart:g}=this.getProps();if(u&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Gu(u),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),le(v=>{let w=this.getAxisMotionValue(v).get()||0;if(xe.test(w)){const{projection:y}=this.visualElement;if(y&&y.layout){const S=y.layout.layoutBox[v];S&&(w=se(S)*(parseFloat(w)/100))}}this.originPoint[v]=w}),g&&B.postRender(()=>g(h,p)),Ks(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p;const{dragPropagation:u,dragDirectionLock:x,onDirectionLock:g,onDrag:b}=this.getProps();if(!u&&!this.openDragLock)return;const{offset:v}=p;if(x&&this.currentDirection===null){this.currentDirection=Fh(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",p.point,v),this.updateAxis("y",p.point,v),this.visualElement.render(),b&&b(h,p)},c=(h,p)=>{this.latestPointerEvent=h,this.latestPanInfo=p,this.stop(h,p),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>le(h=>{var p;return this.getAnimationState(h)==="paused"&&((p=this.getAxisMotionValue(h).animation)==null?void 0:p.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new No(e,{onSessionStart:n,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:jo(this.visualElement)})}stop(e,a){const r=e||this.latestPointerEvent,i=a||this.latestPanInfo,n=this.isDragging;if(this.cancel(),!n||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&B.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:a}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(e,a,r){const{drag:i}=this.getProps();if(!r||!Mt(e,i,this.currentDirection))return;const n=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Eh(o,this.constraints[e],this.elastic[e])),n.set(o)}resolveConstraints(){var n;const{dragConstraints:e,dragElastic:a}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(n=this.visualElement.projection)==null?void 0:n.layout,i=this.constraints;e&&He(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Mh(r.layoutBox,e):this.constraints=!1,this.elastic=Ih(a),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&le(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=$h(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:a}=this.getProps();if(!e||!He(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const n=qp(r,i.root,this.visualElement.getTransformPagePoint());let o=Rh(i.layout.layoutBox,n);if(a){const l=a(Vp(o));this.hasMutatedConstraints=!!l,l&&(o=io(l))}return o}startAnimation(e){const{drag:a,dragMomentum:r,dragElastic:i,dragTransition:n,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},m=le(d=>{if(!Mt(d,a,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const p=i?200:1e6,u=i?40:1e7,x={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...n,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(m).then(l)}startAxisValueAnimation(e,a){const r=this.getAxisMotionValue(e);return Ks(this.visualElement,e),r.start(qa(e,r,0,a,this.visualElement,!1))}stopAnimation(){le(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){le(e=>{var a;return(a=this.getAxisMotionValue(e).animation)==null?void 0:a.pause()})}getAnimationState(e){var a;return(a=this.getAxisMotionValue(e).animation)==null?void 0:a.state}getAxisMotionValue(e){const a=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[a];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){le(a=>{const{drag:r}=this.getProps();if(!Mt(a,r,this.currentDirection))return;const{projection:i}=this.visualElement,n=this.getAxisMotionValue(a);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[a];n.set(e[a]-G(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:a}=this.getProps(),{projection:r}=this.visualElement;if(!He(a)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};le(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=Dh({min:c,max:c},this.constraints[o])}});const{transformTemplate:n}=this.visualElement.getProps();this.visualElement.current.style.transform=n?n({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),le(o=>{if(!Mt(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:m}=this.constraints[o];l.set(G(c,m,i[o]))})}addListeners(){if(!this.visualElement.current)return;Vh.set(this.visualElement,this);const e=this.visualElement.current,a=ot(e,"pointerdown",c=>{const{drag:m,dragListener:d=!0}=this.getProps();m&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();He(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,n=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),B.read(r);const o=gt(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:m})=>{this.isDragging&&m&&(le(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),a(),n(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:n=!1,dragElastic:o=Js,dragMomentum:l=!0}=e;return{...e,drag:a,dragDirectionLock:r,dragPropagation:i,dragConstraints:n,dragElastic:o,dragMomentum:l}}}function Mt(t,e,a){return(e===!0||e===t)&&(a===null||a===t)}function Fh(t,e=10){let a=null;return Math.abs(t.y)>e?a="y":Math.abs(t.x)>e&&(a="x"),a}class qh extends Se{constructor(e){super(e),this.removeGroupControls=de,this.removeListeners=de,this.controls=new Lh(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||de}unmount(){this.removeGroupControls(),this.removeListeners()}}const Zr=t=>(e,a)=>{t&&B.postRender(()=>t(e,a))};class Oh extends Se{constructor(){super(...arguments),this.removePointerDownListener=de}onPointerDown(e){this.session=new No(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:jo(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:a,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Zr(e),onStart:Zr(a),onMove:r,onEnd:(n,o)=>{delete this.session,i&&B.postRender(()=>i(n,o))}}}mount(){this.removePointerDownListener=ot(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ft={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ei(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const tt={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(R.test(t))t=parseFloat(t);else return t;const a=ei(t,e.target.x),r=ei(t,e.target.y);return`${a}% ${r}%`}},Bh={correct:(t,{treeScale:e,projectionDelta:a})=>{const r=t,i=ke.parse(t);if(i.length>5)return r;const n=ke.createTransformer(t),o=typeof i[0]!="number"?1:0,l=a.x.scale*e.x,c=a.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const m=G(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=m),typeof i[3+o]=="number"&&(i[3+o]/=m),n(i)}};let fs=!1;class Hh extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:a,switchLayoutGroup:r,layoutId:i}=this.props,{projection:n}=e;dp(Gh),n&&(a.group&&a.group.add(n),r&&r.register&&i&&r.register(n),fs&&n.root.didUpdate(),n.addEventListener("animationComplete",()=>{this.safeToRemove()}),n.setOptions({...n.options,onExitComplete:()=>this.safeToRemove()})),Ft.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:a,visualElement:r,drag:i,isPresent:n}=this.props,{projection:o}=r;return o&&(o.isPresent=n,fs=!0,i||e.layoutDependency!==a||a===void 0||e.isPresent!==n?o.willUpdate():this.safeToRemove(),e.isPresent!==n&&(n?o.promote():o.relegate()||B.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ta.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:a,switchLayoutGroup:r}=this.props,{projection:i}=e;fs=!0,i&&(i.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Co(t){const[e,a]=zn(),r=j.useContext(na);return s.jsx(Hh,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(ao),isPresent:e,safeToRemove:a})}const Gh={borderRadius:{...tt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomLeftRadius:tt,borderBottomRightRadius:tt,boxShadow:Bh};function _h(t,e,a){const r=te(t)?t:We(t);return r.start(qa("",r,e,a)),r.animation}const zh=(t,e)=>t.depth-e.depth;class Uh{constructor(){this.children=[],this.isDirty=!1}add(e){ca(this.children,e),this.isDirty=!0}remove(e){da(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zh),this.isDirty=!1,this.children.forEach(e)}}function Qh(t,e){const a=ie.now(),r=({timestamp:i})=>{const n=i-a;n>=e&&(Ce(r),t(n-e))};return B.setup(r,!0),()=>Ce(r)}const ko=["TopLeft","TopRight","BottomLeft","BottomRight"],Wh=ko.length,ti=t=>typeof t=="string"?parseFloat(t):t,si=t=>typeof t=="number"||R.test(t);function Xh(t,e,a,r,i,n){i?(t.opacity=G(0,a.opacity??1,Kh(r)),t.opacityExit=G(e.opacity??1,0,Yh(r))):n&&(t.opacity=G(e.opacity??1,a.opacity??1,r));for(let o=0;o<Wh;o++){const l=`border${ko[o]}Radius`;let c=ai(e,l),m=ai(a,l);if(c===void 0&&m===void 0)continue;c||(c=0),m||(m=0),c===0||m===0||si(c)===si(m)?(t[l]=Math.max(G(ti(c),ti(m),r),0),(xe.test(m)||xe.test(c))&&(t[l]+="%")):t[l]=m}(e.rotate||a.rotate)&&(t.rotate=G(e.rotate||0,a.rotate||0,r))}function ai(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Kh=So(0,.5,mn),Yh=So(.5,.95,de);function So(t,e,a){return r=>r<t?0:r>e?1:a(mt(t,e,r))}function ri(t,e){t.min=e.min,t.max=e.max}function oe(t,e){ri(t.x,e.x),ri(t.y,e.y)}function ii(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ni(t,e,a,r,i){return t-=e,t=Ut(t,1/a,r),i!==void 0&&(t=Ut(t,1/i,r)),t}function Jh(t,e=0,a=1,r=.5,i,n=t,o=t){if(xe.test(e)&&(e=parseFloat(e),e=G(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=G(n.min,n.max,r);t===n&&(l-=e),t.min=ni(t.min,e,a,l,i),t.max=ni(t.max,e,a,l,i)}function oi(t,e,[a,r,i],n,o){Jh(t,e[a],e[r],e[i],e.scale,n,o)}const Zh=["x","scaleX","originX"],ex=["y","scaleY","originY"];function li(t,e,a,r){oi(t.x,e,Zh,a?a.x:void 0,r?r.x:void 0),oi(t.y,e,ex,a?a.y:void 0,r?r.y:void 0)}function ci(t){return t.translate===0&&t.scale===1}function Ao(t){return ci(t.x)&&ci(t.y)}function di(t,e){return t.min===e.min&&t.max===e.max}function tx(t,e){return di(t.x,e.x)&&di(t.y,e.y)}function mi(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function To(t,e){return mi(t.x,e.x)&&mi(t.y,e.y)}function ui(t){return se(t.x)/se(t.y)}function pi(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class sx{constructor(){this.members=[]}add(e){ca(this.members,e),e.scheduleRender()}remove(e){if(da(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(e){const a=this.members.findIndex(i=>e===i);if(a===0)return!1;let r;for(let i=a;i>=0;i--){const n=this.members[i];if(n.isPresent!==!1){r=n;break}}return r?(this.promote(r),!0):!1}promote(e,a){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,a&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:a,resumingFrom:r}=e;a.onExitComplete&&a.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ax(t,e,a){let r="";const i=t.x.translate/e.x,n=t.y.translate/e.y,o=(a==null?void 0:a.z)||0;if((i||n||o)&&(r=`translate3d(${i}px, ${n}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),a){const{transformPerspective:m,rotate:d,rotateX:h,rotateY:p,skewX:u,skewY:x}=a;m&&(r=`perspective(${m}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),p&&(r+=`rotateY(${p}deg) `),u&&(r+=`skewX(${u}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const bs=["","X","Y","Z"],rx=1e3;let ix=0;function vs(t,e,a,r){const{latestValues:i}=e;i[t]&&(a[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Po(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const a=ho(e);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:i,layoutId:n}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",B,!(i||n))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Po(r)}function Eo({attachResizeListener:t,defaultParent:e,measureScroll:a,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=ix++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(lx),this.nodes.forEach(ux),this.nodes.forEach(px),this.nodes.forEach(cx)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Uh)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new pa),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=_n(o)&&!Xu(o),this.instance=o;const{layoutId:l,layout:c,visualElement:m}=this.options;if(m&&!m.current&&m.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let d,h=0;const p=()=>this.root.updateBlockedByResize=!1;B.read(()=>{h=window.innerWidth}),t(o,()=>{const u=window.innerWidth;u!==h&&(h=u,this.root.updateBlockedByResize=!0,d&&d(),d=Qh(p,250),Ft.hasAnimatedSinceResize&&(Ft.hasAnimatedSinceResize=!1,this.nodes.forEach(gi)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&m&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:p,layout:u})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||m.getDefaultTransition()||bx,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=m.getProps(),v=!this.targetLayout||!To(this.targetLayout,u),w=!h&&p;if(this.options.layoutRoot||this.resumeFrom||w||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const y={...Sa(x,"layout"),onPlay:g,onComplete:b};(m.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y),this.setAnimationOrigin(d,w)}else h||gi(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=u})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ce(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hx),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Po(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hi);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xi);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(mx),this.nodes.forEach(nx),this.nodes.forEach(ox)):this.nodes.forEach(xi),this.clearAllSnapshots();const l=ie.now();Z.delta=be(0,1e3/60,l-Z.timestamp),Z.timestamp=l,Z.isProcessing=!0,os.update.process(Z),os.preRender.process(Z),os.render.process(Z),Z.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ta.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(dx),this.sharedNodes.forEach(xx)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,B.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){B.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!se(this.snapshot.measuredBox.x)&&!se(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=W(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Ao(this.projectionDelta),c=this.getTransformTemplate(),m=c?c(this.latestValues,""):void 0,d=m!==this.prevTransformTemplateValue;o&&this.instance&&(l||Pe(this.latestValues)||d)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),vx(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:o}=this.options;if(!o)return W();const l=o.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(yx))){const{scroll:d}=this.root;d&&(Ge(l.x,d.offset.x),Ge(l.y,d.offset.y))}return l}removeElementScroll(o){var c;const l=W();if(oe(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let m=0;m<this.path.length;m++){const d=this.path[m],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&oe(l,o),Ge(l.x,h.offset.x),Ge(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=W();oe(c,o);for(let m=0;m<this.path.length;m++){const d=this.path[m];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&_e(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Pe(d.latestValues)&&_e(c,d.latestValues)}return Pe(this.latestValues)&&_e(c,this.latestValues),c}removeTransform(o){const l=W();oe(l,o);for(let c=0;c<this.path.length;c++){const m=this.path[c];if(!m.instance||!Pe(m.latestValues))continue;Us(m.latestValues)&&m.updateSnapshot();const d=W(),h=m.measurePageBox();oe(d,h),li(l,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,d)}return Pe(this.latestValues)&&li(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Z.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=Z.timestamp,!this.targetDelta&&!this.relativeTarget){const u=this.getClosestProjectingParent();u&&u.layout&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=W(),this.relativeTargetOrigin=W(),ct(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),oe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=W(),this.targetWithTransforms=W()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Sh(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):oe(this.target,this.layout.layoutBox),oo(this.target,this.targetDelta)):oe(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const u=this.getClosestProjectingParent();u&&!!u.resumingFrom==!!this.resumingFrom&&!u.options.layoutScroll&&u.target&&this.animationProgress!==1?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=W(),this.relativeTargetOrigin=W(),ct(this.relativeTargetOrigin,this.target,u.target),oe(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Us(this.parent.latestValues)||no(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Z.timestamp&&(c=!1),c)return;const{layout:m,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||d))return;oe(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;Fp(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=W());const{target:u}=o;if(!u){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ii(this.prevProjectionDelta.x,this.projectionDelta.x),ii(this.prevProjectionDelta.y,this.projectionDelta.y)),lt(this.projectionDelta,this.layoutCorrected,u,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!pi(this.projectionDelta.x,this.prevProjectionDelta.x)||!pi(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ze(),this.projectionDelta=ze(),this.projectionDeltaWithTransform=ze()}setAnimationOrigin(o,l=!1){const c=this.snapshot,m=c?c.latestValues:{},d={...this.latestValues},h=ze();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=W(),u=c?c.source:void 0,x=this.layout?this.layout.source:void 0,g=u!==x,b=this.getStack(),v=!b||b.members.length<=1,w=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(fx));this.animationProgress=0;let y;this.mixTargetDelta=S=>{const C=S/1e3;fi(h.x,o.x,C),fi(h.y,o.y,C),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ct(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gx(this.relativeTarget,this.relativeTargetOrigin,p,C),y&&tx(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=W()),oe(y,this.relativeTarget)),g&&(this.animationValues=d,Xh(d,m,this.latestValues,C,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,m;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(m=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Ce(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=B.update(()=>{Ft.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=We(0)),this.currentAnimation=_h(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(rx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:m,latestValues:d}=o;if(!(!l||!c||!m)){if(this!==o&&this.layout&&m&&Mo(this.options.animationType,this.layout.layoutBox,m.layoutBox)){c=this.target||W();const h=se(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const p=se(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}oe(l,c),_e(l,d),lt(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new sx),this.sharedNodes.get(o).add(l);const m=l.options.initialPromotionConfig;l.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const m=this.getStack();m&&m.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const m={};c.z&&vs("z",o,m,this.animationValues);for(let d=0;d<bs.length;d++)vs(`rotate${bs[d]}`,o,m,this.animationValues),vs(`skew${bs[d]}`,o,m,this.animationValues);o.render();for(const d in m)o.setStaticValue(d,m[d]),this.animationValues&&(this.animationValues[d]=m[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Lt(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Lt(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Pe(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=m.animationValues||m.latestValues;this.applyTransformsToTarget();let h=ax(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),o.transform=h;const{x:p,y:u}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${u.origin*100}% 0`,m.animationValues?o.opacity=m===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=m===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in xt){if(d[x]===void 0)continue;const{correct:g,applyTo:b,isCSSVariable:v}=xt[x],w=h==="none"?d[x]:g(d[x],m);if(b){const y=b.length;for(let S=0;S<y;S++)o[b[S]]=w}else v?this.options.visualElement.renderState.vars[x]=w:o[x]=w}this.options.layoutId&&(o.pointerEvents=m===this?Lt(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(hi),this.root.sharedNodes.clear()}}}function nx(t){t.updateLayout()}function ox(t){var a;const e=((a=t.resumeFrom)==null?void 0:a.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:n}=t.options,o=e.source!==t.layout.source;n==="size"?le(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],u=se(p);p.min=r[h].min,p.max=p.min+u}):Mo(n,e.layoutBox,r)&&le(h=>{const p=o?e.measuredBox[h]:e.layoutBox[h],u=se(r[h]);p.max=p.min+u,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+u)});const l=ze();lt(l,r,e.layoutBox);const c=ze();o?lt(c,t.applyTransform(i,!0),e.measuredBox):lt(c,r,e.layoutBox);const m=!Ao(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:u}=h;if(p&&u){const x=W();ct(x,e.layoutBox,p.layoutBox);const g=W();ct(g,r,u.layoutBox),To(x,g)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:m,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function lx(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function cx(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function dx(t){t.clearSnapshot()}function hi(t){t.clearMeasurements()}function xi(t){t.isLayoutDirty=!1}function mx(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function gi(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ux(t){t.resolveTargetDelta()}function px(t){t.calcProjection()}function hx(t){t.resetSkewAndRotation()}function xx(t){t.removeLeadSnapshot()}function fi(t,e,a){t.translate=G(e.translate,0,a),t.scale=G(e.scale,1,a),t.origin=e.origin,t.originPoint=e.originPoint}function bi(t,e,a,r){t.min=G(e.min,a.min,r),t.max=G(e.max,a.max,r)}function gx(t,e,a,r){bi(t.x,e.x,a.x,r),bi(t.y,e.y,a.y,r)}function fx(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const bx={duration:.45,ease:[.4,0,.1,1]},vi=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),yi=vi("applewebkit/")&&!vi("chrome/")?Math.round:de;function ji(t){t.min=yi(t.min),t.max=yi(t.max)}function vx(t){ji(t.x),ji(t.y)}function Mo(t,e,a){return t==="position"||t==="preserve-aspect"&&!kh(ui(e),ui(a),.2)}function yx(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const jx=Eo({attachResizeListener:(t,e)=>gt(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ys={current:void 0},Ro=Eo({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ys.current){const t=new jx({});t.mount(window),t.setOptions({layoutScroll:!0}),ys.current=t}return ys.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Nx={pan:{Feature:Oh},drag:{Feature:qh,ProjectionNode:Ro,MeasureLayout:Co}};function Ni(t,e,a){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",a==="Start");const i="onHover"+a,n=r[i];n&&B.postRender(()=>n(e,yt(e)))}class wx extends Se{mount(){const{current:e}=this.node;e&&(this.unmount=_u(e,(a,r)=>(Ni(this.node,r,"Start"),i=>Ni(this.node,i,"End"))))}unmount(){}}class Cx extends Se{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ft(gt(this.node.current,"focus",()=>this.onFocus()),gt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function wi(t,e,a){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",a==="Start");const i="onTap"+(a==="End"?"":a),n=r[i];n&&B.postRender(()=>n(e,yt(e)))}class kx extends Se{mount(){const{current:e}=this.node;e&&(this.unmount=Wu(e,(a,r)=>(wi(this.node,r,"Start"),(i,{success:n})=>wi(this.node,i,n?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zs=new WeakMap,js=new WeakMap,Sx=t=>{const e=Zs.get(t.target);e&&e(t)},Ax=t=>{t.forEach(Sx)};function Tx({root:t,...e}){const a=t||document;js.has(a)||js.set(a,{});const r=js.get(a),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Ax,{root:t,...e})),r[i]}function Px(t,e,a){const r=Tx(e);return Zs.set(t,a),r.observe(t),()=>{Zs.delete(t),r.unobserve(t)}}const Ex={some:0,all:1};class Mx extends Se{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:a,margin:r,amount:i="some",once:n}=e,o={root:a?a.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Ex[i]},l=c=>{const{isIntersecting:m}=c;if(this.isInView===m||(this.isInView=m,n&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),p=m?d:h;p&&p(c)};return Px(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:a}=this.node;["amount","margin","root"].some(Rx(e,a))&&this.startObserver()}unmount(){}}function Rx({viewport:t={}},{viewport:e={}}={}){return a=>t[a]!==e[a]}const Dx={inView:{Feature:Mx},tap:{Feature:kx},focus:{Feature:Cx},hover:{Feature:wx}},$x={layout:{ProjectionNode:Ro,MeasureLayout:Co}},Ix={...vh,...Dx,...Nx,...$x},U=Ip(Ix,Wp),Vx=({isVisible:t,newRank:e,onComplete:a})=>{const[r,i]=j.useState(!1),[n,o]=j.useState(!1);return j.useEffect(()=>{if(t){const l=setTimeout(()=>i(!0),500),c=setTimeout(()=>o(!0),1e3),m=setTimeout(()=>a(),3e3);return()=>{clearTimeout(l),clearTimeout(c),clearTimeout(m)}}},[t,a]),s.jsx(Fe,{children:t&&s.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80",children:[s.jsx(U.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.8,ease:"easeOut"},className:"absolute inset-0 bg-gradient-radial from-yellow-400/20 via-transparent to-transparent"}),s.jsx(Fe,{children:r&&s.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(20)].map((l,c)=>s.jsx(U.div,{initial:{opacity:0,y:100,x:Math.random()*(typeof window<"u"?window.innerWidth:1e3),scale:0},animate:{opacity:[0,1,0],y:-100,scale:[0,1,0],rotate:360},transition:{duration:2,delay:c*.1,ease:"easeOut"},className:"absolute w-2 h-2 bg-yellow-400 rounded-full"},c))})}),s.jsxs(U.div,{initial:{scale:0,rotateY:180},animate:{scale:1,rotateY:0},transition:{duration:1,ease:"easeOut"},className:"relative z-10 text-center",children:[s.jsx(U.h1,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.8},className:"text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-500 mb-8",children:"PROMOÇÃO!"}),s.jsx(Fe,{children:n&&s.jsxs(U.div,{initial:{scale:0,rotateZ:-180},animate:{scale:1,rotateZ:0},transition:{duration:.8,ease:"easeOut"},className:`inline-flex items-center px-8 py-4 rounded-full bg-gradient-to-r ${Es(e)} text-white text-2xl font-bold shadow-2xl`,children:[s.jsx(U.span,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:2},className:"text-4xl mr-4",children:aa(e)}),s.jsxs("span",{children:["Rank ",e]})]})}),s.jsx(U.p,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:1.5,duration:.8},className:"text-xl text-gray-300 mt-8",children:"Parabéns pela sua ascensão heroica!"}),s.jsx(U.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:`absolute inset-0 -z-10 rounded-full bg-gradient-to-r ${Es(e)} blur-3xl`})]}),s.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(8)].map((l,c)=>s.jsx(U.div,{initial:{scaleY:0,opacity:0},animate:{scaleY:1,opacity:[0,.8,0]},transition:{duration:1.5,delay:.5+c*.1,ease:"easeOut"},className:"absolute top-0 bottom-0 w-1 bg-gradient-to-b from-yellow-400 to-transparent",style:{left:`${50+Math.cos(c*Math.PI/4)*30}%`,transform:`rotate(${c*45}deg)`,transformOrigin:"center"}},c))})]})})},Lx=({progress:t,isAnimating:e,color:a="from-blue-400 to-blue-600"})=>s.jsxs("div",{className:"relative w-full h-4 bg-gray-700 rounded-full overflow-hidden",children:[s.jsx("div",{className:`h-full bg-gradient-to-r ${a} relative transition-all duration-300 ease-out`,style:{width:`${t}%`},children:s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent w-20"})}),e&&s.jsx("div",{className:"absolute inset-0",children:[...Array(3)].map((r,i)=>s.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full opacity-50",style:{left:`${t/100*(20+i*20)}%`,top:`${4+i*2}px`}},i))})]}),Fx=Qt.memo(({rank:t,isFloating:e=!0})=>t?s.jsxs("div",{className:`inline-flex items-center px-4 py-2 rounded-full bg-gradient-to-r ${Es(t)} text-white font-bold ${T.effects.shadows.glow}`,children:[s.jsx("span",{className:"text-xl mr-2",children:aa(t)}),s.jsx("span",{children:t})]}):null),qe=({rank:t,size:e="medium",isFloating:a=!0,className:r=""})=>s.jsx("div",{className:r,children:s.jsx(Fx,{rank:t,isFloating:a})}),Ci=({progress:t,color:e,isAnimating:a=!1})=>s.jsx(Lx,{progress:t,isAnimating:a,color:e}),qx=({heroId:t,className:e=""})=>{var k,E,D,_,ne;const{heroes:a,getHeroRankProgress:r,getRankLeaderboard:i,promoteHero:n,updateHero:o}=V(),[l,c]=j.useState("overview"),[m,d]=j.useState(""),[h,p]=j.useState("all"),u=t?a.find(M=>M.id===t):a[0];j.useEffect(()=>{if(u&&!u.rankData){const M=J.initializeRankData(u);o(u.id,{rankData:M})}},[u]);const x=u?r(u.id):null,g=i(),b=j.useMemo(()=>{var M;return(M=u==null?void 0:u.rankData)!=null&&M.rankHistory?h==="all"?u.rankData.rankHistory:u.rankData.rankHistory.filter(P=>P.rank===h):[]},[(k=u==null?void 0:u.rankData)==null?void 0:k.rankHistory,h]),v=j.useMemo(()=>{if(!u||!m)return null;const M=a.find(P=>P.id===m);return M?{current:u,compare:M,currentProgress:r(u.id),compareProgress:r(M.id)}:null},[u,m,a]);if(!u||!x)return s.jsx("div",{className:`bg-slate-800 rounded-lg p-6 ${e}`,children:s.jsxs("div",{className:"text-center text-slate-400",children:[s.jsx(rt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Nenhum herói selecionado para análise de evolução"})]})});const w=()=>{x.progress.canPromote&&n(u.id)},y=()=>{var M;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-amber-900/20 to-yellow-900/20 rounded-lg p-6 border border-amber-700/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-amber-100",children:u.name}),s.jsxs("p",{className:"text-amber-300",children:[u.class," • ",u.race]})]}),s.jsx(qe,{rank:x.progress.currentRank,size:"large"})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-amber-100",children:u.progression.level}),s.jsx("div",{className:"text-sm text-amber-300",children:"Nível"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-amber-100",children:(u.progression.xp||0).toLocaleString()}),s.jsx("div",{className:"text-sm text-amber-300",children:"XP Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-amber-100",children:u.stats.questsCompleted}),s.jsx("div",{className:"text-sm text-amber-300",children:"Missões"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-amber-100",children:x.rankData.rankPoints}),s.jsx("div",{className:"text-sm text-amber-300",children:"Pontos de Rank"})]})]})]}),s.jsx(Ci,{progress:x.progress,estimate:x.estimate,onPromote:w,variant:"detailed"}),((M=x.rankData)==null?void 0:M.rankHistory)&&x.rankData.rankHistory.length>0&&s.jsxs("div",{className:"bg-slate-700 rounded-lg p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-100 mb-4 flex items-center",children:[s.jsx(Tc,{className:"w-5 h-5 mr-2 text-amber-400"}),"Conquistas Recentes"]}),s.jsx("div",{className:"space-y-2",children:x.rankData.rankHistory.slice(-3).reverse().map((P,$)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-600 rounded",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(qe,{rank:P.rank,size:"small"}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("div",{className:"text-slate-100 font-medium",children:["Promovido para Rank ",P.rank]}),s.jsx("div",{className:"text-slate-400 text-sm",children:new Date(P.achievedAt).toLocaleDateString("pt-BR")})]})]}),s.jsxs("div",{className:"text-amber-400 font-bold",children:["+",P.rankPointsEarned]})]},$))})]})]})},S=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsx(Ci,{progress:x.progress,estimate:x.estimate,onPromote:w,variant:"detailed"}),s.jsxs("div",{className:"bg-slate-700 rounded-lg p-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-100 mb-4 flex items-center",children:[s.jsx(Ot,{className:"w-5 h-5 mr-2 text-blue-400"}),"Análise Detalhada de Progresso"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-300",children:"Experiência"}),s.jsxs("span",{className:"text-slate-400",children:[(x.progress.currentXP||0).toLocaleString()," / ",(x.progress.requiredXP||0).toLocaleString()]})]}),s.jsx("div",{className:"w-full bg-slate-600 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full transition-all duration-500",style:{width:`${(x.progress.currentXP||0)/(x.progress.requiredXP||1)*100}%`}})}),s.jsx("div",{className:"text-xs text-slate-400",children:x.progress.nextRank?`Faltam ${((x.progress.requiredXP||0)-(x.progress.currentXP||0)).toLocaleString()} XP`:"Rank máximo atingido!"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-300",children:"Missões"}),s.jsxs("span",{className:"text-slate-400",children:[x.progress.currentMissions||0," / ",x.progress.requiredMissions||0]})]}),s.jsx("div",{className:"w-full bg-slate-600 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500",style:{width:`${(x.progress.currentMissions||0)/(x.progress.requiredMissions||1)*100}%`}})}),s.jsx("div",{className:"text-xs text-slate-400",children:x.progress.nextRank?`Faltam ${(x.progress.requiredMissions||0)-(x.progress.currentMissions||0)} missões`:"Todas as missões concluídas!"}),s.jsxs("div",{className:"text-xs text-slate-400",children:["Faltam ",x.progress.requiredMissions-x.progress.currentMissions," missões"]})]})]}),x.estimate&&s.jsxs("div",{className:"mt-6 p-4 bg-slate-600 rounded-lg",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx($c,{className:"w-4 h-4 mr-2 text-amber-400"}),s.jsx("span",{className:"text-slate-200 font-medium",children:"Estimativa para Próximo Rank"})]}),s.jsxs("div",{className:"text-slate-300",children:[x.estimate.estimatedDays," dias (",x.estimate.estimatedHours," horas de jogo)"]}),s.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Baseado no seu ritmo atual de progresso"})]})]})]}),C=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-100 flex items-center",children:[s.jsx(Za,{className:"w-5 h-5 mr-2 text-purple-400"}),"Histórico de Ranks"]}),s.jsxs("select",{value:h,onChange:M=>p(M.target.value),className:"bg-slate-700 border border-slate-600 rounded px-3 py-1 text-slate-200",children:[s.jsx("option",{value:"all",children:"Todos os Ranks"}),s.jsx("option",{value:"S",children:"Rank S"}),s.jsx("option",{value:"A",children:"Rank A"}),s.jsx("option",{value:"B",children:"Rank B"}),s.jsx("option",{value:"C",children:"Rank C"}),s.jsx("option",{value:"D",children:"Rank D"}),s.jsx("option",{value:"E",children:"Rank E"}),s.jsx("option",{value:"F",children:"Rank F"})]})]}),s.jsx("div",{className:"space-y-4",children:b.length===0?s.jsxs("div",{className:"text-center text-slate-400 py-8",children:[s.jsx(rt,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Nenhum histórico encontrado para o filtro selecionado"})]}):b.reverse().map((M,P)=>s.jsxs("div",{className:"flex items-center p-4 bg-slate-700 rounded-lg",children:[s.jsx(qe,{rank:M.rank,size:"medium"}),s.jsxs("div",{className:"ml-4 flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-slate-100 font-medium",children:["Promovido para Rank ",M.rank]}),s.jsx("div",{className:"text-slate-400 text-sm",children:new Date(M.achievedAt).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-amber-400 font-bold",children:["+",M.rankPointsEarned]}),s.jsx("div",{className:"text-slate-400 text-sm",children:"pontos"})]})]}),M.specialAchievement&&s.jsxs("div",{className:"mt-2 text-sm text-purple-300",children:["🏆 ",M.specialAchievement]})]})]},P))})]}),N=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-100 flex items-center",children:[s.jsx(tr,{className:"w-5 h-5 mr-2 text-green-400"}),"Ranking Global"]}),s.jsx("div",{className:"space-y-3",children:g.map((M,P)=>s.jsxs("div",{className:`flex items-center p-4 rounded-lg ${M.heroId===u.id?"bg-gradient-to-r from-amber-900/30 to-yellow-900/30 border border-amber-700/50":"bg-slate-700"}`,children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-600 text-slate-200 font-bold mr-4",children:M.position}),s.jsx(qe,{rank:M.rank,size:"small"}),s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsx("div",{className:"text-slate-100 font-medium",children:M.heroName}),s.jsx("div",{className:"text-slate-400 text-sm",children:M.heroClass})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-amber-400 font-bold",children:M.rankPoints}),s.jsx("div",{className:"text-slate-400 text-sm",children:"pontos"})]}),M.heroId===u.id&&s.jsx(ra,{className:"w-5 h-5 ml-2 text-amber-400"})]},M.heroId))})]}),A=()=>{var M,P,$,I;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"text-lg font-semibold text-slate-100 flex items-center",children:[s.jsx(as,{className:"w-5 h-5 mr-2 text-cyan-400"}),"Comparação de Heróis"]}),s.jsxs("select",{value:m,onChange:L=>d(L.target.value),className:"bg-slate-700 border border-slate-600 rounded px-3 py-1 text-slate-200",children:[s.jsx("option",{value:"",children:"Selecione um herói para comparar"}),a.filter(L=>L.id!==u.id).map(L=>s.jsxs("option",{value:L.id,children:[L.name," (",L.class,")"]},L.id))]})]}),v?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-slate-700 rounded-lg p-6",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h5",{className:"text-lg font-semibold text-slate-100",children:v.current.name}),s.jsx("p",{className:"text-slate-400",children:v.current.class}),s.jsx("div",{className:"mt-2",children:s.jsx(qe,{rank:((M=v.currentProgress)==null?void 0:M.progress.currentRank)||"F",size:"large"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-300",children:"Nível"}),s.jsx("span",{className:"text-slate-100",children:v.current.level})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-300",children:"XP Total"}),s.jsx("span",{className:"text-slate-100",children:(v.current.progression.xp||0).toLocaleString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-300",children:"Missões"}),s.jsx("span",{className:"text-slate-100",children:v.current.stats.questsCompleted})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-300",children:"Pontos de Rank"}),s.jsx("span",{className:"text-slate-100",children:((P=v.currentProgress)==null?void 0:P.rankData.rankPoints)||0})]})]})]}),s.jsxs("div",{className:"bg-slate-700 rounded-lg p-6",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("h5",{className:"text-lg font-semibold text-slate-100",children:v.compare.name}),s.jsx("p",{className:"text-slate-400",children:v.compare.class}),s.jsx(qe,{rank:(($=v.compareProgress)==null?void 0:$.progress.currentRank)||"F",size:"large",className:"mt-2"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-300",children:"Nível"}),s.jsx("span",{className:"text-slate-100",children:v.compare.level})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-300",children:"XP Total"}),s.jsx("span",{className:"text-slate-100",children:(v.compare.progression.xp||0).toLocaleString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-300",children:"Missões"}),s.jsx("span",{className:"text-slate-100",children:v.compare.stats.questsCompleted})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-300",children:"Pontos de Rank"}),s.jsx("span",{className:"text-slate-100",children:((I=v.compareProgress)==null?void 0:I.rankData.rankPoints)||0})]})]})]})]}):s.jsxs("div",{className:"text-center text-slate-400 py-8",children:[s.jsx(as,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Selecione um herói para comparar"})]})]})},f=[{id:"overview",label:"Visão Geral",icon:rd},{id:"progress",label:"Progresso",icon:Ot},{id:"history",label:"Histórico",icon:Za},{id:"leaderboard",label:"Ranking",icon:tr},{id:"comparison",label:"Comparação",icon:as}];return s.jsxs("div",{className:`bg-slate-800 rounded-lg ${e}`,children:[s.jsxs("div",{className:"p-6 border-b border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-2xl font-bold text-slate-100 flex items-center",children:[s.jsx(rt,{className:"w-6 h-6 mr-2 text-amber-400"}),"Painel de Evolução"]}),(((D=(E=x.rankData)==null?void 0:E.pendingCelebrations)==null?void 0:D.length)||0)>0&&s.jsxs("div",{className:"bg-amber-500 text-amber-900 px-3 py-1 rounded-full text-sm font-medium",children:[((ne=(_=x.rankData)==null?void 0:_.pendingCelebrations)==null?void 0:ne.length)||0," nova(s) conquista(s)!"]})]}),s.jsx("div",{className:"flex space-x-1 bg-slate-700 rounded-lg p-1",children:f.map(({id:M,label:P,icon:$})=>s.jsxs("button",{onClick:()=>c(M),className:`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors ${l===M?"bg-slate-600 text-slate-100":"text-slate-400 hover:text-slate-200 hover:bg-slate-600/50"}`,children:[s.jsx($,{className:"w-4 h-4 mr-2"}),P]},M))})]}),s.jsxs("div",{className:"p-6",children:[l==="overview"&&y(),l==="progress"&&S(),l==="history"&&C(),l==="leaderboard"&&N(),l==="comparison"&&A()]})]})},Ox=({celebration:t,onClose:e,onViewRewards:a,className:r=""})=>{const[i,n]=j.useState(!0),[o,l]=j.useState(!1),[c,m]=j.useState("intro");j.useEffect(()=>{const p=setTimeout(()=>n(!0),100),u=setTimeout(()=>m("celebrate"),800),x=setTimeout(()=>m("rewards"),2e3);return()=>{clearTimeout(p),clearTimeout(u),clearTimeout(x)}},[]);const d=()=>{n(!1),setTimeout(e,300)};return(p=>{switch(p){case"S":return Qi;case"A":return rt;case"B":return ra;case"C":return Kc;case"D":return ud;default:return rt}})(t.newRank),s.jsxs(s.Fragment,{children:[s.jsx(Vx,{isVisible:i&&!o,newRank:t.newRank,onComplete:()=>l(!0)}),s.jsx(AnimatePresence,{children:i&&o&&s.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80",onClick:d,children:s.jsx(motion.div,{initial:{scale:0,y:50},animate:{scale:1,y:0},exit:{scale:0,y:50},transition:{duration:.5,ease:"easeOut"},className:"bg-gradient-to-br from-purple-900 to-blue-900 p-8 rounded-2xl shadow-2xl max-w-md w-full mx-4 text-center border border-purple-500",onClick:p=>p.stopPropagation(),children:s.jsxs("div",{className:"relative z-10",children:[s.jsx(motion.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:2},className:"text-4xl mb-4",children:"🎁"}),s.jsx("h2",{className:"text-2xl font-bold text-yellow-400 mb-4",children:"Recompensas de Rank!"}),t.rewards&&t.rewards.length>0&&s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"space-y-2",children:t.rewards.map((p,u)=>s.jsxs(motion.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:u*.1},className:"flex items-center justify-center bg-purple-800 bg-opacity-50 rounded-lg p-3",children:[s.jsx("span",{className:"text-yellow-400 mr-2",children:"✨"}),s.jsx("span",{className:"text-white",children:p})]},u))})}),s.jsx(motion.button,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:d,className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-3 rounded-lg font-semibold hover:from-yellow-600 hover:to-orange-600 transition-all duration-200 shadow-lg",children:"Continuar Jornada"})]})})})})]})},Bx=({celebrations:t,onCelebrationViewed:e,onViewRewards:a})=>{const[r,i]=j.useState(0);if(t.length===0)return null;const n=()=>{e(r),r<t.length-1&&i(r+1)},o=t[r];return s.jsx(Ox,{celebration:o,onClose:n,onViewRewards:a?()=>a(o):void 0})};class Hx{buildHeroImagePrompt(e,a="portrait"){const r={Warrior:"armored warrior with sword and shield, strong and battle-hardened",Mage:"mystical spellcaster with robes and magical staff, wise and powerful",Rogue:"agile assassin with dark leather armor and daggers, stealthy and cunning",Paladin:"holy knight with shining armor and blessed weapon, noble and righteous",Ranger:"forest guardian with bow and nature-themed gear, skilled and alert"},i={portrait:"detailed portrait, head and shoulders","full-body":"full body character illustration",action:"dynamic action pose in combat"},n=Object.entries(e.attributes).sort(([,c],[,m])=>m-c)[0][0],o={strength:"muscular and powerful build",intelligence:"wise eyes and scholarly appearance",agility:"lean and athletic physique",charisma:"commanding presence and attractive features",constitution:"robust and healthy appearance",wisdom:"serene expression and thoughtful demeanor"};let l=`${i[a]} of ${e.name}, a level ${e.progression.level} ${r[e.class]||e.class}`;if(o[n]&&(l+=`, with ${o[n]}`),l+=", medieval fantasy art style, highly detailed, digital painting, concept art, dramatic lighting",e.rank){const c={F:"novice adventurer",E:"apprentice hero",D:"skilled adventurer",C:"experienced hero",B:"veteran champion",A:"legendary hero with glowing aura",S:"mythical champion with divine radiance"};c[e.rank]&&(l+=`, ${c[e.rank]}`)}return l}async generateHeroAvatar(e,a="portrait"){try{const r=this.buildHeroImagePrompt(e,a);return(await pe.generateImage({prompt:r,size:a==="portrait"?"512x512":"1024x1024",quality:"standard",style:"vivid"})).url}catch(r){return console.error("Error generating hero avatar:",r),this.getFallbackAvatar(e)}}async generateClassIcon(e){try{const r={Warrior:"crossed sword and shield icon, medieval fantasy style, golden metallic, simple design",Mage:"magical staff with crystal orb icon, mystical blue glow, arcane symbols",Rogue:"crossed daggers icon, dark steel with poison green accents, stealth design",Paladin:"holy hammer with divine light icon, silver and gold, sacred geometry",Ranger:"bow and arrow with leaf motifs icon, forest green and brown, nature theme"}[e]||`${e} class icon, medieval fantasy style, detailed emblem`;return(await pe.generateImage({prompt:r+", icon design, transparent background, high contrast",size:"256x256",quality:"standard",style:"natural"})).url}catch(a){return console.error("Error generating class icon:",a),this.getFallbackClassIcon(e)}}async generateRankBadge(e){try{const r={F:"bronze rank badge, simple design, beginner level",E:"iron rank badge, sturdy metal, apprentice level",D:"silver rank badge, polished metal, skilled level",C:"gold rank badge, shining metal, experienced level",B:"platinum rank badge, precious metal with gems, veteran level",A:"diamond rank badge, crystalline with magical glow, legendary level",S:"mythril rank badge, ethereal glow with divine light, mythical level"}[e]||`${e} rank badge, medieval fantasy style`;return(await pe.generateImage({prompt:r+", heraldic design, detailed emblem, transparent background",size:"256x256",quality:"standard",style:"natural"})).url}catch(a){return console.error("Error generating rank badge:",a),this.getFallbackRankBadge(e)}}async generateQuestIllustration(e,a,r){try{const i={combat:"epic battle scene with monsters",exploration:"mysterious dungeon or ancient ruins",social:"tavern or royal court scene",crafting:"workshop with magical items",rescue:"dramatic rescue scene"},n={easy:"peaceful atmosphere, bright lighting",medium:"moderate danger, balanced lighting",hard:"dangerous atmosphere, dramatic shadows",extreme:"epic scale, intense lighting and effects"};let o=`${i[a]||"fantasy adventure scene"}`;return n[r]&&(o+=`, ${n[r]}`),o+=", medieval fantasy art, detailed illustration, concept art style",(await pe.generateImage({prompt:o,size:"1024x512",quality:"standard",style:"vivid"})).url}catch(i){return console.error("Error generating quest illustration:",i),this.getFallbackQuestImage(a)}}getFallbackAvatar(e){const r={Warrior:"#8B4513",Mage:"#4169E1",Rogue:"#2F4F4F",Paladin:"#FFD700",Ranger:"#228B22"}[e.class]||"#696969";return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="100" height="100" xmlns="http://www.w3.org/2000/svg">
        <circle cx="50" cy="50" r="45" fill="${r}" stroke="#333" stroke-width="2"/>
        <text x="50" y="55" text-anchor="middle" fill="white" font-size="12" font-family="Arial">
          ${e.name.charAt(0)}
        </text>
      </svg>
    `)}`}getFallbackClassIcon(e){const r={Warrior:"⚔️",Mage:"🔮",Rogue:"🗡️",Paladin:"🛡️",Ranger:"🏹"}[e]||"⭐";return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="64" height="64" xmlns="http://www.w3.org/2000/svg">
        <rect width="64" height="64" fill="#f0f0f0" stroke="#ccc" stroke-width="1"/>
        <text x="32" y="40" text-anchor="middle" font-size="24">${r}</text>
      </svg>
    `)}`}getFallbackRankBadge(e){const r={F:"#CD7F32",E:"#C0C0C0",D:"#C0C0C0",C:"#FFD700",B:"#E5E4E2",A:"#B9F2FF",S:"#FF6347"}[e]||"#696969";return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="64" height="64" xmlns="http://www.w3.org/2000/svg">
        <circle cx="32" cy="32" r="28" fill="${r}" stroke="#333" stroke-width="2"/>
        <text x="32" y="38" text-anchor="middle" fill="white" font-size="20" font-weight="bold">
          ${e}
        </text>
      </svg>
    `)}`}getFallbackQuestImage(e){const r={combat:"⚔️",exploration:"🗺️",social:"👥",crafting:"🔨",rescue:"🛡️"}[e]||"⭐";return`data:image/svg+xml,${encodeURIComponent(`
      <svg width="200" height="100" xmlns="http://www.w3.org/2000/svg">
        <rect width="200" height="100" fill="#f5f5f5" stroke="#ddd" stroke-width="1"/>
        <text x="100" y="60" text-anchor="middle" font-size="32">${r}</text>
      </svg>
    `)}`}}const Gx=new Hx,_x=({hero:t,onAvatarGenerated:e,style:a="portrait",className:r=""})=>{const[i,n]=j.useState(!1),[o,l]=j.useState(null),[c,m]=j.useState(null),[d,h]=j.useState(0),p=j.useCallback(async()=>{n(!0),m(null),h(0);try{const x=setInterval(()=>{h(b=>Math.min(b+10,90))},200),g=await Gx.generateHeroAvatar(t,a);clearInterval(x),h(100),l(g),e==null||e(g),setTimeout(()=>h(0),1e3)}catch(x){m("Falha ao gerar avatar. Tente novamente."),console.error("Avatar generation error:",x)}finally{n(!1)}},[t,a,e]),u=j.useCallback(()=>{l(null),p()},[t,a]);return s.jsxs("div",{className:`ai-avatar-generator ${r}`,children:[s.jsx("style",{jsx:!0,children:`
        .ai-avatar-generator {
          background: linear-gradient(${T.gradients.backgrounds.secondary});
          border: 2px solid ${T.colors.gold[500]};
          border-radius: 12px;
          padding: 20px;
          text-align: center;
          position: relative;
          overflow: hidden;
        }

        .avatar-preview {
          width: 200px;
          height: 200px;
          margin: 0 auto 20px;
          border-radius: 50%;
          overflow: hidden;
          border: 3px solid ${T.colors.accent.gold};
          background: ${T.colors.background.primary};
          display: flex;
          align-items: center;
          justify-content: center;
          position: relative;
        }

        .avatar-image {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }

        .placeholder {
          color: ${T.colors.text.secondary};
          font-size: 14px;
          text-align: center;
        }

        .generate-button {
          background: linear-gradient(135deg, ${T.colors.accent.gold}, #b8860b);
          color: ${T.colors.text.primary};
          border: none;
          padding: 12px 24px;
          border-radius: 8px;
          font-weight: bold;
          cursor: pointer;
          transition: all 0.3s ease;
          margin: 0 8px;
          font-size: 14px;
        }

        .generate-button:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(218, 165, 32, 0.4);
        }

        .generate-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .regenerate-button {
          background: linear-gradient(135deg, ${T.colors.accent.silver}, #a0a0a0);
          color: ${T.colors.text.primary};
          border: none;
          padding: 8px 16px;
          border-radius: 6px;
          font-size: 12px;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .regenerate-button:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(192, 192, 192, 0.4);
        }

        .progress-bar {
          width: 100%;
          height: 4px;
          background: ${T.colors.background.primary};
          border-radius: 2px;
          overflow: hidden;
          margin: 16px 0;
        }

        .progress-fill {
          height: 100%;
          background: linear-gradient(90deg, ${T.colors.accent.gold}, #ffd700);
          transition: width 0.3s ease;
        }

        .error-message {
          color: ${T.colors.accent.crimson};
          font-size: 14px;
          margin-top: 12px;
          padding: 8px;
          background: rgba(220, 20, 60, 0.1);
          border-radius: 6px;
          border: 1px solid rgba(220, 20, 60, 0.3);
        }

        .hero-info {
          margin-bottom: 16px;
          padding: 12px;
          background: rgba(0, 0, 0, 0.2);
          border-radius: 8px;
          font-size: 14px;
          color: ${T.colors.text.secondary};
        }

        .style-selector {
          margin-bottom: 16px;
        }

        .style-option {
          background: ${T.colors.background.primary};
          color: ${T.colors.text.secondary};
          border: 1px solid ${T.colors.accent.gold};
          padding: 6px 12px;
          margin: 0 4px;
          border-radius: 6px;
          cursor: pointer;
          font-size: 12px;
          transition: all 0.3s ease;
        }

        .style-option.active {
          background: ${T.colors.accent.gold};
          color: ${T.colors.text.primary};
        }

        .loading-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.7);
          display: flex;
          align-items: center;
          justify-content: center;
          flex-direction: column;
          color: ${T.colors.text.primary};
          z-index: 10;
        }

        .loading-spinner {
          width: 40px;
          height: 40px;
          border: 3px solid rgba(218, 165, 32, 0.3);
          border-top: 3px solid ${T.colors.accent.gold};
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin-bottom: 12px;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        .ai-badge {
          position: absolute;
          top: 8px;
          right: 8px;
          background: linear-gradient(135deg, #4169e1, #1e90ff);
          color: white;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 10px;
          font-weight: bold;
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .ai-icon {
          width: 12px;
          height: 12px;
        }
      `}),s.jsxs("div",{className:"ai-badge",children:[s.jsx("svg",{className:"ai-icon",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"})}),"IA"]}),s.jsxs("div",{className:"hero-info",children:[s.jsx("strong",{children:t.name})," - ",t.class," Nível ",t.progression.level]}),s.jsxs("div",{className:"avatar-preview",children:[s.jsx(Fe,{mode:"wait",children:o?s.jsx(U.img,{src:o,alt:`Avatar de ${t.name}`,className:"avatar-image",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.5}},"avatar"):s.jsxs(U.div,{className:"placeholder",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s.jsx("div",{style:{fontSize:"48px",marginBottom:"8px"},children:"🎭"}),"Clique para gerar avatar com IA"]},"placeholder")}),i&&s.jsxs("div",{className:"loading-overlay",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("div",{children:"Gerando avatar..."}),s.jsxs("div",{style:{fontSize:"12px",marginTop:"4px"},children:[d,"%"]})]})]}),i&&s.jsx("div",{className:"progress-bar",children:s.jsx(U.div,{className:"progress-fill",initial:{width:0},animate:{width:`${d}%`},transition:{duration:.3}})}),s.jsx("div",{className:"style-selector",children:["portrait","full-body","action"].map(x=>s.jsxs("button",{className:`style-option ${a===x?"active":""}`,onClick:()=>{},disabled:i,children:[x==="portrait"&&"Retrato",x==="full-body"&&"Corpo Inteiro",x==="action"&&"Ação"]},x))}),s.jsx("div",{children:o?s.jsx("div",{children:s.jsx("button",{className:"regenerate-button",onClick:u,disabled:i,children:"🔄 Regenerar"})}):s.jsx("button",{className:"generate-button",onClick:p,disabled:i,children:i?"Gerando...":"✨ Gerar Avatar com IA"})}),c&&s.jsx(U.div,{className:"error-message",initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:c})]})};class zx{getSystemPrompt(){return`Você é um mestre de RPG especializado em criar missões dinâmicas e envolventes para um jogo medieval fantástico.

Suas missões devem ser:
- Apropriadas para o nível e classe do herói
- Narrativamente coerentes e imersivas
- Balanceadas em dificuldade e recompensas
- Ricas em detalhes e contexto
- Escritas em português brasileiro

Sempre considere:
- O histórico e conquistas do herói
- A progressão natural da dificuldade
- Elementos de roleplay e narrativa
- Variedade nos tipos de objetivos
- Recompensas motivadoras e justas`}buildMissionPrompt(e){const{hero:a,missionType:r,difficulty:i,context:n}=e;let o=`Crie uma missão ${r} de dificuldade ${i} para ${a.name}.

Informações do Herói:
- Nome: ${a.name}
- Classe: ${a.class}
- Nível: ${a.progression.level}
- Rank: ${a.rank||"F"}
- Atributos principais: ${Object.entries(a.attributes).sort(([,l],[,c])=>c-l).slice(0,3).map(([l,c])=>`${l}: ${c}`).join(", ")}`;return a.achievements&&a.achievements.length>0&&(o+=`
- Conquistas recentes: ${a.achievements.slice(-3).map(l=>l.title).join(", ")}`),n&&(o+=`

Contexto adicional: ${n}`),o+=`

A missão deve incluir:
1. Título épico e memorável
2. Descrição breve (1-2 frases)
3. Narrativa envolvente (100-150 palavras)
4. 2-4 objetivos específicos e claros
5. Recompensas apropriadas para o nível
6. Localização interessante
7. Duração estimada em minutos

Formato da resposta em JSON:
{
  "title": "Título da Missão",
  "description": "Descrição breve",
  "narrative": "Narrativa completa",
  "objectives": [
    {
      "description": "Objetivo 1",
      "type": "tipo_do_objetivo",
      "target": "alvo_se_aplicavel",
      "quantity": numero_se_aplicavel,
      "optional": false
    }
  ],
  "rewards": [
    {
      "type": "experience",
      "amount": 100,
      "description": "Experiência ganha"
    }
  ],
  "location": "Nome do Local",
  "estimatedDuration": 30,
  "npcDialogue": [
    {
      "npcName": "Nome do NPC",
      "dialogue": "Fala do NPC",
      "responses": ["Resposta 1", "Resposta 2"]
    }
  ]
}`,o}async generateMission(e){try{const a=await pe.generateText({prompt:this.buildMissionPrompt(e),systemMessage:this.getSystemPrompt(),maxTokens:800,temperature:.8}),r=JSON.parse(a.text);return{id:this.generateMissionId(),title:r.title,description:r.description,narrative:r.narrative,objectives:r.objectives.map((i,n)=>({id:`obj_${n}`,description:i.description,type:i.type,target:i.target,quantity:i.quantity,completed:!1,optional:i.optional||!1})),rewards:r.rewards,difficulty:e.difficulty,type:e.missionType,estimatedDuration:r.estimatedDuration,location:r.location,npcDialogue:r.npcDialogue}}catch(a){return console.error("Error generating dynamic mission:",a),this.generateFallbackMission(e)}}async generateQuestChain(e,a,r=3){const i=[],n=["easy","medium","hard"],o=["combat","exploration","social","crafting","rescue","mystery"];for(let l=0;l<r;l++){const c=n[Math.min(l,n.length-1)],m=o[Math.floor(Math.random()*o.length)],d=l===0?`Primeira missão de uma cadeia temática sobre: ${a}`:`Missão ${l+1} de ${r} na cadeia "${a}". Missões anteriores: ${i.map(p=>p.title).join(", ")}`,h=await this.generateMission({hero:e,missionType:m,difficulty:c,context:d});i.push(h)}return i}async generateNPCDialogue(e,a,r){try{const i=`Crie um diálogo para o NPC "${a}" falando com ${e.name} (${e.class}, nível ${e.progression.level}).

Contexto: ${r}

O diálogo deve:
- Ser apropriado para o contexto medieval fantástico
- Refletir a personalidade única do NPC
- Incluir 2-3 opções de resposta para o jogador
- Ter entre 50-100 palavras

Formato JSON:
{
  "npcName": "${a}",
  "dialogue": "Fala do NPC",
  "responses": ["Resposta 1", "Resposta 2", "Resposta 3"]
}`,n=await pe.generateText({prompt:i,systemMessage:"Você é especialista em criar diálogos envolventes para NPCs em jogos de RPG.",maxTokens:200,temperature:.7});return JSON.parse(n.text)}catch(i){return console.error("Error generating NPC dialogue:",i),{npcName:a,dialogue:`Saudações, ${e.name}! Como posso ajudá-lo hoje?`,responses:["Preciso de uma missão","Conte-me sobre este lugar","Até logo"]}}}generateMissionId(){return`mission_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateFallbackMission(e){const{hero:a,missionType:r,difficulty:i}=e,n={combat:{title:"Ameaça nas Sombras",description:"Criaturas hostis ameaçam a região.",narrative:`${a.name}, relatórios chegaram sobre criaturas perigosas rondando as proximidades. Como ${a.class} experiente, sua ajuda é essencial para proteger os inocentes. Prepare-se para o combate!`,objectives:[{description:"Eliminar 5 criaturas hostis",type:"kill",target:"criaturas",quantity:5,optional:!1}]},exploration:{title:"Ruínas Perdidas",description:"Explore ruínas antigas em busca de tesouros.",narrative:`Antigas ruínas foram descobertas, ${a.name}. Como ${a.class}, você possui as habilidades necessárias para explorar estes locais perigosos e descobrir seus segredos.`,objectives:[{description:"Explorar as ruínas antigas",type:"reach",target:"ruínas",optional:!1},{description:"Encontrar artefato antigo",type:"collect",target:"artefato",quantity:1,optional:!1}]}},o=n[r]||n.combat;return{id:this.generateMissionId(),title:o.title,description:o.description,narrative:o.narrative,objectives:o.objectives.map((l,c)=>({id:`obj_${c}`,description:l.description,type:l.type,target:l.target,quantity:l.quantity,completed:!1,optional:l.optional})),rewards:[{type:"experience",amount:a.progression.level*50,description:"Experiência de combate"},{type:"gold",amount:a.progression.level*25,description:"Recompensa em ouro"}],difficulty:i,type:r,estimatedDuration:20,location:"Região Próxima",npcDialogue:[{npcName:"Capitão da Guarda",dialogue:`${a.name}, precisamos de sua ajuda urgentemente!`,responses:["Aceito a missão","Conte-me mais detalhes","Talvez mais tarde"]}]}}}const Rt=new zx,Ux=({hero:t,className:e="",onMissionAccept:a,onMissionComplete:r})=>{const[i,n]=j.useState([]),[o,l]=j.useState(null),[c,m]=j.useState(null),[d,h]=j.useState(!1),[p,u]=j.useState(!1),[x,g]=j.useState(null),[b,v]=j.useState("available"),w=j.useCallback(async()=>{h(!0),g(null);try{const f=await Promise.all([Rt.generateMission(t,"main"),Rt.generateMission(t,"side"),Rt.generateMission(t,"daily")]);n(f)}catch(f){g("Falha ao gerar missões. Tente novamente."),console.error("Mission generation error:",f)}finally{h(!1)}},[t]),y=j.useCallback(async f=>{u(!0);try{const k=await Rt.generateNPCDialogue(f.npc.name,f.title,f.description,t);m(k)}catch(k){console.error("Dialogue generation error:",k)}finally{u(!1)}},[t]),S=j.useCallback(f=>{l(f),y(f)},[t]),C=j.useCallback(f=>{a==null||a(f),l(null),m(null)},[a]);j.useEffect(()=>{w()},[t]);const N=f=>{switch(f.toLowerCase()){case"easy":return"#4ade80";case"medium":return"#fbbf24";case"hard":return"#f87171";case"legendary":return"#a855f7";default:return T.colors.text.secondary}},A=f=>{switch(f){case"main":return"⚔️";case"side":return"🗡️";case"daily":return"📅";default:return"📜"}};return s.jsxs("div",{className:`dynamic-missions-panel ${e}`,children:[s.jsx("style",{jsx:!0,children:`
        .dynamic-missions-panel {
          background: ${T.colors.background.secondary};
          border: 2px solid ${T.colors.accent.gold};
          border-radius: 12px;
          padding: 20px;
          max-width: 800px;
          margin: 0 auto;
        }

        .panel-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 20px;
          padding-bottom: 12px;
          border-bottom: 1px solid ${T.colors.accent.gold};
        }

        .panel-title {
          color: ${T.colors.text.primary};
          font-size: 24px;
          font-weight: bold;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .ai-badge {
          background: linear-gradient(135deg, #4169e1, #1e90ff);
          color: white;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 10px;
          font-weight: bold;
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .generate-button {
          background: linear-gradient(135deg, ${T.colors.accent.gold}, #b8860b);
          color: ${T.colors.text.primary};
          border: none;
          padding: 8px 16px;
          border-radius: 6px;
          font-size: 12px;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .generate-button:hover:not(:disabled) {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(218, 165, 32, 0.4);
        }

        .generate-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .tabs {
          display: flex;
          margin-bottom: 20px;
          border-bottom: 1px solid rgba(218, 165, 32, 0.3);
        }

        .tab {
          background: none;
          border: none;
          padding: 12px 20px;
          color: ${T.colors.text.secondary};
          cursor: pointer;
          transition: all 0.3s ease;
          border-bottom: 2px solid transparent;
        }

        .tab.active {
          color: ${T.colors.accent.gold};
          border-bottom-color: ${T.colors.accent.gold};
        }

        .missions-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 16px;
          margin-bottom: 20px;
        }

        .mission-card {
          background: ${T.colors.background.primary};
          border: 1px solid ${T.colors.accent.gold};
          border-radius: 8px;
          padding: 16px;
          cursor: pointer;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }

        .mission-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(218, 165, 32, 0.3);
          border-color: ${T.colors.accent.gold};
        }

        .mission-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 12px;
        }

        .mission-title {
          color: ${T.colors.text.primary};
          font-size: 16px;
          font-weight: bold;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .mission-difficulty {
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 10px;
          font-weight: bold;
          text-transform: uppercase;
        }

        .mission-description {
          color: ${T.colors.text.secondary};
          font-size: 14px;
          line-height: 1.4;
          margin-bottom: 12px;
        }

        .mission-objectives {
          margin-bottom: 12px;
        }

        .objective-item {
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 12px;
          color: ${T.colors.text.secondary};
          margin-bottom: 4px;
        }

        .mission-rewards {
          display: flex;
          gap: 8px;
          flex-wrap: wrap;
        }

        .reward-item {
          background: rgba(218, 165, 32, 0.2);
          color: ${T.colors.accent.gold};
          padding: 4px 8px;
          border-radius: 6px;
          font-size: 11px;
          font-weight: bold;
        }

        .mission-npc {
          position: absolute;
          top: 8px;
          right: 8px;
          background: rgba(0, 0, 0, 0.7);
          color: white;
          padding: 4px 8px;
          border-radius: 6px;
          font-size: 10px;
        }

        .loading-state {
          text-align: center;
          padding: 40px;
          color: ${T.colors.text.secondary};
        }

        .loading-spinner {
          width: 32px;
          height: 32px;
          border: 2px solid rgba(218, 165, 32, 0.3);
          border-top: 2px solid ${T.colors.accent.gold};
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 12px;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        .error-message {
          color: ${T.colors.accent.crimson};
          text-align: center;
          padding: 16px;
          background: rgba(220, 20, 60, 0.1);
          border-radius: 8px;
          border: 1px solid rgba(220, 20, 60, 0.3);
        }

        .mission-modal {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          padding: 20px;
        }

        .modal-content {
          background: ${T.colors.background.secondary};
          border: 2px solid ${T.colors.accent.gold};
          border-radius: 12px;
          padding: 24px;
          max-width: 600px;
          width: 100%;
          max-height: 80vh;
          overflow-y: auto;
        }

        .modal-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
          padding-bottom: 12px;
          border-bottom: 1px solid ${T.colors.accent.gold};
        }

        .close-button {
          background: none;
          border: none;
          color: ${T.colors.text.secondary};
          font-size: 24px;
          cursor: pointer;
          padding: 0;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .dialogue-section {
          margin-bottom: 20px;
          padding: 16px;
          background: rgba(0, 0, 0, 0.3);
          border-radius: 8px;
          border-left: 4px solid ${T.colors.accent.gold};
        }

        .npc-name {
          color: ${T.colors.accent.gold};
          font-weight: bold;
          margin-bottom: 8px;
        }

        .dialogue-text {
          color: ${T.colors.text.primary};
          font-style: italic;
          line-height: 1.5;
        }

        .accept-button {
          background: linear-gradient(135deg, #4ade80, #22c55e);
          color: white;
          border: none;
          padding: 12px 24px;
          border-radius: 8px;
          font-weight: bold;
          cursor: pointer;
          transition: all 0.3s ease;
          width: 100%;
          margin-top: 16px;
        }

        .accept-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4);
        }
      `}),s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{className:"panel-title",children:["🗡️ Missões Dinâmicas",s.jsxs("div",{className:"ai-badge",children:[s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"})}),"IA"]})]}),s.jsx("button",{className:"generate-button",onClick:w,disabled:d,children:d?"⏳ Gerando...":"🔄 Gerar Novas"})]}),s.jsx("div",{className:"tabs",children:["available","active","completed"].map(f=>s.jsxs("button",{className:`tab ${b===f?"active":""}`,onClick:()=>v(f),children:[f==="available"&&"📋 Disponíveis",f==="active"&&"⚔️ Ativas",f==="completed"&&"✅ Concluídas"]},f))}),d?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("div",{children:"Gerando missões personalizadas..."})]}):x?s.jsx("div",{className:"error-message",children:x}):s.jsx("div",{className:"missions-grid",children:s.jsx(Fe,{children:i.map((f,k)=>s.jsxs(U.div,{className:"mission-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:k*.1},onClick:()=>S(f),children:[s.jsx("div",{className:"mission-npc",children:f.npc.name}),s.jsxs("div",{className:"mission-header",children:[s.jsxs("div",{className:"mission-title",children:[A(f.type),f.title]}),s.jsx("div",{className:"mission-difficulty",style:{backgroundColor:N(f.difficulty),color:"white"},children:f.difficulty})]}),s.jsx("div",{className:"mission-description",children:f.description}),s.jsxs("div",{className:"mission-objectives",children:[f.objectives.slice(0,2).map((E,D)=>s.jsxs("div",{className:"objective-item",children:[s.jsx("span",{children:"•"}),s.jsx("span",{children:E.description})]},D)),f.objectives.length>2&&s.jsxs("div",{className:"objective-item",children:[s.jsx("span",{children:"•"}),s.jsxs("span",{children:["+",f.objectives.length-2," mais..."]})]})]}),s.jsxs("div",{className:"mission-rewards",children:[s.jsxs("div",{className:"reward-item",children:["💰 ",f.rewards.gold," ouro"]}),s.jsxs("div",{className:"reward-item",children:["⭐ ",f.rewards.experience," XP"]}),f.rewards.items.length>0&&s.jsxs("div",{className:"reward-item",children:["🎁 ",f.rewards.items.length," itens"]})]})]},f.id))})}),s.jsx(Fe,{children:o&&s.jsx(U.div,{className:"mission-modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f=>{f.target===f.currentTarget&&(l(null),m(null))},children:s.jsxs(U.div,{className:"modal-content",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:20},children:[s.jsxs("div",{className:"modal-header",children:[s.jsxs("div",{className:"mission-title",children:[A(o.type),o.title]}),s.jsx("button",{className:"close-button",onClick:()=>{l(null),m(null)},children:"×"})]}),p?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("div",{children:"Gerando diálogo do NPC..."})]}):c&&s.jsxs("div",{className:"dialogue-section",children:[s.jsxs("div",{className:"npc-name",children:[c.npcName,":"]}),s.jsxs("div",{className:"dialogue-text",children:['"',c.text,'"']})]}),s.jsx("div",{className:"mission-description",style:{marginBottom:"16px"},children:o.description}),s.jsxs("div",{className:"mission-objectives",style:{marginBottom:"16px"},children:[s.jsx("strong",{style:{color:T.colors.text.primary},children:"Objetivos:"}),o.objectives.map((f,k)=>s.jsxs("div",{className:"objective-item",children:[s.jsx("span",{children:"•"}),s.jsx("span",{children:f.description})]},k))]}),s.jsx("button",{className:"accept-button",onClick:()=>C(o),children:"⚔️ Aceitar Missão"})]})})})]})};class Qx{getSystemPrompt(){return`Você é um conselheiro especialista em RPG medieval fantástico, focado em ajudar heróis a otimizar sua progressão e experiência de jogo.

Suas recomendações devem ser:
- Personalizadas para o herói específico
- Baseadas em dados e análise inteligente
- Práticas e acionáveis
- Balanceadas entre eficiência e diversão
- Escritas em português brasileiro

Considere sempre:
- O nível atual e objetivos do herói
- Pontos fortes e fracos
- Atividades recentes e padrões
- Tempo disponível para jogar
- Progressão natural e sustentável`}buildRecommendationPrompt(e){var o,l,c,m,d;const{hero:a,context:r,maxRecommendations:i}=e;let n=`Analise o perfil do herói e forneça ${i||3} recomendações personalizadas.

PERFIL DO HERÓI:
- Nome: ${a.name}
- Classe: ${a.class}
- Nível: ${a.progression.level}
- Rank: ${a.rank||"F"}
- Atributos: ${Object.entries(a.attributes).map(([h,p])=>`${h}: ${p}`).join(", ")}`;return a.achievements&&a.achievements.length>0&&(n+=`
- Conquistas: ${a.achievements.slice(-5).map(h=>h.title).join(", ")}`),r&&(n+=`

CONTEXTO ADICIONAL:`,(o=r.recentActivities)!=null&&o.length&&(n+=`
- Atividades recentes: ${r.recentActivities.join(", ")}`),(l=r.currentGoals)!=null&&l.length&&(n+=`
- Objetivos atuais: ${r.currentGoals.join(", ")}`),(c=r.weaknesses)!=null&&c.length&&(n+=`
- Pontos fracos: ${r.weaknesses.join(", ")}`),(m=r.strengths)!=null&&m.length&&(n+=`
- Pontos fortes: ${r.strengths.join(", ")}`),r.availableTime&&(n+=`
- Tempo disponível: ${r.availableTime}`),(d=r.preferredActivities)!=null&&d.length&&(n+=`
- Atividades preferidas: ${r.preferredActivities.join(", ")}`)),n+=`

FORNEÇA RECOMENDAÇÕES EM JSON:
{
  "recommendations": [
    {
      "type": "training|quest|equipment|social|progression|strategy",
      "priority": "low|medium|high|critical",
      "title": "Título da Recomendação",
      "description": "Descrição clara (50-80 palavras)",
      "reasoning": "Por que esta recomendação é importante (30-50 palavras)",
      "actionSteps": ["Passo 1", "Passo 2", "Passo 3"],
      "estimatedBenefit": "Benefício esperado",
      "estimatedTime": "Tempo necessário",
      "prerequisites": ["Pré-requisito 1", "Pré-requisito 2"],
      "relatedAchievements": ["Conquista relacionada"]
    }
  ]
}

TIPOS DE RECOMENDAÇÃO:
- training: Treino de atributos ou habilidades
- quest: Missões específicas para progressão
- equipment: Melhorias de equipamentos
- social: Interações sociais e guildas
- progression: Estratégias de progressão geral
- strategy: Táticas e estratégias de combate`,n}async generateRecommendations(e){try{const a=await pe.generateText({prompt:this.buildRecommendationPrompt(e),systemMessage:this.getSystemPrompt(),maxTokens:1e3,temperature:.7});return JSON.parse(a.text).recommendations.map((i,n)=>({id:this.generateRecommendationId(),type:i.type,priority:i.priority,title:i.title,description:i.description,reasoning:i.reasoning,actionSteps:i.actionSteps||[],estimatedBenefit:i.estimatedBenefit,estimatedTime:i.estimatedTime,prerequisites:i.prerequisites,relatedAchievements:i.relatedAchievements}))}catch(a){return console.error("Error generating recommendations:",a),this.generateFallbackRecommendations(e)}}async analyzeHeroWeaknesses(e){try{const a=`Analise os atributos do herói ${e.name} e identifique pontos fracos:

Atributos:
${Object.entries(e.attributes).map(([i,n])=>`- ${i}: ${n}`).join(`
`)}

Classe: ${e.class}
Nível: ${e.progression.level}

Identifique 2-3 pontos fracos principais baseados nos atributos mais baixos e na classe do herói.
Responda apenas com uma lista simples, uma fraqueza por linha.`;return(await pe.generateText({prompt:a,systemMessage:"Você é um analista especializado em balanceamento de personagens de RPG.",maxTokens:150,temperature:.5})).text.split(`
`).map(i=>i.trim()).filter(i=>i.length>0).slice(0,3)}catch(a){return console.error("Error analyzing weaknesses:",a),this.getFallbackWeaknesses(e)}}async suggestOptimalBuild(e){try{const a=`Sugira um build otimizado para ${e.name} (${e.class}, nível ${e.progression.level}):

Atributos atuais:
${Object.entries(e.attributes).map(([i,n])=>`- ${i}: ${n}`).join(`
`)}

Forneça em JSON:
{
  "attributePriorities": ["Atributo mais importante", "Segundo mais importante", "Terceiro"],
  "skillRecommendations": ["Habilidade 1", "Habilidade 2", "Habilidade 3"],
  "equipmentSuggestions": ["Equipamento 1", "Equipamento 2", "Equipamento 3"],
  "playstyleAdvice": "Conselho sobre estilo de jogo (100-150 palavras)"
}`,r=await pe.generateText({prompt:a,systemMessage:"Você é um especialista em builds otimizados para RPG medieval.",maxTokens:400,temperature:.6});return JSON.parse(r.text)}catch(a){return console.error("Error suggesting optimal build:",a),this.getFallbackBuild(e)}}async generateDailyGoals(e,a){var r,i;try{const n=`Gere 3-5 objetivos diários personalizados para ${e.name}:

Herói: ${e.name} (${e.class}, nível ${e.progression.level}, rank ${e.rank||"F"})

${a?`
Contexto:
- Tempo disponível: ${a.availableTime}
- Atividades preferidas: ${((r=a.preferredActivities)==null?void 0:r.join(", "))||"Não especificado"}
- Objetivos atuais: ${((i=a.currentGoals)==null?void 0:i.join(", "))||"Não especificado"}
`:""}

Os objetivos devem ser:
- Específicos e mensuráveis
- Apropriados para o nível do herói
- Variados e interessantes
- Realizáveis no tempo disponível

Responda apenas com uma lista simples, um objetivo por linha.`;return(await pe.generateText({prompt:n,systemMessage:"Você cria objetivos diários motivadores para jogadores de RPG.",maxTokens:200,temperature:.8})).text.split(`
`).map(l=>l.trim()).filter(l=>l.length>0).slice(0,5)}catch(n){return console.error("Error generating daily goals:",n),this.getFallbackDailyGoals(e)}}generateRecommendationId(){return`rec_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}generateFallbackRecommendations(e){const{hero:a}=e,r=[],i=Object.entries(a.attributes).sort(([,n],[,o])=>n-o)[0];return r.push({id:this.generateRecommendationId(),type:"training",priority:"medium",title:`Treinar ${i[0]}`,description:`Seu atributo ${i[0]} está abaixo da média. Focar no treinamento deste atributo melhorará significativamente sua performance geral.`,reasoning:`${i[0]} é seu atributo mais fraco e limitante.`,actionSteps:["Encontre um instrutor especializado","Complete exercícios de treinamento","Pratique regularmente"],estimatedBenefit:"Melhoria significativa na performance",estimatedTime:"1-2 horas de jogo"}),r.push({id:this.generateRecommendationId(),type:"quest",priority:"high",title:"Missão de Progressão",description:`Como ${a.class} de nível ${a.progression.level}, você deveria focar em missões que desafiem suas habilidades atuais e ofereçam boa experiência.`,reasoning:"Progressão constante é essencial para o desenvolvimento.",actionSteps:["Procure missões apropriadas para seu nível","Prepare equipamentos adequados","Execute a missão com cuidado"],estimatedBenefit:"Experiência e recompensas valiosas",estimatedTime:"30-45 minutos"}),r}getFallbackWeaknesses(e){return Object.entries(e.attributes).sort(([,r],[,i])=>r-i).slice(0,2).map(([r])=>`${r} baixo para a classe ${e.class}`)}getFallbackBuild(e){return{attributePriorities:{Warrior:["strength","constitution","agility"],Mage:["intelligence","wisdom","constitution"],Rogue:["agility","intelligence","strength"],Paladin:["strength","charisma","constitution"],Ranger:["agility","wisdom","strength"],Cleric:["wisdom","charisma","constitution"]}[e.class]||["strength","constitution","agility"],skillRecommendations:["Habilidade de classe principal","Habilidade de sobrevivência","Habilidade social"],equipmentSuggestions:["Arma principal melhorada","Armadura defensiva","Acessório de atributo"],playstyleAdvice:`Como ${e.class}, foque em suas habilidades naturais enquanto desenvolve áreas complementares para um personagem bem equilibrado.`}}getFallbackDailyGoals(e){return[`Completar 2 missões apropriadas para nível ${e.progression.level}`,"Treinar atributo mais fraco por 30 minutos","Interagir com 3 NPCs diferentes","Coletar recursos para crafting","Participar de uma atividade social"]}}const Dt=new Qx,Wx=({hero:t,className:e="",onRecommendationApply:a})=>{const[r,i]=j.useState([]),[n,o]=j.useState([]),[l,c]=j.useState(null),[m,d]=j.useState([]),[h,p]=j.useState(!1),[u,x]=j.useState(null),[g,b]=j.useState("general"),[v,w]=j.useState(null),y=j.useCallback(async()=>{p(!0),x(null);try{const[f,k,E,D]=await Promise.all([Dt.generateRecommendations(t,"general"),Dt.analyzeHeroWeaknesses(t),Dt.suggestOptimalBuild(t),Dt.generateDailyGoals(t)]);i(f),o(k),c(E),d(D)}catch(f){x("Falha ao gerar recomendações. Tente novamente."),console.error("Recommendations generation error:",f)}finally{p(!1)}},[t]),S=j.useCallback(f=>{a==null||a(f)},[a]);j.useEffect(()=>{y()},[t]);const C=f=>{switch(f.toLowerCase()){case"high":return"#f87171";case"medium":return"#fbbf24";case"low":return"#4ade80";default:return T.colors.text.secondary}},N=f=>{switch(f.toLowerCase()){case"high":return"🔥";case"medium":return"⚡";case"low":return"💡";default:return"📝"}},A=f=>{switch(f.toLowerCase()){case"combat":return"⚔️";case"skills":return"🎯";case"equipment":return"🛡️";case"strategy":return"🧠";case"social":return"👥";case"exploration":return"🗺️";default:return"📋"}};return s.jsxs("div",{className:`ai-recommendations-panel ${e}`,children:[s.jsx("style",{jsx:!0,children:`
        .ai-recommendations-panel {
          background: ${T.colors.background.secondary};
          border: 2px solid ${T.colors.accent.gold};
          border-radius: 12px;
          padding: 20px;
          max-width: 900px;
          margin: 0 auto;
        }

        .panel-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 20px;
          padding-bottom: 12px;
          border-bottom: 1px solid ${T.colors.accent.gold};
        }

        .panel-title {
          color: ${T.colors.text.primary};
          font-size: 24px;
          font-weight: bold;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .ai-badge {
          background: linear-gradient(135deg, #4169e1, #1e90ff);
          color: white;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 10px;
          font-weight: bold;
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .refresh-button {
          background: linear-gradient(135deg, ${T.colors.accent.gold}, #b8860b);
          color: ${T.colors.text.primary};
          border: none;
          padding: 8px 16px;
          border-radius: 6px;
          font-size: 12px;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .refresh-button:hover:not(:disabled) {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(218, 165, 32, 0.4);
        }

        .refresh-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }

        .hero-summary {
          background: rgba(0, 0, 0, 0.2);
          border-radius: 8px;
          padding: 16px;
          margin-bottom: 20px;
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 12px;
        }

        .summary-item {
          text-align: center;
        }

        .summary-label {
          color: ${T.colors.text.secondary};
          font-size: 12px;
          margin-bottom: 4px;
        }

        .summary-value {
          color: ${T.colors.text.primary};
          font-size: 16px;
          font-weight: bold;
        }

        .tabs {
          display: flex;
          margin-bottom: 20px;
          border-bottom: 1px solid rgba(218, 165, 32, 0.3);
          overflow-x: auto;
        }

        .tab {
          background: none;
          border: none;
          padding: 12px 16px;
          color: ${T.colors.text.secondary};
          cursor: pointer;
          transition: all 0.3s ease;
          border-bottom: 2px solid transparent;
          white-space: nowrap;
          font-size: 14px;
        }

        .tab.active {
          color: ${T.colors.accent.gold};
          border-bottom-color: ${T.colors.accent.gold};
        }

        .content-section {
          min-height: 300px;
        }

        .recommendations-grid {
          display: grid;
          gap: 16px;
        }

        .recommendation-card {
          background: ${T.colors.background.primary};
          border: 1px solid ${T.colors.accent.gold};
          border-radius: 8px;
          padding: 16px;
          transition: all 0.3s ease;
          cursor: pointer;
        }

        .recommendation-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(218, 165, 32, 0.3);
        }

        .recommendation-card.expanded {
          border-color: ${T.colors.accent.gold};
          box-shadow: 0 4px 12px rgba(218, 165, 32, 0.3);
        }

        .recommendation-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 12px;
        }

        .recommendation-title {
          color: ${T.colors.text.primary};
          font-size: 16px;
          font-weight: bold;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .priority-badge {
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 10px;
          font-weight: bold;
          text-transform: uppercase;
          display: flex;
          align-items: center;
          gap: 4px;
        }

        .recommendation-description {
          color: ${T.colors.text.secondary};
          font-size: 14px;
          line-height: 1.5;
          margin-bottom: 12px;
        }

        .recommendation-actions {
          display: flex;
          gap: 8px;
          margin-top: 12px;
        }

        .apply-button {
          background: linear-gradient(135deg, #4ade80, #22c55e);
          color: white;
          border: none;
          padding: 8px 16px;
          border-radius: 6px;
          font-size: 12px;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .apply-button:hover {
          transform: translateY(-1px);
          box-shadow: 0 2px 8px rgba(34, 197, 94, 0.4);
        }

        .details-button {
          background: ${T.colors.background.secondary};
          color: ${T.colors.text.secondary};
          border: 1px solid ${T.colors.accent.gold};
          padding: 8px 16px;
          border-radius: 6px;
          font-size: 12px;
          cursor: pointer;
          transition: all 0.3s ease;
        }

        .details-button:hover {
          background: ${T.colors.accent.gold};
          color: ${T.colors.text.primary};
        }

        .weaknesses-list {
          display: grid;
          gap: 12px;
        }

        .weakness-item {
          background: rgba(248, 113, 113, 0.1);
          border: 1px solid rgba(248, 113, 113, 0.3);
          border-radius: 8px;
          padding: 12px;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .weakness-icon {
          font-size: 24px;
        }

        .weakness-text {
          color: ${T.colors.text.primary};
          font-size: 14px;
        }

        .build-suggestion {
          background: ${T.colors.background.primary};
          border: 1px solid ${T.colors.accent.gold};
          border-radius: 8px;
          padding: 20px;
        }

        .build-title {
          color: ${T.colors.text.primary};
          font-size: 18px;
          font-weight: bold;
          margin-bottom: 16px;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .build-stats {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
          gap: 12px;
          margin-bottom: 16px;
        }

        .stat-item {
          text-align: center;
          padding: 8px;
          background: rgba(0, 0, 0, 0.2);
          border-radius: 6px;
        }

        .stat-name {
          color: ${T.colors.text.secondary};
          font-size: 12px;
          margin-bottom: 4px;
        }

        .stat-value {
          color: ${T.colors.accent.gold};
          font-size: 16px;
          font-weight: bold;
        }

        .goals-list {
          display: grid;
          gap: 12px;
        }

        .goal-item {
          background: ${T.colors.background.primary};
          border: 1px solid ${T.colors.accent.gold};
          border-radius: 8px;
          padding: 12px;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .goal-checkbox {
          width: 20px;
          height: 20px;
          border: 2px solid ${T.colors.accent.gold};
          border-radius: 4px;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          color: ${T.colors.accent.gold};
        }

        .goal-text {
          color: ${T.colors.text.primary};
          font-size: 14px;
          flex: 1;
        }

        .loading-state {
          text-align: center;
          padding: 40px;
          color: ${T.colors.text.secondary};
        }

        .loading-spinner {
          width: 32px;
          height: 32px;
          border: 2px solid rgba(218, 165, 32, 0.3);
          border-top: 2px solid ${T.colors.accent.gold};
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 12px;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        .error-message {
          color: ${T.colors.accent.crimson};
          text-align: center;
          padding: 16px;
          background: rgba(220, 20, 60, 0.1);
          border-radius: 8px;
          border: 1px solid rgba(220, 20, 60, 0.3);
        }
      `}),s.jsxs("div",{className:"panel-header",children:[s.jsxs("div",{className:"panel-title",children:["🧠 Recomendações IA",s.jsxs("div",{className:"ai-badge",children:[s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"})}),"IA"]})]}),s.jsx("button",{className:"refresh-button",onClick:y,disabled:h,children:h?"⏳ Analisando...":"🔄 Atualizar"})]}),s.jsxs("div",{className:"hero-summary",children:[s.jsxs("div",{className:"summary-item",children:[s.jsx("div",{className:"summary-label",children:"Nível"}),s.jsx("div",{className:"summary-value",children:t.progression.level})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("div",{className:"summary-label",children:"Classe"}),s.jsx("div",{className:"summary-value",children:t.class})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("div",{className:"summary-label",children:"Força"}),s.jsx("div",{className:"summary-value",children:t.attributes.strength})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("div",{className:"summary-label",children:"Agilidade"}),s.jsx("div",{className:"summary-value",children:t.attributes.agility})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("div",{className:"summary-label",children:"Inteligência"}),s.jsx("div",{className:"summary-value",children:t.attributes.intelligence})]}),s.jsxs("div",{className:"summary-item",children:[s.jsx("div",{className:"summary-label",children:"Vitalidade"}),s.jsx("div",{className:"summary-value",children:t.attributes.vitality})]})]}),s.jsx("div",{className:"tabs",children:["general","build","goals","weaknesses"].map(f=>s.jsxs("button",{className:`tab ${g===f?"active":""}`,onClick:()=>b(f),children:[f==="general"&&"📋 Geral",f==="build"&&"🛡️ Build Ideal",f==="goals"&&"🎯 Metas Diárias",f==="weaknesses"&&"⚠️ Fraquezas"]},f))}),s.jsx("div",{className:"content-section",children:h?s.jsxs("div",{className:"loading-state",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("div",{children:"Analisando seu herói e gerando recomendações..."})]}):u?s.jsx("div",{className:"error-message",children:u}):s.jsxs(Fe,{mode:"wait",children:[g==="general"&&s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"recommendations-grid",children:r.map(f=>s.jsxs("div",{className:`recommendation-card ${v===f.id?"expanded":""}`,onClick:()=>w(v===f.id?null:f.id),children:[s.jsxs("div",{className:"recommendation-header",children:[s.jsxs("div",{className:"recommendation-title",children:[A(f.category),f.title]}),s.jsxs("div",{className:"priority-badge",style:{backgroundColor:C(f.priority),color:"white"},children:[N(f.priority),f.priority]})]}),s.jsx("div",{className:"recommendation-description",children:f.description}),v===f.id&&s.jsxs(U.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"recommendation-actions",children:[s.jsx("button",{className:"apply-button",onClick:k=>{k.stopPropagation(),S(f)},children:"✅ Aplicar"}),s.jsx("button",{className:"details-button",children:"📖 Mais Detalhes"})]})]},f.id))},"general"),g==="build"&&l&&s.jsxs(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"build-suggestion",children:[s.jsxs("div",{className:"build-title",children:["🛡️ Build Recomendado para ",t.class]}),s.jsxs("div",{className:"build-stats",children:[s.jsxs("div",{className:"stat-item",children:[s.jsx("div",{className:"stat-name",children:"Força"}),s.jsx("div",{className:"stat-value",children:l.strength||25})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("div",{className:"stat-name",children:"Agilidade"}),s.jsx("div",{className:"stat-value",children:l.agility||20})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("div",{className:"stat-name",children:"Inteligência"}),s.jsx("div",{className:"stat-value",children:l.intelligence||15})]}),s.jsxs("div",{className:"stat-item",children:[s.jsx("div",{className:"stat-name",children:"Vitalidade"}),s.jsx("div",{className:"stat-value",children:l.vitality||30})]})]}),s.jsx("div",{style:{color:T.colors.text.secondary,fontSize:"14px"},children:"Esta distribuição de atributos é otimizada para sua classe e estilo de jogo atual. Considere redistribuir seus pontos de atributo para maximizar sua efetividade."})]},"build"),g==="goals"&&s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"goals-list",children:m.map((f,k)=>s.jsxs("div",{className:"goal-item",children:[s.jsx("div",{className:"goal-checkbox",children:"☐"}),s.jsx("div",{className:"goal-text",children:f})]},k))},"goals"),g==="weaknesses"&&s.jsx(U.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"weaknesses-list",children:n.map((f,k)=>s.jsxs("div",{className:"weakness-item",children:[s.jsx("div",{className:"weakness-icon",children:"⚠️"}),s.jsx("div",{className:"weakness-text",children:f})]},k))},"weaknesses")]})})]})},Xx=()=>{const{getSelectedHero:t,updateHero:e}=V(),a=t(),[r,i]=j.useState("consumables"),[n,o]=j.useState(!1);if(!a)return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🏪"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Loja do Aventureiro"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para acessar a loja."}),s.jsx(Link,{to:"/",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition-colors",children:"Voltar à Lista de Heróis"})]});const l=d=>{const h=qi(a,d);h.success&&h.newGold!==void 0&&h.item&&e(a.id,{progression:{...a.progression,gold:h.newGold},inventory:{...a.inventory,items:{...a.inventory.items,[d]:(a.inventory.items[d]||0)+1}}}),alert(h.message)},c=d=>{const h=Fi(a,d),p=Kl(d,a),u=p<d.price,x=_l[d.rarity];return s.jsxs("div",{className:"bg-white p-4 rounded-lg border-2 shadow-sm hover:shadow-md transition-shadow",style:{borderColor:x.color},children:[s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("div",{className:"text-3xl mb-2",children:d.icon||"📦"}),s.jsx("h3",{className:"font-bold text-gray-800",style:{color:x.color},children:d.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:d.description})]}),d.bonus&&s.jsx("div",{className:"text-xs text-center mb-3 space-y-1",children:Object.entries(d.bonus).map(([g,b])=>s.jsxs("div",{className:"text-green-600",children:["+",b," ",g.charAt(0).toUpperCase()+g.slice(1)]},g))}),d.effects&&s.jsxs("div",{className:"text-xs text-center mb-3 space-y-1",children:[d.effects.hp&&s.jsxs("div",{className:"text-red-600",children:["+",d.effects.hp," HP"]}),d.effects.mp&&s.jsxs("div",{className:"text-blue-600",children:["+",d.effects.mp," MP"]}),d.effects.duration&&s.jsxs("div",{className:"text-purple-600",children:["Duração: ",d.effects.duration,"min"]})]}),s.jsx("div",{className:"text-center mb-3",children:u?s.jsxs("div",{children:[s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[d.price,"g"]}),s.jsxs("span",{className:"text-lg font-bold text-green-600 ml-2",children:[p,"g"]})]}):s.jsxs("span",{className:"text-lg font-bold text-yellow-600",children:[d.price,"g"]})}),s.jsx("button",{onClick:()=>l(d.id),disabled:!h,className:`w-full py-2 px-4 rounded font-medium transition-colors ${h?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:h?"Comprar":"Ouro Insuficiente"})]},d.id)},m=Wl();return s.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"🏪 Loja do Aventureiro"}),s.jsx("p",{className:"text-gray-600",children:"Equipamentos, consumíveis e itens especiais para sua jornada"}),s.jsx("div",{className:"mt-4 bg-yellow-100 border border-yellow-400 rounded-lg p-3 inline-block",children:s.jsxs("span",{className:"text-yellow-800 font-medium",children:["💰 Ouro Disponível: ",a.progression.gold,"g"]})})]}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:[s.jsx("button",{onClick:()=>o(!1),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-blue-600 text-white"}`,children:"Catálogo Geral"}),s.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"⭐ Ofertas Diárias"})]}),n?s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-orange-600",children:"⭐ Ofertas Especiais do Dia (20% OFF)"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(c)})]}):s.jsxs("div",{children:[s.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:Object.entries(Ua).map(([d,h])=>s.jsxs("button",{onClick:()=>i(d),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r===d?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[h.icon," ",h.name]},d))}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Ua[r].items.map(c)})]})]})},ki=[{id:"basic-combat",name:"Treinamento Básico de Combate",description:"Aprenda os fundamentos do combate corpo a corpo",icon:"⚔️",cost:20,duration:30,rewards:{xp:25,attributes:{forca:1}}},{id:"agility-training",name:"Treinamento de Agilidade",description:"Melhore sua velocidade e reflexos",icon:"🏃",cost:25,duration:45,rewards:{xp:30,attributes:{destreza:1}}},{id:"magic-studies",name:"Estudos Mágicos",description:"Aprofunde seus conhecimentos arcanos",icon:"📚",cost:35,duration:60,rewards:{xp:40,attributes:{inteligencia:1}},requirements:{level:3}},{id:"meditation",name:"Meditação Espiritual",description:"Fortaleça sua mente e espírito",icon:"🧘",cost:30,duration:40,rewards:{xp:35,attributes:{sabedoria:1}}},{id:"endurance-training",name:"Treinamento de Resistência",description:"Aumente sua resistência física",icon:"💪",cost:40,duration:50,rewards:{xp:45,attributes:{constituicao:1}},requirements:{level:2}},{id:"charisma-workshop",name:"Workshop de Liderança",description:"Desenvolva suas habilidades sociais",icon:"🎭",cost:50,duration:90,rewards:{xp:50,attributes:{carisma:1}},requirements:{level:5}},{id:"advanced-combat",name:"Combate Avançado",description:"Técnicas avançadas de combate",icon:"🗡️",cost:100,duration:120,rewards:{xp:100,attributes:{forca:2,destreza:1}},requirements:{level:10}},{id:"treasure-hunting",name:"Caça ao Tesouro",description:"Aprenda a encontrar tesouros escondidos",icon:"💰",cost:75,duration:180,rewards:{xp:60,gold:150},requirements:{level:7}}],Kx=()=>{var u;const{getSelectedHero:t,updateHero:e}=V(),a=t(),[r,i]=j.useState(null),[n,o]=j.useState(null);if(!a)return s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"💪"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Centro de Treinamento"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para começar o treinamento."}),s.jsx(Link,{to:"/",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition-colors",children:"Voltar à Lista de Heróis"})]});const l=x=>a.progression.gold>=x.cost,c=x=>{var g,b;return!((g=x.requirements)!=null&&g.level&&a.progression.level<x.requirements.level||(b=x.requirements)!=null&&b.gold&&a.progression.gold<x.requirements.gold)},m=x=>{if(!l(x)||!c(x))return;e(a.id,{progression:{...a.progression,gold:a.progression.gold-x.cost}}),i(x.id);const g=Date.now()+x.duration*60*1e3;o(g),setTimeout(()=>{d(x)},x.duration*60*1e3)},d=x=>{const g={progression:{...a.progression}};x.rewards.xp&&(g.progression.xp=a.progression.xp+x.rewards.xp),x.rewards.gold&&(g.progression.gold=a.progression.gold+x.rewards.gold),x.rewards.attributes&&(g.attributes={...a.attributes},Object.entries(x.rewards.attributes).forEach(([b,v])=>{g.attributes[b]=(a.attributes[b]||0)+v})),e(a.id,g),i(null),o(null),alert(`Treinamento concluído! Você ganhou as recompensas de ${x.name}.`)},h=()=>n?Math.max(0,n-Date.now()):0,p=x=>{const g=Math.floor(x/6e4),b=Math.floor(x%6e4/1e3);return`${g}:${b.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"💪 Centro de Treinamento"}),s.jsx("p",{className:"text-gray-600",children:"Aprimore suas habilidades e atributos através de treinamentos especializados"}),s.jsx("div",{className:"mt-4 bg-blue-100 border border-blue-400 rounded-lg p-3 inline-block",children:s.jsxs("span",{className:"text-blue-800 font-medium",children:["💰 Ouro Disponível: ",a.progression.gold,"g"]})})]}),r&&s.jsx("div",{className:"bg-yellow-100 border border-yellow-400 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-lg font-bold text-yellow-800 mb-2",children:"🏃 Treinamento em Andamento"}),s.jsx("p",{className:"text-yellow-700",children:(u=ki.find(x=>x.id===r))==null?void 0:u.name}),s.jsxs("p",{className:"text-yellow-600 text-sm mt-1",children:["Tempo restante: ",p(h())]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ki.map(x=>{const g=l(x),b=c(x),v=g&&b&&!r;return s.jsxs("div",{className:`bg-white p-6 rounded-lg border-2 shadow-sm ${v?"border-green-400 hover:shadow-md":"border-gray-300"} transition-shadow`,children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsx("div",{className:"text-4xl mb-2",children:x.icon}),s.jsx("h3",{className:"text-lg font-bold text-gray-800",children:x.name}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.description})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Custo:"}),s.jsxs("span",{className:"font-medium text-yellow-600",children:[x.cost,"g"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Duração:"}),s.jsxs("span",{className:"font-medium",children:[x.duration," min"]})]})]}),x.requirements&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Requisitos:"}),x.requirements.level&&s.jsxs("div",{className:`text-xs ${a.progression.level>=x.requirements.level?"text-green-600":"text-red-600"}`,children:["Nível ",x.requirements.level,"+"]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Recompensas:"}),s.jsxs("div",{className:"space-y-1",children:[x.rewards.xp&&s.jsxs("div",{className:"text-xs text-blue-600",children:["+",x.rewards.xp," XP"]}),x.rewards.gold&&s.jsxs("div",{className:"text-xs text-yellow-600",children:["+",x.rewards.gold," Ouro"]}),x.rewards.attributes&&Object.entries(x.rewards.attributes).map(([w,y])=>s.jsxs("div",{className:"text-xs text-green-600",children:["+",y," ",w.charAt(0).toUpperCase()+w.slice(1)]},w))]})]}),s.jsx("button",{onClick:()=>m(x),disabled:!v,className:`w-full py-2 px-4 rounded font-medium transition-colors ${v?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:g?b?r?"Treinamento em andamento":"Iniciar Treinamento":"Requisitos não atendidos":"Ouro Insuficiente"})]},x.id)})})]})};function Yx(){const{getSelectedHero:t}=V(),e=t();return e?s.jsx(Dd,{hero:e}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🦸"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum herói selecionado"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para ver sua progressão."}),s.jsx(q,{to:"/",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition-colors",children:"Voltar à Lista de Heróis"})]})}function Jx(){const{getSelectedHero:t}=V(),e=t();return e?s.jsx($d,{hero:e}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🏰"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum herói selecionado"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para acessar o sistema de guildas."}),s.jsx(q,{to:"/",className:"bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700 transition-colors",children:"Voltar à Lista de Heróis"})]})}function Zx(){const{getSelectedHero:t}=V(),e=t();return e?s.jsx(Kd,{heroId:e.id}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum herói selecionado"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para ver suas metas diárias."}),s.jsx(q,{to:"/",className:"bg-indigo-600 text-white px-6 py-2 rounded hover:bg-indigo-700 transition-colors",children:"Voltar à Lista de Heróis"})]})}function eg(){const{getSelectedHero:t}=V(),e=t();return e?s.jsx(qx,{heroId:e.id,className:"max-w-6xl mx-auto"}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🏆"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum herói selecionado"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para ver sua evolução de ranks."}),s.jsx(q,{to:"/",className:"bg-amber-600 text-white px-6 py-2 rounded hover:bg-amber-700 transition-colors",children:"Voltar à Lista de Heróis"})]})}function tg(){const{getSelectedHero:t}=V(),e=t();return e?s.jsx(_x,{hero:e,className:"max-w-4xl mx-auto"}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎭"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum herói selecionado"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para gerar avatares com IA."}),s.jsx(q,{to:"/",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition-colors",children:"Voltar à Lista de Heróis"})]})}function sg(){const{getSelectedHero:t}=V(),e=t();return e?s.jsx(Ux,{hero:e,className:"max-w-6xl mx-auto"}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🗡️"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum herói selecionado"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para ver missões dinâmicas."}),s.jsx(q,{to:"/",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition-colors",children:"Voltar à Lista de Heróis"})]})}function ag(){const{getSelectedHero:t}=V(),e=t();return e?s.jsx(Wx,{hero:e,className:"max-w-6xl mx-auto"}):s.jsxs("div",{className:"max-w-4xl mx-auto p-6 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🧠"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum herói selecionado"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Selecione um herói para ver recomendações de IA."}),s.jsx(q,{to:"/",className:"bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition-colors",children:"Voltar à Lista de Heróis"})]})}function rg(){const{heroes:t,markCelebrationViewed:e}=V();j.useEffect(()=>{window.self!==window.top&&(window.top.location=window.self.location);const i=document.createElement("meta");i.httpEquiv="Content-Security-Policy",i.content="default-src 'self'; style-src 'self' 'unsafe-inline'; script-src 'self'; img-src 'self' data:;",document.head.appendChild(i)},[]);const a=t.flatMap(i=>{var n;return(((n=i.rankData)==null?void 0:n.pendingCelebrations)||[]).map((o,l)=>({...o,heroId:i.id,celebrationIndex:l}))}),r=i=>{const n=a[i];n&&e(n.heroId,n.celebrationIndex)};return s.jsxs(s.Fragment,{children:[s.jsx(Jd,{}),a.length>0&&s.jsx(Bx,{celebrations:a,onCelebrationViewed:r}),s.jsx(Oo,{children:s.jsxs(Q,{path:"/",element:s.jsx(jc,{}),children:[s.jsx(Q,{index:!0,element:s.jsx(Nd,{})}),s.jsx(Q,{path:"create",element:s.jsx(Td,{})}),s.jsx(Q,{path:"hero/:id",element:s.jsx(Pd,{})}),s.jsx(Q,{path:"progression",element:s.jsx(Yx,{})}),s.jsx(Q,{path:"evolution",element:s.jsx(eg,{})}),s.jsx(Q,{path:"guilds",element:s.jsx(Jx,{})}),s.jsx(Q,{path:"quests",element:s.jsx(_d,{})}),s.jsx(Q,{path:"daily-goals",element:s.jsx(Zx,{})}),s.jsx(Q,{path:"events",element:s.jsx(Zd,{})}),s.jsx(Q,{path:"activities",element:s.jsx(em,{})}),s.jsx(Q,{path:"tutorial",element:s.jsx(Yd,{})}),s.jsx(Q,{path:"titles",element:s.jsx(Wd,{})}),s.jsx(Q,{path:"leaderboards",element:s.jsx(Xd,{})}),s.jsx(Q,{path:"metrics",element:s.jsx(tm,{})}),s.jsx(Q,{path:"playtest",element:s.jsx(Id,{})}),s.jsx(Q,{path:"ai-avatar",element:s.jsx(tg,{})}),s.jsx(Q,{path:"ai-missions",element:s.jsx(sg,{})}),s.jsx(Q,{path:"ai-recommendations",element:s.jsx(ag,{})}),s.jsx(Q,{path:"shop",element:s.jsx(Xx,{})}),s.jsx(Q,{path:"training",element:s.jsx(Kx,{})})]})})]})}const ig=()=>window.location.hostname==="dilmax12.github.io"?"/HeroForgeNew":"/";Ns.createRoot(document.getElementById("root")).render(s.jsx(Qt.StrictMode,{children:s.jsx(Bo,{basename:ig(),children:s.jsx(rg,{})})}));
