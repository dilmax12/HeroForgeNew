{"version":3,"file":"dynamicMissionsAI-cc3e32c1.js","sources":["../../src/services/dynamicMissionsAI.ts"],"sourcesContent":["import { aiService } from './aiService';\nimport { MissionGenerationRequest } from '../types/ai';\nimport { Hero } from '../types/hero';\n\nexport interface DynamicMission {\n  id: string;\n  title: string;\n  description: string;\n  narrative: string;\n  objectives: MissionObjective[];\n  rewards: MissionReward[];\n  difficulty: 'easy' | 'medium' | 'hard' | 'extreme';\n  type: 'combat' | 'exploration' | 'social' | 'crafting' | 'rescue' | 'mystery';\n  estimatedDuration: number; // in minutes\n  prerequisites?: string[];\n  location: string;\n  npcDialogue?: NPCDialogue[];\n}\n\nexport interface MissionObjective {\n  id: string;\n  description: string;\n  type: 'kill' | 'collect' | 'interact' | 'reach' | 'survive' | 'solve';\n  target?: string;\n  quantity?: number;\n  completed: boolean;\n  optional: boolean;\n}\n\nexport interface MissionReward {\n  type: 'experience' | 'gold' | 'item' | 'achievement' | 'rank_points';\n  amount: number;\n  description: string;\n}\n\nexport interface NPCDialogue {\n  npcName: string;\n  dialogue: string;\n  responses?: string[];\n}\n\nexport class DynamicMissionsAI {\n  private inflightMission: Promise<DynamicMission> | null = null;\n  private lastCallTs: number = 0;\n  private readonly minIntervalMs: number = 8000;\n  private getSystemPrompt(): string {\n    return `Você é um mestre de RPG criando missões no mundo \"A Balada do Véu Partido\".\n\nDiretrizes:\n- Missões sempre devem se conectar ao Véu Partido: fendas na realidade, ecos de luz e sombra.\n - Integre a Foja dos Herois de Altharion como contexto para convites, patronos e recompensas.\n- Utilize elementos de lore: artefatos do Véu, guardiões espectrais, zonas instáveis, facções Ordem e Sombra.\n- Adapte ao nível e classe do herói, mantendo coerência narrativa e equilíbrio de recompensas.\n- Escreva em português brasileiro, com tom épico acessível e rico em detalhes.\n\nConsidere:\n- Histórico e conquistas do herói\n- Progressão natural de dificuldade\n- Elementos de roleplay (diálogos de NPCs, escolhas)\n- Variedade de tipos de objetivos\n- Recompensas justas e motivadoras`;\n  }\n\n  private buildMissionPrompt(request: MissionGenerationRequest): string {\n    const { hero, missionType, difficulty, context } = request;\n\n    let prompt = `Crie uma missão ${missionType} de dificuldade ${difficulty} para ${hero.name}.\n\nInformações do Herói:\n- Nome: ${hero.name}\n- Classe: ${hero.class}\n- Nível: ${hero.progression.level}\n- Rank: ${hero.rank || 'F'}\n- Alinhamento: ${hero.alignment}\n- Atributos principais: ${Object.entries(hero.attributes)\n      .sort(([,a], [,b]) => b - a)\n      .slice(0, 3)\n      .map(([attr, value]) => `${attr}: ${value}`)\n      .join(', ')}`;\n\n    if (hero.achievements && hero.achievements.length > 0) {\n      prompt += `\\n- Conquistas recentes: ${hero.achievements.slice(-3).map(a => a.title).join(', ')}`;\n    }\n\n    if (context) {\n      prompt += `\\n\\nContexto adicional: ${context}`;\n    }\n\n    // Lore fixa do mundo para manter consistência\n    prompt += `\\n\\nLore do Mundo (use como pano de fundo):\n- O Véu (fronteira entre o mundo mortal e o além) foi quebrado.\n- Fendas do Véu surgem com instabilidade mágica, liberando criaturas e anomalias.\n - A Foja dos Herois de Altharion coordena esforços para investigar e selar fendas.\n- Facções Ordem e Sombra disputam influência; decisões podem alterar a reputação.\n- Artefatos do Véu amplificam magia e podem estabilizar ou agravar fendas.`;\n\n    prompt += `\\n\\nA missão deve incluir (integrada à lore acima quando possível):\n1. Título épico e memorável\n2. Descrição breve (1-2 frases)\n3. Narrativa envolvente (100-150 palavras)\n4. 2-4 objetivos específicos e claros\n5. Recompensas apropriadas para o nível\n6. Localização interessante\n7. Duração estimada em minutos\n  8. Se relevante, impacto em reputação com Ordem e/ou Sombra\n  \n\nFormato da resposta em JSON:\n{\n  \"title\": \"Título da Missão\",\n  \"description\": \"Descrição breve\",\n  \"narrative\": \"Narrativa completa\",\n  \"objectives\": [\n    {\n      \"description\": \"Objetivo 1\",\n      \"type\": \"tipo_do_objetivo\",\n      \"target\": \"alvo_se_aplicavel\",\n      \"quantity\": numero_se_aplicavel,\n      \"optional\": false\n    }\n  ],\n  \"rewards\": [\n    {\n      \"type\": \"experience\",\n      \"amount\": 100,\n      \"description\": \"Experiência ganha\"\n    }\n  ],\n  \"location\": \"Nome do Local\",\n  \"estimatedDuration\": 30,\n  \"npcDialogue\": [\n    {\n      \"npcName\": \"Nome do NPC\",\n      \"dialogue\": \"Fala do NPC\",\n      \"responses\": [\"Resposta 1\", \"Resposta 2\"]\n    }\n  ]\n}`;\n\n    return prompt;\n  }\n\n  async generateMission(request: MissionGenerationRequest): Promise<DynamicMission> {\n    const now = Date.now();\n    // Se já há uma requisição em andamento e estamos dentro do intervalo mínimo, reutiliza a promessa\n    if (this.inflightMission && (now - this.lastCallTs) < this.minIntervalMs) {\n      return this.inflightMission;\n    }\n    this.lastCallTs = now;\n\n    this.inflightMission = (async () => {\n      try {\n        // Se o serviço de IA não estiver configurado, retorne missão fallback\n        if (!aiService.isConfigured()) {\n          return this.generateFallbackMission(request);\n        }\n        console.debug('[AI][Missions] GenerateMission dispatch', {\n          provider: aiService.getProvider(),\n          hero: {\n            id: request.hero.id,\n            name: request.hero.name,\n            class: request.hero.class,\n            level: request.hero.progression.level\n          },\n          missionType: request.missionType,\n          difficulty: request.difficulty\n        });\n        const response = await aiService.generateText({\n          prompt: this.buildMissionPrompt(request),\n          systemMessage: this.getSystemPrompt(),\n          // Reduzimos tokens para aliviar TPM em provedores com limite\n          maxTokens: 600,\n          temperature: 0.8\n        });\n        console.debug('[AI][Missions] GenerateMission response', {\n          textLen: response.text?.length || 0,\n          provider: response.provider,\n          model: response.model\n        });\n\n        // Parse robusto do JSON da resposta\n        let missionData: any = null;\n        try {\n          missionData = JSON.parse(response.text);\n        } catch {\n          // Tentar extrair um bloco JSON da string\n          const match = response.text.match(/\\{[\\s\\S]*\\}/);\n          if (match) {\n            try { missionData = JSON.parse(match[0]); } catch {}\n          }\n        }\n\n        // Validar estrutura mínima\n        if (!missionData || !missionData.title || !missionData.description || !missionData.objectives || !missionData.rewards) {\n          return this.generateFallbackMission(request);\n        }\n        \n        return {\n          id: this.generateMissionId(),\n          title: missionData.title,\n          description: missionData.description,\n          narrative: missionData.narrative,\n          objectives: missionData.objectives.map((obj: any, index: number) => ({\n            id: `obj_${index}`,\n            description: obj.description,\n            type: obj.type,\n            target: obj.target,\n            quantity: obj.quantity,\n            completed: false,\n            optional: obj.optional || false\n          })),\n          rewards: missionData.rewards,\n          difficulty: request.difficulty,\n          type: request.missionType,\n          estimatedDuration: missionData.estimatedDuration,\n          location: missionData.location,\n          npcDialogue: missionData.npcDialogue\n        };\n      } catch (error) {\n        const e: any = error;\n        console.error('[AI][Missions] GenerateMission failed', {\n          code: e?.code,\n          message: e?.message,\n          provider: e?.provider,\n          retryable: e?.retryable\n        });\n        return this.generateFallbackMission(request);\n      }\n    })();\n\n    try {\n      return await this.inflightMission;\n    } finally {\n      this.inflightMission = null;\n    }\n  }\n\n  async generateQuestChain(hero: Hero, theme: string, length: number = 3): Promise<DynamicMission[]> {\n    const missions: DynamicMission[] = [];\n    const difficulties: Array<'easy' | 'medium' | 'hard' | 'extreme'> = ['easy', 'medium', 'hard'];\n    const types: Array<'combat' | 'exploration' | 'social' | 'crafting' | 'rescue' | 'mystery'> = \n      ['combat', 'exploration', 'social', 'crafting', 'rescue', 'mystery'];\n\n    for (let i = 0; i < length; i++) {\n      const difficulty = difficulties[Math.min(i, difficulties.length - 1)];\n      const missionType = types[Math.floor(Math.random() * types.length)];\n      \n      const context = i === 0 \n        ? `Primeira missão de uma cadeia temática sobre: ${theme}`\n        : `Missão ${i + 1} de ${length} na cadeia \"${theme}\". Missões anteriores: ${missions.map(m => m.title).join(', ')}`;\n\n      const mission = await this.generateMission({\n        hero,\n        missionType,\n        difficulty,\n        context\n      });\n\n      missions.push(mission);\n    }\n\n    return missions;\n  }\n\n  async generateNPCDialogue(hero: Hero, npcName: string, context: string): Promise<NPCDialogue> {\n    try {\n      if (!aiService.isConfigured()) {\n        return {\n          npcName,\n          dialogue: `Saudações, ${hero.name}! Como posso ajudá-lo hoje?`,\n          responses: ['Preciso de uma missão', 'Conte-me sobre este lugar', 'Até logo']\n        };\n      }\n      console.debug('[AI][Missions] GenerateNPCDialogue dispatch', {\n        provider: aiService.getProvider(),\n        hero: { name: hero.name, class: hero.class, level: hero.progression.level },\n        npcName,\n        contextLen: context?.length || 0\n      });\n      const prompt = `Crie um diálogo para o NPC \"${npcName}\" falando com ${hero.name} (${hero.class}, nível ${hero.progression.level}).\n\nContexto: ${context}\n\nO diálogo deve:\n- Ser apropriado para o contexto medieval fantástico\n- Refletir a personalidade única do NPC\n- Incluir 2-3 opções de resposta para o jogador\n- Ter entre 50-100 palavras\n \n\nFormato JSON:\n{\n  \"npcName\": \"${npcName}\",\n  \"dialogue\": \"Fala do NPC\",\n  \"responses\": [\"Resposta 1\", \"Resposta 2\", \"Resposta 3\"]\n}`;\n\n      const response = await aiService.generateText({\n        prompt,\n        systemMessage: 'Você é especialista em criar diálogos envolventes para NPCs em jogos de RPG.',\n        maxTokens: 200,\n        temperature: 0.7\n      });\n      console.debug('[AI][Missions] GenerateNPCDialogue response', {\n        textLen: response.text?.length || 0,\n        provider: response.provider,\n        model: response.model\n      });\n\n      // Parse robusto\n      try {\n        return JSON.parse(response.text);\n      } catch {\n        const match = response.text.match(/\\{[\\s\\S]*\\}/);\n        if (match) {\n          try { return JSON.parse(match[0]); } catch {}\n        }\n        return {\n          npcName,\n          dialogue: `Saudações, ${hero.name}! Como posso ajudá-lo hoje?`,\n          responses: ['Preciso de uma missão', 'Conte-me sobre este lugar', 'Até logo']\n        };\n      }\n    } catch (error) {\n      const e: any = error;\n      console.error('[AI][Missions] GenerateNPCDialogue failed', {\n        code: e?.code,\n        message: e?.message,\n        provider: e?.provider,\n        retryable: e?.retryable\n      });\n      return {\n        npcName,\n        dialogue: `Saudações, ${hero.name}! Como posso ajudá-lo hoje?`,\n        responses: ['Preciso de uma missão', 'Conte-me sobre este lugar', 'Até logo']\n      };\n    }\n  }\n\n  private generateMissionId(): string {\n    return `mission_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n\n  private generateFallbackMission(request: MissionGenerationRequest): DynamicMission {\n    const { hero, missionType, difficulty } = request;\n    \n    const fallbackMissions = {\n      combat: {\n        title: 'Ameaça nas Sombras',\n        description: 'Criaturas hostis ameaçam a região.',\n        narrative: `${hero.name}, relatórios chegaram sobre criaturas perigosas rondando as proximidades. Como ${hero.class} experiente, sua ajuda é essencial para proteger os inocentes. Prepare-se para o combate!`,\n        objectives: [\n          { description: 'Eliminar 5 criaturas hostis', type: 'kill', target: 'criaturas', quantity: 5, optional: false }\n        ]\n      },\n      exploration: {\n        title: 'Ruínas Perdidas',\n        description: 'Explore ruínas antigas em busca de tesouros.',\n        narrative: `Antigas ruínas foram descobertas, ${hero.name}. Como ${hero.class}, você possui as habilidades necessárias para explorar estes locais perigosos e descobrir seus segredos.`,\n        objectives: [\n          { description: 'Explorar as ruínas antigas', type: 'reach', target: 'ruínas', optional: false },\n          { description: 'Encontrar artefato antigo', type: 'collect', target: 'artefato', quantity: 1, optional: false }\n        ]\n      }\n    };\n\n    const template = fallbackMissions[missionType] || fallbackMissions.combat;\n    \n    return {\n      id: this.generateMissionId(),\n      title: template.title,\n      description: template.description,\n      narrative: template.narrative,\n      objectives: template.objectives.map((obj, index) => ({\n        id: `obj_${index}`,\n        description: obj.description,\n        type: obj.type as any,\n        target: obj.target,\n        quantity: obj.quantity,\n        completed: false,\n        optional: obj.optional\n      })),\n      rewards: [\n        { type: 'experience', amount: hero.progression.level * 50, description: 'Experiência de combate' },\n        { type: 'gold', amount: hero.progression.level * 25, description: 'Recompensa em ouro' }\n      ],\n      difficulty,\n      type: missionType,\n      estimatedDuration: 20,\n      location: 'Região Próxima',\n      npcDialogue: [{\n        npcName: 'Capitão da Guarda',\n        dialogue: `${hero.name}, precisamos de sua ajuda urgentemente!`,\n        responses: ['Aceito a missão', 'Conte-me mais detalhes', 'Talvez mais tarde']\n      }]\n    };\n  }\n}\n\nexport const dynamicMissionsAI = new DynamicMissionsAI();\n"],"names":["DynamicMissionsAI","__publicField","request","hero","missionType","difficulty","context","prompt","a","b","attr","value","now","aiService","response","_a","missionData","match","obj","index","error","theme","length","missions","difficulties","types","m","mission","npcName","e","fallbackMissions","template","dynamicMissionsAI"],"mappings":"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"}